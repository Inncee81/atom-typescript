var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function e(t){return t&&t.__esModule?t.default:t}require("crypto").createHash;var n,r,i=require("module"),o=(require("events").EventEmitter,require("assert")),s=require("timers").setImmediate,a=require("util"),c=(n={},r=a,Object.keys(r).forEach((function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return r[t]}})})),n),u=a.inherits,l=require("stream"),f=l.Transform,p=l.Readable,h=e(require("typescript")),d=require("atom"),g=d.CompositeDisposable,m=d.Point,v=d.Range,y=d.TextBuffer,w=d.Disposable,b=d.Emitter,_=d.BufferedNodeProcess,x=(d.BufferedProcess,d.TextEditor),S=d.File,k=require("path"),E=k,C=k.extname,T=k.join,A=k.dirname,P=k.normalize,O=k.delimiter,I=k.resolve,j=k.isAbsolute,N=k.relative,L=k.parse,F=k.sep,D=require("fs"),M=D,R=e(D),$=D.access,B=D.constants,z=D.readFile,q=D.realpath,H=D.stat,U=D.realpathSync,V=D.statSync,W=(D.readFileSync,D.lstatSync),G=D.readlinkSync,K=D.lstat,Q=D.readlink,Z=D.readdirSync,J=D.readdir,Y=require("child_process").spawn,X=require("os"),tt={};Object.defineProperty(tt,"__esModule",{value:!0});var et=M,nt=E;function rt(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var it=rt(X),ot=rt(et),st=rt(nt);const at=/\s+at.*(?:\(|\s)(.*)\)?/,ct=/^(?:(?:(?:node|(?:internal\/[\w/]*|.*node_modules\/(?:babel-polyfill|pirates)\/.*)?\w+)\.js:\d+:\d+)|native)/,ut=void 0===it.default.homedir?"":it.default.homedir();class lt extends Error{constructor(t){if(!Array.isArray(t))throw new TypeError("Expected input to be an Array, got "+typeof t);let e=(t=[...t].map((t=>t instanceof Error?t:null!==t&&"object"==typeof t?Object.assign(new Error(t.message),t):new Error(t)))).map((t=>{return"string"==typeof t.stack?(t=>t.replace(/\s+at .*aggregate-error\/index.js:\d+:\d+\)?/g,""))((e=t.stack,n=Object.assign({pretty:!1},n),e.replace(/\\/g,"/").split("\n").filter((t=>{const e=t.match(at);if(null===e||!e[1])return!0;const n=e[1];return!n.includes(".app/Contents/Resources/electron.asar")&&!n.includes(".app/Contents/Resources/default_app.asar")&&!ct.test(n)})).filter((t=>""!==t.trim())).map((t=>n.pretty?t.replace(at,((t,e)=>t.replace(e,e.replace(ut,"~")))):t)).join("\n"))):String(t);var e,n})).join("\n");e="\n"+((t,e=1,n)=>{if(n={indent:" ",includeEmptyLines:!1,...n},"string"!=typeof t)throw new TypeError(`Expected \`input\` to be a \`string\`, got \`${typeof t}\``);if("number"!=typeof e)throw new TypeError(`Expected \`count\` to be a \`number\`, got \`${typeof e}\``);if("string"!=typeof n.indent)throw new TypeError(`Expected \`options.indent\` to be a \`string\`, got \`${typeof n.indent}\``);if(0===e)return t;const r=n.includeEmptyLines?/^/gm:/^(?!\s*$)/gm;return t.replace(r,n.indent.repeat(e))})(e,4),super(e),this.name="AggregateError",Object.defineProperty(this,"_errors",{value:t})}*[Symbol.iterator](){for(const t of this._errors)yield t}}var ft=lt;const pt=(t,e,n)=>new Promise(((r,i)=>{if(n=Object.assign({concurrency:1/0},n),"function"!=typeof e)throw new TypeError("Mapper function is required");const{concurrency:o}=n;if(!("number"==typeof o&&o>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${o}\` (${typeof o})`);const s=[],a=t[Symbol.iterator]();let c=!1,u=!1,l=0,f=0;const p=()=>{if(c)return;const t=a.next(),n=f;if(f++,t.done)return u=!0,void(0===l&&r(s));l++,Promise.resolve(t.value).then((t=>e(t,n))).then((t=>{s[n]=t,l--,p()}),(t=>{c=!0,i(t)}))};for(let t=0;t<o&&(p(),!u);t++);}));var ht=pt,dt=pt;ht.default=dt;const gt=async(t,e,n)=>(await ht(t,((t,n)=>Promise.all([e(t,n),t])),n)).filter((t=>Boolean(t[0]))).map((t=>t[1]));var mt=gt,vt=gt;mt.default=vt;const yt="undefined"!=typeof atom,wt="undefined"!=typeof atom&&(atom.inDevMode()||atom.inSpecMode());
/*!
* escape-html
* Copyright(c) 2012-2013 TJ Holowaychuk
* Copyright(c) 2015 Andreas Lubbe
* Copyright(c) 2015 Tiancheng "Timothy" Gu
* MIT Licensed
*/
var bt=/["'&<>]/,_t=function(t){var e,n=""+t,r=bt.exec(n);if(!r)return n;var i="",o=0,s=0;for(o=r.index;o<n.length;o++){switch(n.charCodeAt(o)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#39;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}s!==o&&(i+=n.substring(s,o)),s=o+1,i+=e}return s!==o?i+n.substring(s,o):i};function xt(t,e,n){let r;const i=async function(t,e,n){const r=Y(t,e,n),i=new Promise(((t,e)=>{const i={stdout:r.stdout?[]:null,stderr:r.stderr?[]:null};r.on("error",e),r.stdout&&r.stdout.on("data",(function(t){i.stdout.push(t),n.handleStdout&&n.handleStdout(t)})),r.stderr&&r.stderr.on("data",(function(t){i.stderr.push(t),n.handleStderr&&n.handleStderr(t)})),r.on("close",(e=>{let r=null;null!=i.stdout&&(r=null===n.encoding||"buffer"===n.encoding?Buffer.concat(i.stdout):i.stdout.join(""));let o=null;null!=i.stderr&&(o=null===n.encoding||"buffer"===n.encoding?Buffer.concat(i.stderr):i.stderr.join("")),t({exitCode:e,stdout:r,stderr:o})}))}));return n.handleChildProcess(r),i}(t,e,{...n,handleChildProcess:function(t){r=t}});return i.kill=function(t){return r.kill(t)},i}async function St(t){if(yt){const e=await async function(t){var e;const n=atom.packages.getLoadedPackage(t.name);return null==n?null:null!==(e=n.metadata.version)&&void 0!==e?e:null}(t);if(e)return e}return async function(t){var e,n;const{directory:r}=t;if(null==r)return null;let i=null;try{i=JSON.parse(await ot.default.promises.readFile(st.default.join(r,"package.json"),"utf8"))}catch(t){return null}return null!==(e=null===(n=i)||void 0===n?void 0:n.version)&&void 0!==e?e:null}(t)}const kt=yt?async function(t){return atom.packages.resolvePackagePath(t)}:async function(t){var e;const n=st.default.join(null!==(e=process.env.ATOM_HOME)&&void 0!==e?e:st.default.join(it.default.homedir(),".atom"),"packages",t);try{return await ot.default.promises.access(n,ot.default.constants.R_OK),n}catch(t){return null}};function Et(t,e){if(!t)throw new Error(null!=e?e:"Invariant violation")}async function Ct(t){const e=await(yt?async function(t){const e=atom.packages.getLoadedPackage(t),n=e&&e.metadata["package-deps"];return Array.isArray(n)?n:[]}(t):async function(t){let e=null;try{e=await ot.default.promises.stat(t)}catch(t){}if(null==e||!e.isDirectory())throw new Error("[Package-Deps] Expected packageName to be a readable directory in Node.js invocation");let n=null;try{const e=await ot.default.promises.readFile(st.default.join(t,"package.json"),"utf8");n=JSON.parse(e)}catch(t){}const r=null==n||"object"!=typeof n?[]:n["package-deps"];return Array.isArray(r)?r:[]}(t));return wt&&(Et(Array.isArray(e),`Dependencies for ${t} are not a valid array`),e.forEach(((e,n)=>{if(Array.isArray(e))e.forEach(((e,r)=>{const i=`Dependency#${n}#${r} for ${t} is invalid`;Et("string"==typeof e.name&&e.name.length>0,i),Et(null==e.minimumVersion||"string"==typeof e.minimumVersion&&e.minimumVersion.length>0,i)})),Et(e.length>0,`Dependency#${n} for ${t} has no group items`);else{const r=`Dependency#${n} for ${t} is invalid`;Et("string"==typeof e.name&&e.name.length>0,r),Et(null==e.minimumVersion||"string"==typeof e.minimumVersion&&e.minimumVersion.length>0,r)}}))),e}async function Tt(t){if(null==t.directory)return!0;if(null==t.minimumVersion)return!1;const e=await St(t);return null==e||1===function(t,e){for(var n=t.split("."),r=e.split("."),i=0;i<3;i++){var o=Number(n[i]),s=Number(r[i]);if(o>s)return 1;if(s>o)return-1;if(!isNaN(o)&&isNaN(s))return 1;if(isNaN(o)&&!isNaN(s))return-1}return 0}(t.minimumVersion,e)}const At=new Set(["✓","done"]),Pt=/(?:Installing|Moving) (.*?) to .* (.*)/;let Ot=!0;const It=yt?function({packageName:t,dependencies:e}){const n=[],r=atom.notifications.addInfo(`Installing ${t} dependencies`,{detail:`Installing ${e.map((t=>t.name)).join(", ")}`,dismissable:!0}),i=document.createElement("progress");i.max=e.length,i.style.width="100%";try{var o;const t=atom.views.getView(r),e=null!==(o=null==t?void 0:t.element)&&void 0!==o?o:null;if(null==e)throw new Error("Unable to get notification element from view");const n=e.querySelector(".detail-content");if(null==n)throw new Error("Content detail container not found inside the notification");n.appendChild(i)}catch(t){console.error("[Package-Deps] Error during showing installation progress to user",t)}return{handleFailure:function({dependency:t,error:e}){var r;n.push(t.name),i.value+=1,console.error(`[Package-Deps] Unable to install ${t.name}, Error:`,null!==(r=null==e?void 0:e.stack)&&void 0!==r?r:e)},handleDependencyInstalled:function(t){i.value+=1},handleComplete:function(){r.dismiss(),n.length>0?atom.notifications.addWarning(`Failed to install ${t} dependencies`,{detail:`These packages were not installed, check your console\nfor more info.\n${n.join("\n")}`,dismissable:!0}):atom.notifications.addSuccess(`Installed ${t} dependencies`,{detail:`Installed ${e.map((t=>t.name)).join(", ")}`}),Promise.all(e.map((t=>n.includes(t.name)?null:atom.packages.activatePackage(t.name)))).catch((e=>{console.error(`[Package-Deps] Error activating installed packages for ${t}`,e)}))}}}:function({dependencies:t}){let e=!1;return console.log(`Installing dependencies:\n${t.map((t=>`  - ${t.name}`)).join("\n")}`),{handleFailure:function({dependency:t,error:n}){var r;e=!0,console.error(`Unable to install ${t.name}, Error:`,null!==(r=null==n?void 0:n.stack)&&void 0!==r?r:n)},handleDependencyInstalled:function(t){console.log("Successfully installed",t.name)},handleComplete:function(){console.log("Installation complete"),e&&(process.exitCode=1)}}},jt=yt?function({packageName:t,dependencies:e}){return new Promise((n=>{const r=e.filter((t=>!Array.isArray(t))),i=e.filter((t=>Array.isArray(t))),o=0===i.length,s=o?r.map((t=>t.name)).join(", "):"Something went wrong. Check your developer console",a=i.map((t=>t[0]));atom.packages.isPackageDisabled("notifications")&&console.warn(`Enable notifications to install dependencies for ${t}`);const c=atom.notifications.addInfo(`${t} needs to install dependencies`,{dismissable:!0,icon:"cloud-download",detail:s,description:`Install dependenc${1===e.length?"y":"ies"}?`,buttons:[{text:"Yes",onDidClick:()=>{n(o?[]:r.concat(a)),c.dismiss()}},{text:"No Thanks",onDidClick:()=>{c.dismiss()}},{text:"Never",onDidClick:()=>{!function(t){var e;if(!yt)return;const n=new Set(null!==(e=atom.config.get("atom-package-deps.ignored"))&&void 0!==e?e:[]);n.add(t),atom.config.set("atom-package-deps.ignored",Array.from(n))}(t),Ot&&(Ot=!1,atom.notifications.addInfo("How to reset package-deps memory",{dismissable:!0,description:"To modify the list of ignored files invoke 'Application: Open Your Config' and change the 'atom-package-deps' section"})),c.dismiss()}}]});if(c.onDidDismiss((()=>n([]))),!o)try{var u;const t=atom.views.getView(c),e=null!==(u=null==t?void 0:t.element)&&void 0!==u?u:null;if(null==e)throw new Error("Unable to get notification element from view");const n=e.querySelector(".detail-content");if(null==n)throw new Error("Content detail container not found inside the notification");if(n.innerHTML="",r.length>0){const t=document.createElement("div");t.innerHTML=`Packages without choices: <br /><ul><li>${r.map((t=>_t(t.name))).join("</li><li>")}</li></ul>`,n.appendChild(t)}const o=document.createElement("div");o.innerHTML="Packages with choices:",n.appendChild(o);const s=document.createElement("ul");i.forEach(((t,e)=>{const n=document.createElement("li"),r=document.createElement("select");r.innerHTML=t.map((t=>`<option>${_t(t.name)}</option>`)).join("\n"),r.addEventListener("change",(()=>{const n=t.find((t=>t.name===r.value));null!=n&&(a[e]=n)})),n.style.marginTop="5px",n.appendChild(r),s.appendChild(n)})),n.appendChild(s)}catch(t){console.error("[Package-Deps] Error during showing package choices to user",t)}}))}:async function({dependencies:t}){return t.map((t=>Array.isArray(t)?t[0]:t))};var Nt=async function(t){if(Et("string"==typeof t&&t.length>0,"[Package-Deps] Package name is required"),e=t,yt&&(null!==(n=atom.config.get("atom-package-deps.ignored"))&&void 0!==n?n:[]).includes(e))return;var e,n;const r=await Ct(t);if(0===r.length)return;const i=await Promise.all(r.map((async t=>Array.isArray(t)?Promise.all(t.map((async t=>({...t,directory:await kt(t.name)})))):{...t,directory:await kt(t.name)}))),o=await mt(i,(async function(t){return Array.isArray(t)?(await Promise.all(t.map((t=>Tt(t))))).every(Boolean):Tt(t)}));if(0===o.length)return;const s=await jt({packageName:t,dependencies:o});if(0===s.length)return;const a=It({packageName:t,dependencies:s});await(async(t,e,{concurrency:n=1/0,stopOnError:r=!0}={})=>new Promise(((i,o)=>{if("function"!=typeof e)throw new TypeError("Mapper function is required");if(!Number.isSafeInteger(n)&&n!==1/0||!(n>=1))throw new TypeError(`Expected \`concurrency\` to be an integer from 1 and up or \`Infinity\`, got \`${n}\` (${typeof n})`);const s=[],a=[],c=t[Symbol.iterator]();let u=!1,l=!1,f=0,p=0;const h=()=>{if(u)return;const t=c.next(),n=p;if(p++,t.done)return l=!0,void(0===f&&(r||0===a.length?i(s):o(new ft(a))));f++,(async()=>{try{const r=await t.value;s[n]=await e(r,n),f--,h()}catch(t){r?(u=!0,o(t)):(a.push(t),f--,h())}})()};for(let t=0;t<n&&(h(),!l);t++);})))(s,(async function(t){try{await async function(t){const e=yt?atom.packages.getApmPath():"apm",{stdout:n,stderr:r}=await xt(e,["install",t.name,"--production","--color","false"]),i=Pt.exec(n.trim());if(null!=i&&At.has(i[2]))return;const o=new Error(`Error installing dependency: ${t.name}`);throw o.stack=r.trim(),o}(t),a.handleDependencyInstalled(t)}catch(e){a.handleFailure({dependency:t,error:e})}}),{concurrency:2}),a.handleComplete()};tt.install=Nt;var Lt,Ft={};const Dt=Lt={onCopy:"copy",onCut:"cut",onPaste:"paste",onCompositionEnd:"compositionend",onCompositionStart:"compositionstart",onCompositionUpdate:"compositionupdate",onKeyDown:"keydown",onKeyPress:"keypress",onKeyUp:"keyup",onFocus:"focus",onBlur:"blur",onChange:"change",onInput:"input",onSubmit:"submit",onClick:"click",onContextMenu:"contextmenu",onDoubleClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragEnter:"dragenter",onDragExit:"dragexit",onDragLeave:"dragleave",onDragOver:"dragover",onDragStart:"dragstart",onDrop:"drop",onMouseDown:"mousedown",onMouseEnter:"mouseenter",onMouseLeave:"mouseleave",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onSelect:"select",onTouchCancel:"touchcancel",onTouchEnd:"touchend",onTouchMove:"touchmove",onTouchStart:"touchstart",onScroll:"scroll",onWheel:"wheel",onAbort:"abort",onCanPlay:"canplay",onCanPlayThrough:"canplaythrough",onDurationChange:"durationchange",onEmptied:"emptied",onEncrypted:"encrypted",onEnded:"ended",onError:"error",onLoadedData:"loadeddata",onLoadedMetadata:"loadedmetadata",onLoadStart:"loadstart",onPause:"pause",onPlay:"play",onPlaying:"playing",onProgress:"progress",onRateChange:"ratechange",onSeeked:"seeked",onSeeking:"seeking",onStalled:"stalled",onSuspend:"suspend",onTimeUpdate:"timeupdate",onVolumeChange:"volumechange",onWaiting:"waiting",onLoad:"load",onAnimationStart:"animationstart",onAnimationEnd:"animationend",onAnimationIteration:"animationiteration",onTransitionEnd:"transitionend"};var Mt={};const Rt=Mt=new Set(["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]);function $t(t,e,...n){let r=[];for(let t=0;t<n.length;){const e=n[t];switch(typeof e){case"string":case"number":n[t]={text:e},t++;break;case"object":Array.isArray(e)?n.splice(t,1,...e):e?(e.context||(r.push(e),e.ambiguous&&e.ambiguous.length&&(r=r.concat(e.ambiguous))),t++):n.splice(t,1);break;default:throw new Error(`Invalid child node: ${e}`)}}if(e){for(const t in e){const n=Dt[t];n&&(e.on||(e.on={}),e.on[n]=e[t])}e.class&&(e.className=e.class)}return{tag:t,props:e,children:n,ambiguous:r}}const Bt=["a","abbr","address","article","aside","audio","b","bdi","bdo","blockquote","body","button","canvas","caption","cite","code","colgroup","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","html","i","iframe","ins","kbd","label","legend","li","main","map","mark","menu","meter","nav","noscript","object","ol","optgroup","option","output","p","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","u","ul","var","video","area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];for(const t of Bt)$t[t]=(e,...n)=>$t(t,e,...n);for(const t of Rt)$t[t]=(e,...n)=>$t(t,e,...n);const zt=$t;var qt,Ht;const Ut=Lt;var Vt={};Vt=new Map([["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["className","class"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["panose1","panose-1"],["paintOrder","paint-order"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xHeight","x-height"]]);var Wt;const Gt=Wt=function(t,e,n,r){n!==e&&("function"==typeof e?e(null):e&&r[e]===t&&delete r[e],"function"==typeof n?n(t):n&&(r[n]=t))};function Kt(t,e,n,r,i){if(n)for(var o in n)"ref"!==o&&"on"!==o&&(o in Ut||i&&o in i||("dataset"===o?Kt(t.dataset,null,n&&n.dataset,null,null):"innerHTML"!==o&&e&&Mt.has(e.tag)?t.removeAttribute(Vt.get(o)||o):(t[o]="",delete t[o])));if(i)for(var o in i)if("ref"!==o&&"on"!==o&&!(o in Ut)){var s=n&&n[o],a=i[o];"dataset"===o?Qt(t.dataset,s,a,!1):"style"===o&&"string"!=typeof a?("string"==typeof s&&(t.style="",s=null),Qt(t.style,s,a,!0)):"attributes"===o?Zt(t,s,a):a!==s&&("innerHTML"!==o&&r&&Mt.has(r.tag)?t.setAttribute(Vt.get(o)||o,a):r&&"input"===r.tag&&"value"===o&&t[o]===a||(t[o]=a))}}function Qt(t,e,n,r){if(e)for(var i in e)n&&i in n||(r?t[i]="":delete t[i]);if(n)for(var i in n){const r=e&&e[i],o=n[i];o!==r&&(t[i]=o)}}function Zt(t,e,n){if(e)for(var r in e)n&&r in n||t.removeAttribute(r);if(n)for(var r in n){const i=e&&e[r],o=n[r];o!==i&&t.setAttribute(r,o)}}const Jt=Ht=function(t,e,n,r){const i=e&&e.props,o=n.props;let s,a;r&&(s=r.refs,a=r.listenerContext),Kt(t,e,i,n,o),s&&Gt(t,i&&i.ref,o&&o.ref,s),function(t,e,n,r){const i=e&&e.props&&e.props.on,o=n.props&&n.props.on;for(const n in i)if(!o||!(n in o)){let r;r=e&&e.boundListeners&&e.boundListeners[n]?e.boundListeners[n]:i[n],t.removeEventListener(n,r)}for(const s in o){const a=i&&i[s],c=o[s];if(c!==a){if(a){let n;n=e&&e.boundListeners&&e.boundListeners[s]?e.boundListeners[s]:a,t.removeEventListener(s,n)}if(c){let e;r?(e=c.bind(r),n.boundListeners||(n.boundListeners={}),n.boundListeners[s]=e):e=c,t.addEventListener(s,e)}}}}(t,e,n,a)};function Yt(t,e){let n;if(null!=t.text)n=document.createTextNode(t.text);else{const{tag:r,children:i}=t;let{props:o,context:s}=t;if(s&&(e={refs:s.refs,listenerContext:s}),"function"==typeof r){let s;o&&o.ref&&(s=o.ref);const a=new r(o||{},i);t.component=a,n=a.element,"function"==typeof s?s(a):e&&e.refs&&s&&(e.refs[s]=a)}else Mt.has(r)?(n=document.createElementNS("http://www.w3.org/2000/svg",r),i&&Xt(n,i,e),o&&Jt(n,null,t,e)):(n=document.createElement(r),i&&Xt(n,i,e),o&&Jt(n,null,t,e))}return t.domNode=n,n}function Xt(t,e,n){for(let r=0;r<e.length;r++)t.appendChild(Yt(e[r],n))}const te=qt=Yt;var ee;const ne=qt;const re=qt,ie=Ht,oe=Wt;function se(t,e,n){const r=t.domNode;if(e===t)return r;if(ue(t,e)){let i;return null!=e.text?(r.nodeValue=e.text,i=r):"function"==typeof e.tag?i=function(t,e,n){const{component:r,props:i}=t;let{props:o,children:s}=e;e.component=r;const a=n&&n.refs;a&&oe(r,i&&i.ref,o&&o.ref,a);return r.update(o||{},s),r.element}(t,e,n):(!function(t,e,n,r){var i,o=0,s=e.length-1,a=e[0],c=e[s],u=0,l=n.length-1,f=n[0],p=n[l];for(;o<=s&&u<=l;)if(a)if(c)if(ue(a,f))se(a,f,r),a=e[++o],f=n[++u];else if(ue(c,p))se(c,p,r),c=e[--s],p=n[--l];else if(ue(a,p))se(a,p,r),t.insertBefore(a.domNode,c.domNode.nextSibling),a=e[++o],p=n[--l];else if(ue(c,f))se(c,f,r),t.insertBefore(c.domNode,a.domNode),c=e[--s],f=n[++u];else{i||(ae.length>0?(i=ae.pop()).clear():i=new Map,fe(i,e,o,s));var h=le(f),d=h?i.get(h):null;if(null==d)t.insertBefore(re(f,r),a.domNode),f=n[++u];else{var g=e[d];se(g,f,r),e[d]=void 0,t.insertBefore(g.domNode,a.domNode),f=n[++u]}}else c=e[--s];else a=e[++o];if(o>s){var m=n[l+1]?n[l+1].domNode:null;for(let e=u;e<=l;e++)t.insertBefore(re(n[e],r),m)}else if(u>l)for(let t=o;t<=s;t++){var v=e[t];v&&ce(v,r&&r.refs)}i&&ae.push(i)}(r,t.children,e.children,n),ie(r,t,e,n),i=r),e.domNode=i,i!==r&&r.parentNode&&r.parentNode.replaceChild(i,r),i}{const i=r.parentNode,o=r.nextSibling;ce(t,n&&n.refs);const s=re(e,n);return i&&i.insertBefore(s,o),e.domNode=s,s}}let ae=[new Map,new Map,new Map,new Map];function ce(t,e,n=!0){const{domNode:r,props:i,children:o,component:s}=t,a=i&&i.ref;if(s)"function"==typeof a?a(null):e&&a&&e[a]===s&&delete e[a],s.destroy&&s.destroy();else if("function"==typeof a?a(null):e&&a&&e[a]===r&&delete e[a],o)for(let t=0;t<o.length;t++)ce(o[t],e,!1);n&&r.remove()}function ue(t,e){return le(t)===le(e)&&t.tag===e.tag}function le(t){return t.props?t.props.key:void 0}function fe(t,e,n,r){for(let i=n;i<=r;i++){const n=le(e[i]);n&&t.set(n,i)}return t}const pe=se;const he=class{constructor(){this.updateRequests=[],this.readRequests=[],this.pendingAnimationFrame=null,this.performUpdates=this.performUpdates.bind(this),this.performingUpdates=!1}updateDocument(t){this.updateRequests.push(t),this.pendingAnimationFrame||(this.pendingAnimationFrame=window.requestAnimationFrame(this.performUpdates))}readDocument(t){this.readRequests.push(t),this.pendingAnimationFrame||(this.pendingAnimationFrame=window.requestAnimationFrame(this.performUpdates))}getNextUpdatePromise(){return this.nextUpdatePromise||(this.nextUpdatePromise=new Promise((t=>{this.resolveNextUpdatePromise=t}))),this.nextUpdatePromise}performUpdates(){for(;this.updateRequests.length>0;)this.updateRequests.shift()();for(this.pendingAnimationFrame=null;this.readRequests.length>0;)this.readRequests.shift()();if(this.nextUpdatePromise){let t=this.resolveNextUpdatePromise;this.nextUpdatePromise=null,this.resolveNextUpdatePromise=null,t()}}};let de=null;var ge=function(){return de||(de=new he),de};const me=new WeakSet;let ve=0,ye=0;function we(t){return null!=t&&!1!==t}function be(t,e){e.context=t,e.ambiguous&&(e.ambiguous.forEach((e=>{e.context=t})),delete e.ambiguous)}function _e(t,e=!0){if(!we(t.virtualNode))throw new Error(`${t.constructor?t.constructor.name+" instance":t} is not associated with a valid virtualNode. Perhaps this component was never initialized?`);if(null==t.element)throw new Error(`${t.constructor?t.constructor.name+" instance":t} is not associated with a DOM element. Perhaps this component was never initialized?`);let n=t.render();if(!we(n)){const e=t.constructor&&t.constructor.name?" in "+t.constructor.name:"";throw new Error("invalid falsy value "+n+" returned from render()"+e)}be(t,n),ve++;let r=t.virtualNode,i=t.element,o=pe(r,n,{refs:t.refs,listenerContext:t});if(t.virtualNode=n,o!==i&&!e)throw new Error("The root node type changed on update, but the update was performed with the replaceNode option set to false");t.element=o,"function"==typeof t.writeAfterUpdate&&t.writeAfterUpdate(),"function"==typeof t.readAfterUpdate&&ge().readDocument((function(){t.readAfterUpdate()})),ve--}function xe(t,e=!0){ye++,Se(t.virtualNode),1===ye&&e&&t.element.remove(),ye--}function Se(t){t.component&&"function"==typeof t.component.destroy?t.component.destroy():t.children&&t.children.forEach(Se)}var ke=e(Ft={dom:zt,render:te,initialize:(ee={initialize:function(t){if("function"!=typeof t.update)throw new Error("Etch components must implement `update(props, children)`.");let e=t.render();if(!we(e)){let n=t.constructor&&t.constructor.name?" in "+t.constructor.name:"";throw new Error("invalid falsy value "+e+" returned from render()"+n)}be(t,e),t.refs={},t.virtualNode=e,t.element=ne(t.virtualNode,{refs:t.refs,listenerContext:t})},update:function(t,e=!0){if(ve>0)return _e(t,e),Promise.resolve();let n=ge();return me.has(t)||(me.add(t),n.updateDocument((function(){me.delete(t),_e(t,e)}))),n.getNextUpdatePromise()},updateSync:_e,destroy:function(t,e=!0){if(ve>0||ye>0)return xe(t,e),Promise.resolve();let n=ge();return n.updateDocument((function(){xe(t,e)})),n.getNextUpdatePromise()},destroySync:xe}).initialize,update:ee.update,updateSync:ee.updateSync,destroy:ee.destroy,destroySync:ee.destroySync,setScheduler:function(t){de=t},getScheduler:ge});function Ee(t){void 0!==t&&("function"==typeof t.catch?t.catch((t=>{atom.notifications.addFatalError(`Atom-Typescript error: ${t.message}`,{detail:t.toString(),stack:t.stack,dismissable:!0})})):atom.notifications.addFatalError("Atom-Typescript: non-promise passed to handlePromise. Please report this.",{stack:(new Error).stack,dismissable:!0}))}var Ce,Te=function(){var e=this,n={exports:this};return function(){var r,i="Expected a function",o="__lodash_hash_undefined__",s="__lodash_placeholder__",a=16,c=32,u=64,l=128,f=256,p=1/0,h=9007199254740991,d=NaN,g=4294967295,m=[["ary",l],["bind",1],["bindKey",2],["curry",8],["curryRight",a],["flip",512],["partial",c],["partialRight",u],["rearg",f]],v="[object Arguments]",y="[object Array]",w="[object Boolean]",b="[object Date]",_="[object Error]",x="[object Function]",S="[object GeneratorFunction]",k="[object Map]",E="[object Number]",C="[object Object]",T="[object Promise]",A="[object RegExp]",P="[object Set]",O="[object String]",I="[object Symbol]",j="[object WeakMap]",N="[object ArrayBuffer]",L="[object DataView]",F="[object Float32Array]",D="[object Float64Array]",M="[object Int8Array]",R="[object Int16Array]",$="[object Int32Array]",B="[object Uint8Array]",z="[object Uint8ClampedArray]",q="[object Uint16Array]",H="[object Uint32Array]",U=/\b__p \+= '';/g,V=/\b(__p \+=) '' \+/g,W=/(__e\(.*?\)|\b__t\)) \+\n'';/g,G=/&(?:amp|lt|gt|quot|#39);/g,K=/[&<>"']/g,Q=RegExp(G.source),Z=RegExp(K.source),J=/<%-([\s\S]+?)%>/g,Y=/<%([\s\S]+?)%>/g,X=/<%=([\s\S]+?)%>/g,tt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,et=/^\w*$/,nt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rt=/[\\^$.*+?()[\]{}|]/g,it=RegExp(rt.source),ot=/^\s+/,st=/\s/,at=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ct=/\{\n\/\* \[wrapped with (.+)\] \*/,ut=/,? & /,lt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ft=/[()=,{}\[\]\/\s]/,pt=/\\(\\)?/g,ht=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,dt=/\w*$/,gt=/^[-+]0x[0-9a-f]+$/i,mt=/^0b[01]+$/i,vt=/^\[object .+?Constructor\]$/,yt=/^0o[0-7]+$/i,wt=/^(?:0|[1-9]\d*)$/,bt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,_t=/($^)/,xt=/['\n\r\u2028\u2029\\]/g,St="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",kt="\\u2700-\\u27bf",Et="a-z\\xdf-\\xf6\\xf8-\\xff",Ct="A-Z\\xc0-\\xd6\\xd8-\\xde",Tt="\\ufe0e\\ufe0f",At="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Pt="['’]",Ot="[\\ud800-\\udfff]",It="["+At+"]",jt="["+St+"]",Nt="\\d+",Lt="[\\u2700-\\u27bf]",Ft="["+Et+"]",Dt="[^\\ud800-\\udfff"+At+Nt+kt+Et+Ct+"]",Mt="\\ud83c[\\udffb-\\udfff]",Rt="[^\\ud800-\\udfff]",$t="(?:\\ud83c[\\udde6-\\uddff]){2}",Bt="[\\ud800-\\udbff][\\udc00-\\udfff]",zt="["+Ct+"]",qt="(?:"+Ft+"|"+Dt+")",Ht="(?:"+zt+"|"+Dt+")",Ut="(?:['’](?:d|ll|m|re|s|t|ve))?",Vt="(?:['’](?:D|LL|M|RE|S|T|VE))?",Wt="(?:"+jt+"|"+Mt+")"+"?",Gt="[\\ufe0e\\ufe0f]?",Kt=Gt+Wt+("(?:\\u200d(?:"+[Rt,$t,Bt].join("|")+")"+Gt+Wt+")*"),Qt="(?:"+[Lt,$t,Bt].join("|")+")"+Kt,Zt="(?:"+[Rt+jt+"?",jt,$t,Bt,Ot].join("|")+")",Jt=RegExp(Pt,"g"),Yt=RegExp(jt,"g"),Xt=RegExp(Mt+"(?="+Mt+")|"+Zt+Kt,"g"),te=RegExp([zt+"?"+Ft+"+"+Ut+"(?="+[It,zt,"$"].join("|")+")",Ht+"+"+Vt+"(?="+[It,zt+qt,"$"].join("|")+")",zt+"?"+qt+"+"+Ut,zt+"+"+Vt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Nt,Qt].join("|"),"g"),ee=RegExp("[\\u200d\\ud800-\\udfff"+St+Tt+"]"),ne=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,re=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ie=-1,oe={};oe[F]=oe[D]=oe[M]=oe[R]=oe[$]=oe[B]=oe[z]=oe[q]=oe[H]=!0,oe[v]=oe[y]=oe[N]=oe[w]=oe[L]=oe[b]=oe[_]=oe[x]=oe[k]=oe[E]=oe[C]=oe[A]=oe[P]=oe[O]=oe[j]=!1;var se={};se[v]=se[y]=se[N]=se[L]=se[w]=se[b]=se[F]=se[D]=se[M]=se[R]=se[$]=se[k]=se[E]=se[C]=se[A]=se[P]=se[O]=se[I]=se[B]=se[z]=se[q]=se[H]=!0,se[_]=se[x]=se[j]=!1;var ae={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ce=parseFloat,ue=parseInt,le="object"==typeof t&&t&&t.Object===Object&&t,fe="object"==typeof self&&self&&self.Object===Object&&self,pe=le||fe||Function("return this")(),he="object"==typeof e&&e&&!e.nodeType&&e,de=he&&"object"==typeof n&&n&&!n.nodeType&&n,ge=de&&de.exports===he,me=ge&&le.process,ve=function(){try{var t=de&&de.require&&de.require("util").types;return t||me&&me.binding&&me.binding("util")}catch(t){}}(),ye=ve&&ve.isArrayBuffer,we=ve&&ve.isDate,be=ve&&ve.isMap,_e=ve&&ve.isRegExp,xe=ve&&ve.isSet,Se=ve&&ve.isTypedArray;function ke(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Ee(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var s=t[i];e(r,s,n(s),t)}return r}function Ce(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function Te(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Ae(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Pe(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}function Oe(t,e){return!!(null==t?0:t.length)&&Be(t,e,0)>-1}function Ie(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function je(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function Ne(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function Le(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function Fe(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function De(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var Me=Ue("length");function Re(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function $e(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function Be(t,e,n){return e==e?function(t,e,n){var r=n-1,i=t.length;for(;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):$e(t,qe,n)}function ze(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function qe(t){return t!=t}function He(t,e){var n=null==t?0:t.length;return n?Ge(t,e)/n:d}function Ue(t){return function(e){return null==e?r:e[t]}}function Ve(t){return function(e){return null==t?r:t[e]}}function We(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function Ge(t,e){for(var n,i=-1,o=t.length;++i<o;){var s=e(t[i]);s!==r&&(n=n===r?s:n+s)}return n}function Ke(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Qe(t){return t?t.slice(0,dn(t)+1).replace(ot,""):t}function Ze(t){return function(e){return t(e)}}function Je(t,e){return je(e,(function(e){return t[e]}))}function Ye(t,e){return t.has(e)}function Xe(t,e){for(var n=-1,r=t.length;++n<r&&Be(e,t[n],0)>-1;);return n}function tn(t,e){for(var n=t.length;n--&&Be(e,t[n],0)>-1;);return n}function en(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}var nn=Ve({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),rn=Ve({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function on(t){return"\\"+ae[t]}function sn(t){return ee.test(t)}function an(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function cn(t,e){return function(n){return t(e(n))}}function un(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];a!==e&&a!==s||(t[n]=s,o[i++]=n)}return o}function ln(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function fn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function pn(t){return sn(t)?function(t){var e=Xt.lastIndex=0;for(;Xt.test(t);)++e;return e}(t):Me(t)}function hn(t){return sn(t)?function(t){return t.match(Xt)||[]}(t):function(t){return t.split("")}(t)}function dn(t){for(var e=t.length;e--&&st.test(t.charAt(e)););return e}var gn=Ve({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var mn=function t(e){var n,st=(e=null==e?pe:mn.defaults(pe.Object(),e,mn.pick(pe,re))).Array,St=e.Date,kt=e.Error,Et=e.Function,Ct=e.Math,Tt=e.Object,At=e.RegExp,Pt=e.String,Ot=e.TypeError,It=st.prototype,jt=Et.prototype,Nt=Tt.prototype,Lt=e["__core-js_shared__"],Ft=jt.toString,Dt=Nt.hasOwnProperty,Mt=0,Rt=(n=/[^.]+$/.exec(Lt&&Lt.keys&&Lt.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",$t=Nt.toString,Bt=Ft.call(Tt),zt=pe._,qt=At("^"+Ft.call(Dt).replace(rt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ht=ge?e.Buffer:r,Ut=e.Symbol,Vt=e.Uint8Array,Wt=Ht?Ht.allocUnsafe:r,Gt=cn(Tt.getPrototypeOf,Tt),Kt=Tt.create,Qt=Nt.propertyIsEnumerable,Zt=It.splice,Xt=Ut?Ut.isConcatSpreadable:r,ee=Ut?Ut.iterator:r,ae=Ut?Ut.toStringTag:r,le=function(){try{var t=ho(Tt,"defineProperty");return t({},"",{}),t}catch(t){}}(),fe=e.clearTimeout!==pe.clearTimeout&&e.clearTimeout,he=St&&St.now!==pe.Date.now&&St.now,de=e.setTimeout!==pe.setTimeout&&e.setTimeout,me=Ct.ceil,ve=Ct.floor,Me=Tt.getOwnPropertySymbols,Ve=Ht?Ht.isBuffer:r,vn=e.isFinite,yn=It.join,wn=cn(Tt.keys,Tt),bn=Ct.max,_n=Ct.min,xn=St.now,Sn=e.parseInt,kn=Ct.random,En=It.reverse,Cn=ho(e,"DataView"),Tn=ho(e,"Map"),An=ho(e,"Promise"),Pn=ho(e,"Set"),On=ho(e,"WeakMap"),In=ho(Tt,"create"),jn=On&&new On,Nn={},Ln=zo(Cn),Fn=zo(Tn),Dn=zo(An),Mn=zo(Pn),Rn=zo(On),$n=Ut?Ut.prototype:r,Bn=$n?$n.valueOf:r,zn=$n?$n.toString:r;function qn(t){if(ia(t)&&!Gs(t)&&!(t instanceof Wn)){if(t instanceof Vn)return t;if(Dt.call(t,"__wrapped__"))return qo(t)}return new Vn(t)}var Hn=function(){function t(){}return function(e){if(!ra(e))return{};if(Kt)return Kt(e);t.prototype=e;var n=new t;return t.prototype=r,n}}();function Un(){}function Vn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=r}function Wn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=g,this.__views__=[]}function Gn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Kn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Qn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Zn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Qn;++e<n;)this.add(t[e])}function Jn(t){var e=this.__data__=new Kn(t);this.size=e.size}function Yn(t,e){var n=Gs(t),r=!n&&Ws(t),i=!n&&!r&&Js(t),o=!n&&!r&&!i&&pa(t),s=n||r||i||o,a=s?Ke(t.length,Pt):[],c=a.length;for(var u in t)!e&&!Dt.call(t,u)||s&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||_o(u,c))||a.push(u);return a}function Xn(t){var e=t.length;return e?t[Zr(0,e-1)]:r}function tr(t,e){return Ro(Ii(t),ur(e,0,t.length))}function er(t){return Ro(Ii(t))}function nr(t,e,n){(n!==r&&!Hs(t[e],n)||n===r&&!(e in t))&&ar(t,e,n)}function rr(t,e,n){var i=t[e];Dt.call(t,e)&&Hs(i,n)&&(n!==r||e in t)||ar(t,e,n)}function ir(t,e){for(var n=t.length;n--;)if(Hs(t[n][0],e))return n;return-1}function or(t,e,n,r){return dr(t,(function(t,i,o){e(r,t,n(t),o)})),r}function sr(t,e){return t&&ji(e,La(e),t)}function ar(t,e,n){"__proto__"==e&&le?le(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function cr(t,e){for(var n=-1,i=e.length,o=st(i),s=null==t;++n<i;)o[n]=s?r:Pa(t,e[n]);return o}function ur(t,e,n){return t==t&&(n!==r&&(t=t<=n?t:n),e!==r&&(t=t>=e?t:e)),t}function lr(t,e,n,i,o,s){var a,c=1&e,u=2&e,l=4&e;if(n&&(a=o?n(t,i,o,s):n(t)),a!==r)return a;if(!ra(t))return t;var f=Gs(t);if(f){if(a=function(t){var e=t.length,n=new t.constructor(e);e&&"string"==typeof t[0]&&Dt.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!c)return Ii(t,a)}else{var p=vo(t),h=p==x||p==S;if(Js(t))return Ei(t,c);if(p==C||p==v||h&&!o){if(a=u||h?{}:wo(t),!c)return u?function(t,e){return ji(t,mo(t),e)}(t,function(t,e){return t&&ji(e,Fa(e),t)}(a,t)):function(t,e){return ji(t,go(t),e)}(t,sr(a,t))}else{if(!se[p])return o?t:{};a=function(t,e,n){var r=t.constructor;switch(e){case N:return Ci(t);case w:case b:return new r(+t);case L:return function(t,e){var n=e?Ci(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case F:case D:case M:case R:case $:case B:case z:case q:case H:return Ti(t,n);case k:return new r;case E:case O:return new r(t);case A:return function(t){var e=new t.constructor(t.source,dt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case P:return new r;case I:return i=t,Bn?Tt(Bn.call(i)):{}}var i}(t,p,c)}}s||(s=new Jn);var d=s.get(t);if(d)return d;s.set(t,a),ua(t)?t.forEach((function(r){a.add(lr(r,e,n,r,t,s))})):oa(t)&&t.forEach((function(r,i){a.set(i,lr(r,e,n,i,t,s))}));var g=f?r:(l?u?so:oo:u?Fa:La)(t);return Ce(g||t,(function(r,i){g&&(r=t[i=r]),rr(a,i,lr(r,e,n,i,t,s))})),a}function fr(t,e,n){var i=n.length;if(null==t)return!i;for(t=Tt(t);i--;){var o=n[i],s=e[o],a=t[o];if(a===r&&!(o in t)||!s(a))return!1}return!0}function pr(t,e,n){if("function"!=typeof t)throw new Ot(i);return Lo((function(){t.apply(r,n)}),e)}function hr(t,e,n,r){var i=-1,o=Oe,s=!0,a=t.length,c=[],u=e.length;if(!a)return c;n&&(e=je(e,Ze(n))),r?(o=Ie,s=!1):e.length>=200&&(o=Ye,s=!1,e=new Zn(e));t:for(;++i<a;){var l=t[i],f=null==n?l:n(l);if(l=r||0!==l?l:0,s&&f==f){for(var p=u;p--;)if(e[p]===f)continue t;c.push(l)}else o(e,f,r)||c.push(l)}return c}qn.templateSettings={escape:J,evaluate:Y,interpolate:X,variable:"",imports:{_:qn}},qn.prototype=Un.prototype,qn.prototype.constructor=qn,Vn.prototype=Hn(Un.prototype),Vn.prototype.constructor=Vn,Wn.prototype=Hn(Un.prototype),Wn.prototype.constructor=Wn,Gn.prototype.clear=function(){this.__data__=In?In(null):{},this.size=0},Gn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Gn.prototype.get=function(t){var e=this.__data__;if(In){var n=e[t];return n===o?r:n}return Dt.call(e,t)?e[t]:r},Gn.prototype.has=function(t){var e=this.__data__;return In?e[t]!==r:Dt.call(e,t)},Gn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=In&&e===r?o:e,this},Kn.prototype.clear=function(){this.__data__=[],this.size=0},Kn.prototype.delete=function(t){var e=this.__data__,n=ir(e,t);return!(n<0)&&(n==e.length-1?e.pop():Zt.call(e,n,1),--this.size,!0)},Kn.prototype.get=function(t){var e=this.__data__,n=ir(e,t);return n<0?r:e[n][1]},Kn.prototype.has=function(t){return ir(this.__data__,t)>-1},Kn.prototype.set=function(t,e){var n=this.__data__,r=ir(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Qn.prototype.clear=function(){this.size=0,this.__data__={hash:new Gn,map:new(Tn||Kn),string:new Gn}},Qn.prototype.delete=function(t){var e=fo(this,t).delete(t);return this.size-=e?1:0,e},Qn.prototype.get=function(t){return fo(this,t).get(t)},Qn.prototype.has=function(t){return fo(this,t).has(t)},Qn.prototype.set=function(t,e){var n=fo(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Zn.prototype.add=Zn.prototype.push=function(t){return this.__data__.set(t,o),this},Zn.prototype.has=function(t){return this.__data__.has(t)},Jn.prototype.clear=function(){this.__data__=new Kn,this.size=0},Jn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Jn.prototype.get=function(t){return this.__data__.get(t)},Jn.prototype.has=function(t){return this.__data__.has(t)},Jn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Kn){var r=n.__data__;if(!Tn||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Qn(r)}return n.set(t,e),this.size=n.size,this};var dr=Fi(xr),gr=Fi(Sr,!0);function mr(t,e){var n=!0;return dr(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function vr(t,e,n){for(var i=-1,o=t.length;++i<o;){var s=t[i],a=e(s);if(null!=a&&(c===r?a==a&&!fa(a):n(a,c)))var c=a,u=s}return u}function yr(t,e){var n=[];return dr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function wr(t,e,n,r,i){var o=-1,s=t.length;for(n||(n=bo),i||(i=[]);++o<s;){var a=t[o];e>0&&n(a)?e>1?wr(a,e-1,n,r,i):Ne(i,a):r||(i[i.length]=a)}return i}var br=Di(),_r=Di(!0);function xr(t,e){return t&&br(t,e,La)}function Sr(t,e){return t&&_r(t,e,La)}function kr(t,e){return Pe(e,(function(e){return ta(t[e])}))}function Er(t,e){for(var n=0,i=(e=_i(e,t)).length;null!=t&&n<i;)t=t[Bo(e[n++])];return n&&n==i?t:r}function Cr(t,e,n){var r=e(t);return Gs(t)?r:Ne(r,n(t))}function Tr(t){return null==t?t===r?"[object Undefined]":"[object Null]":ae&&ae in Tt(t)?function(t){var e=Dt.call(t,ae),n=t[ae];try{t[ae]=r;var i=!0}catch(t){}var o=$t.call(t);i&&(e?t[ae]=n:delete t[ae]);return o}(t):function(t){return $t.call(t)}(t)}function Ar(t,e){return t>e}function Pr(t,e){return null!=t&&Dt.call(t,e)}function Or(t,e){return null!=t&&e in Tt(t)}function Ir(t,e,n){for(var i=n?Ie:Oe,o=t[0].length,s=t.length,a=s,c=st(s),u=1/0,l=[];a--;){var f=t[a];a&&e&&(f=je(f,Ze(e))),u=_n(f.length,u),c[a]=!n&&(e||o>=120&&f.length>=120)?new Zn(a&&f):r}f=t[0];var p=-1,h=c[0];t:for(;++p<o&&l.length<u;){var d=f[p],g=e?e(d):d;if(d=n||0!==d?d:0,!(h?Ye(h,g):i(l,g,n))){for(a=s;--a;){var m=c[a];if(!(m?Ye(m,g):i(t[a],g,n)))continue t}h&&h.push(g),l.push(d)}}return l}function jr(t,e,n){var i=null==(t=Oo(t,e=_i(e,t)))?t:t[Bo(Xo(e))];return null==i?r:ke(i,t,n)}function Nr(t){return ia(t)&&Tr(t)==v}function Lr(t,e,n,i,o){return t===e||(null==t||null==e||!ia(t)&&!ia(e)?t!=t&&e!=e:function(t,e,n,i,o,s){var a=Gs(t),c=Gs(e),u=a?y:vo(t),l=c?y:vo(e),f=(u=u==v?C:u)==C,p=(l=l==v?C:l)==C,h=u==l;if(h&&Js(t)){if(!Js(e))return!1;a=!0,f=!1}if(h&&!f)return s||(s=new Jn),a||pa(t)?ro(t,e,n,i,o,s):function(t,e,n,r,i,o,s){switch(n){case L:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case N:return!(t.byteLength!=e.byteLength||!o(new Vt(t),new Vt(e)));case w:case b:case E:return Hs(+t,+e);case _:return t.name==e.name&&t.message==e.message;case A:case O:return t==e+"";case k:var a=an;case P:var c=1&r;if(a||(a=ln),t.size!=e.size&&!c)return!1;var u=s.get(t);if(u)return u==e;r|=2,s.set(t,e);var l=ro(a(t),a(e),r,i,o,s);return s.delete(t),l;case I:if(Bn)return Bn.call(t)==Bn.call(e)}return!1}(t,e,u,n,i,o,s);if(!(1&n)){var d=f&&Dt.call(t,"__wrapped__"),g=p&&Dt.call(e,"__wrapped__");if(d||g){var m=d?t.value():t,x=g?e.value():e;return s||(s=new Jn),o(m,x,n,i,s)}}if(!h)return!1;return s||(s=new Jn),function(t,e,n,i,o,s){var a=1&n,c=oo(t),u=c.length,l=oo(e).length;if(u!=l&&!a)return!1;var f=u;for(;f--;){var p=c[f];if(!(a?p in e:Dt.call(e,p)))return!1}var h=s.get(t),d=s.get(e);if(h&&d)return h==e&&d==t;var g=!0;s.set(t,e),s.set(e,t);var m=a;for(;++f<u;){var v=t[p=c[f]],y=e[p];if(i)var w=a?i(y,v,p,e,t,s):i(v,y,p,t,e,s);if(!(w===r?v===y||o(v,y,n,i,s):w)){g=!1;break}m||(m="constructor"==p)}if(g&&!m){var b=t.constructor,_=e.constructor;b==_||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof _&&_ instanceof _||(g=!1)}return s.delete(t),s.delete(e),g}(t,e,n,i,o,s)}(t,e,n,i,Lr,o))}function Fr(t,e,n,i){var o=n.length,s=o,a=!i;if(null==t)return!s;for(t=Tt(t);o--;){var c=n[o];if(a&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++o<s;){var u=(c=n[o])[0],l=t[u],f=c[1];if(a&&c[2]){if(l===r&&!(u in t))return!1}else{var p=new Jn;if(i)var h=i(l,f,u,t,e,p);if(!(h===r?Lr(f,l,3,i,p):h))return!1}}return!0}function Dr(t){return!(!ra(t)||(e=t,Rt&&Rt in e))&&(ta(t)?qt:vt).test(zo(t));var e}function Mr(t){return"function"==typeof t?t:null==t?sc:"object"==typeof t?Gs(t)?Hr(t[0],t[1]):qr(t):gc(t)}function Rr(t){if(!Co(t))return wn(t);var e=[];for(var n in Tt(t))Dt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function $r(t){if(!ra(t))return function(t){var e=[];if(null!=t)for(var n in Tt(t))e.push(n);return e}(t);var e=Co(t),n=[];for(var r in t)("constructor"!=r||!e&&Dt.call(t,r))&&n.push(r);return n}function Br(t,e){return t<e}function zr(t,e){var n=-1,r=Qs(t)?st(t.length):[];return dr(t,(function(t,i,o){r[++n]=e(t,i,o)})),r}function qr(t){var e=po(t);return 1==e.length&&e[0][2]?Ao(e[0][0],e[0][1]):function(n){return n===t||Fr(n,t,e)}}function Hr(t,e){return So(t)&&To(e)?Ao(Bo(t),e):function(n){var i=Pa(n,t);return i===r&&i===e?Oa(n,t):Lr(e,i,3)}}function Ur(t,e,n,i,o){t!==e&&br(e,(function(s,a){if(o||(o=new Jn),ra(s))!function(t,e,n,i,o,s,a){var c=jo(t,n),u=jo(e,n),l=a.get(u);if(l)return void nr(t,n,l);var f=s?s(c,u,n+"",t,e,a):r,p=f===r;if(p){var h=Gs(u),d=!h&&Js(u),g=!h&&!d&&pa(u);f=u,h||d||g?Gs(c)?f=c:Zs(c)?f=Ii(c):d?(p=!1,f=Ei(u,!0)):g?(p=!1,f=Ti(u,!0)):f=[]:aa(u)||Ws(u)?(f=c,Ws(c)?f=ba(c):ra(c)&&!ta(c)||(f=wo(u))):p=!1}p&&(a.set(u,f),o(f,u,i,s,a),a.delete(u));nr(t,n,f)}(t,e,a,n,Ur,i,o);else{var c=i?i(jo(t,a),s,a+"",t,e,o):r;c===r&&(c=s),nr(t,a,c)}}),Fa)}function Vr(t,e){var n=t.length;if(n)return _o(e+=e<0?n:0,n)?t[e]:r}function Wr(t,e,n){e=e.length?je(e,(function(t){return Gs(t)?function(e){return Er(e,1===t.length?t[0]:t)}:t})):[sc];var r=-1;return e=je(e,Ze(lo())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(zr(t,(function(t,n,i){return{criteria:je(e,(function(e){return e(t)})),index:++r,value:t}})),(function(t,e){return function(t,e,n){var r=-1,i=t.criteria,o=e.criteria,s=i.length,a=n.length;for(;++r<s;){var c=Ai(i[r],o[r]);if(c)return r>=a?c:c*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}))}function Gr(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var s=e[r],a=Er(t,s);n(a,s)&&ei(o,_i(s,t),a)}return o}function Kr(t,e,n,r){var i=r?ze:Be,o=-1,s=e.length,a=t;for(t===e&&(e=Ii(e)),n&&(a=je(t,Ze(n)));++o<s;)for(var c=0,u=e[o],l=n?n(u):u;(c=i(a,l,c,r))>-1;)a!==t&&Zt.call(a,c,1),Zt.call(t,c,1);return t}function Qr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;_o(i)?Zt.call(t,i,1):hi(t,i)}}return t}function Zr(t,e){return t+ve(kn()*(e-t+1))}function Jr(t,e){var n="";if(!t||e<1||e>h)return n;do{e%2&&(n+=t),(e=ve(e/2))&&(t+=t)}while(e);return n}function Yr(t,e){return Fo(Po(t,e,sc),t+"")}function Xr(t){return Xn(Ha(t))}function ti(t,e){var n=Ha(t);return Ro(n,ur(e,0,n.length))}function ei(t,e,n,i){if(!ra(t))return t;for(var o=-1,s=(e=_i(e,t)).length,a=s-1,c=t;null!=c&&++o<s;){var u=Bo(e[o]),l=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;if(o!=a){var f=c[u];(l=i?i(f,u,c):r)===r&&(l=ra(f)?f:_o(e[o+1])?[]:{})}rr(c,u,l),c=c[u]}return t}var ni=jn?function(t,e){return jn.set(t,e),t}:sc,ri=le?function(t,e){return le(t,"toString",{configurable:!0,enumerable:!1,value:rc(e),writable:!0})}:sc;function ii(t){return Ro(Ha(t))}function oi(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=st(i);++r<i;)o[r]=t[r+e];return o}function si(t,e){var n;return dr(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function ai(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,s=t[o];null!==s&&!fa(s)&&(n?s<=e:s<e)?r=o+1:i=o}return i}return ci(t,e,sc,n)}function ci(t,e,n,i){var o=0,s=null==t?0:t.length;if(0===s)return 0;for(var a=(e=n(e))!=e,c=null===e,u=fa(e),l=e===r;o<s;){var f=ve((o+s)/2),p=n(t[f]),h=p!==r,d=null===p,g=p==p,m=fa(p);if(a)var v=i||g;else v=l?g&&(i||h):c?g&&h&&(i||!d):u?g&&h&&!d&&(i||!m):!d&&!m&&(i?p<=e:p<e);v?o=f+1:s=f}return _n(s,4294967294)}function ui(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var s=t[n],a=e?e(s):s;if(!n||!Hs(a,c)){var c=a;o[i++]=0===s?0:s}}return o}function li(t){return"number"==typeof t?t:fa(t)?d:+t}function fi(t){if("string"==typeof t)return t;if(Gs(t))return je(t,fi)+"";if(fa(t))return zn?zn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function pi(t,e,n){var r=-1,i=Oe,o=t.length,s=!0,a=[],c=a;if(n)s=!1,i=Ie;else if(o>=200){var u=e?null:Ji(t);if(u)return ln(u);s=!1,i=Ye,c=new Zn}else c=e?[]:a;t:for(;++r<o;){var l=t[r],f=e?e(l):l;if(l=n||0!==l?l:0,s&&f==f){for(var p=c.length;p--;)if(c[p]===f)continue t;e&&c.push(f),a.push(l)}else i(c,f,n)||(c!==a&&c.push(f),a.push(l))}return a}function hi(t,e){return null==(t=Oo(t,e=_i(e,t)))||delete t[Bo(Xo(e))]}function di(t,e,n,r){return ei(t,e,n(Er(t,e)),r)}function gi(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?oi(t,r?0:o,r?o+1:i):oi(t,r?o+1:0,r?i:o)}function mi(t,e){var n=t;return n instanceof Wn&&(n=n.value()),Le(e,(function(t,e){return e.func.apply(e.thisArg,Ne([t],e.args))}),n)}function vi(t,e,n){var r=t.length;if(r<2)return r?pi(t[0]):[];for(var i=-1,o=st(r);++i<r;)for(var s=t[i],a=-1;++a<r;)a!=i&&(o[i]=hr(o[i]||s,t[a],e,n));return pi(wr(o,1),e,n)}function yi(t,e,n){for(var i=-1,o=t.length,s=e.length,a={};++i<o;){var c=i<s?e[i]:r;n(a,t[i],c)}return a}function wi(t){return Zs(t)?t:[]}function bi(t){return"function"==typeof t?t:sc}function _i(t,e){return Gs(t)?t:So(t,e)?[t]:$o(_a(t))}var xi=Yr;function Si(t,e,n){var i=t.length;return n=n===r?i:n,!e&&n>=i?t:oi(t,e,n)}var ki=fe||function(t){return pe.clearTimeout(t)};function Ei(t,e){if(e)return t.slice();var n=t.length,r=Wt?Wt(n):new t.constructor(n);return t.copy(r),r}function Ci(t){var e=new t.constructor(t.byteLength);return new Vt(e).set(new Vt(t)),e}function Ti(t,e){var n=e?Ci(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Ai(t,e){if(t!==e){var n=t!==r,i=null===t,o=t==t,s=fa(t),a=e!==r,c=null===e,u=e==e,l=fa(e);if(!c&&!l&&!s&&t>e||s&&a&&u&&!c&&!l||i&&a&&u||!n&&u||!o)return 1;if(!i&&!s&&!l&&t<e||l&&n&&o&&!i&&!s||c&&n&&o||!a&&o||!u)return-1}return 0}function Pi(t,e,n,r){for(var i=-1,o=t.length,s=n.length,a=-1,c=e.length,u=bn(o-s,0),l=st(c+u),f=!r;++a<c;)l[a]=e[a];for(;++i<s;)(f||i<o)&&(l[n[i]]=t[i]);for(;u--;)l[a++]=t[i++];return l}function Oi(t,e,n,r){for(var i=-1,o=t.length,s=-1,a=n.length,c=-1,u=e.length,l=bn(o-a,0),f=st(l+u),p=!r;++i<l;)f[i]=t[i];for(var h=i;++c<u;)f[h+c]=e[c];for(;++s<a;)(p||i<o)&&(f[h+n[s]]=t[i++]);return f}function Ii(t,e){var n=-1,r=t.length;for(e||(e=st(r));++n<r;)e[n]=t[n];return e}function ji(t,e,n,i){var o=!n;n||(n={});for(var s=-1,a=e.length;++s<a;){var c=e[s],u=i?i(n[c],t[c],c,n,t):r;u===r&&(u=t[c]),o?ar(n,c,u):rr(n,c,u)}return n}function Ni(t,e){return function(n,r){var i=Gs(n)?Ee:or,o=e?e():{};return i(n,t,lo(r,2),o)}}function Li(t){return Yr((function(e,n){var i=-1,o=n.length,s=o>1?n[o-1]:r,a=o>2?n[2]:r;for(s=t.length>3&&"function"==typeof s?(o--,s):r,a&&xo(n[0],n[1],a)&&(s=o<3?r:s,o=1),e=Tt(e);++i<o;){var c=n[i];c&&t(e,c,i,s)}return e}))}function Fi(t,e){return function(n,r){if(null==n)return n;if(!Qs(n))return t(n,r);for(var i=n.length,o=e?i:-1,s=Tt(n);(e?o--:++o<i)&&!1!==r(s[o],o,s););return n}}function Di(t){return function(e,n,r){for(var i=-1,o=Tt(e),s=r(e),a=s.length;a--;){var c=s[t?a:++i];if(!1===n(o[c],c,o))break}return e}}function Mi(t){return function(e){var n=sn(e=_a(e))?hn(e):r,i=n?n[0]:e.charAt(0),o=n?Si(n,1).join(""):e.slice(1);return i[t]()+o}}function Ri(t){return function(e){return Le(tc(Wa(e).replace(Jt,"")),t,"")}}function $i(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Hn(t.prototype),r=t.apply(n,e);return ra(r)?r:n}}function Bi(t){return function(e,n,i){var o=Tt(e);if(!Qs(e)){var s=lo(n,3);e=La(e),n=function(t){return s(o[t],t,o)}}var a=t(e,n,i);return a>-1?o[s?e[a]:a]:r}}function zi(t){return io((function(e){var n=e.length,o=n,s=Vn.prototype.thru;for(t&&e.reverse();o--;){var a=e[o];if("function"!=typeof a)throw new Ot(i);if(s&&!c&&"wrapper"==co(a))var c=new Vn([],!0)}for(o=c?o:n;++o<n;){var u=co(a=e[o]),l="wrapper"==u?ao(a):r;c=l&&ko(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?c[co(l[0])].apply(c,l[3]):1==a.length&&ko(a)?c[u]():c.thru(a)}return function(){var t=arguments,r=t[0];if(c&&1==t.length&&Gs(r))return c.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}}))}function qi(t,e,n,i,o,s,a,c,u,f){var p=e&l,h=1&e,d=2&e,g=24&e,m=512&e,v=d?r:$i(t);return function r(){for(var l=arguments.length,y=st(l),w=l;w--;)y[w]=arguments[w];if(g)var b=uo(r),_=en(y,b);if(i&&(y=Pi(y,i,o,g)),s&&(y=Oi(y,s,a,g)),l-=_,g&&l<f){var x=un(y,b);return Qi(t,e,qi,r.placeholder,n,y,x,c,u,f-l)}var S=h?n:this,k=d?S[t]:t;return l=y.length,c?y=Io(y,c):m&&l>1&&y.reverse(),p&&u<l&&(y.length=u),this&&this!==pe&&this instanceof r&&(k=v||$i(k)),k.apply(S,y)}}function Hi(t,e){return function(n,r){return function(t,e,n,r){return xr(t,(function(t,i,o){e(r,n(t),i,o)})),r}(n,t,e(r),{})}}function Ui(t,e){return function(n,i){var o;if(n===r&&i===r)return e;if(n!==r&&(o=n),i!==r){if(o===r)return i;"string"==typeof n||"string"==typeof i?(n=fi(n),i=fi(i)):(n=li(n),i=li(i)),o=t(n,i)}return o}}function Vi(t){return io((function(e){return e=je(e,Ze(lo())),Yr((function(n){var r=this;return t(e,(function(t){return ke(t,r,n)}))}))}))}function Wi(t,e){var n=(e=e===r?" ":fi(e)).length;if(n<2)return n?Jr(e,t):e;var i=Jr(e,me(t/pn(e)));return sn(e)?Si(hn(i),0,t).join(""):i.slice(0,t)}function Gi(t){return function(e,n,i){return i&&"number"!=typeof i&&xo(e,n,i)&&(n=i=r),e=ma(e),n===r?(n=e,e=0):n=ma(n),function(t,e,n,r){for(var i=-1,o=bn(me((e-t)/(n||1)),0),s=st(o);o--;)s[r?o:++i]=t,t+=n;return s}(e,n,i=i===r?e<n?1:-1:ma(i),t)}}function Ki(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=wa(e),n=wa(n)),t(e,n)}}function Qi(t,e,n,i,o,s,a,l,f,p){var h=8&e;e|=h?c:u,4&(e&=~(h?u:c))||(e&=-4);var d=[t,e,o,h?s:r,h?a:r,h?r:s,h?r:a,l,f,p],g=n.apply(r,d);return ko(t)&&No(g,d),g.placeholder=i,Do(g,t,e)}function Zi(t){var e=Ct[t];return function(t,n){if(t=wa(t),(n=null==n?0:_n(va(n),292))&&vn(t)){var r=(_a(t)+"e").split("e");return+((r=(_a(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Ji=Pn&&1/ln(new Pn([,-0]))[1]==p?function(t){return new Pn(t)}:fc;function Yi(t){return function(e){var n=vo(e);return n==k?an(e):n==P?fn(e):function(t,e){return je(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Xi(t,e,n,o,p,h,d,g){var m=2&e;if(!m&&"function"!=typeof t)throw new Ot(i);var v=o?o.length:0;if(v||(e&=-97,o=p=r),d=d===r?d:bn(va(d),0),g=g===r?g:va(g),v-=p?p.length:0,e&u){var y=o,w=p;o=p=r}var b=m?r:ao(t),_=[t,e,n,o,p,y,w,h,d,g];if(b&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<131,a=r==l&&8==n||r==l&&n==f&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!o&&!a)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var c=e[3];if(c){var u=t[3];t[3]=u?Pi(u,c,e[4]):c,t[4]=u?un(t[3],s):e[4]}(c=e[5])&&(u=t[5],t[5]=u?Oi(u,c,e[6]):c,t[6]=u?un(t[5],s):e[6]);(c=e[7])&&(t[7]=c);r&l&&(t[8]=null==t[8]?e[8]:_n(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=i}(_,b),t=_[0],e=_[1],n=_[2],o=_[3],p=_[4],!(g=_[9]=_[9]===r?m?0:t.length:bn(_[9]-v,0))&&24&e&&(e&=-25),e&&1!=e)x=8==e||e==a?function(t,e,n){var i=$i(t);return function o(){for(var s=arguments.length,a=st(s),c=s,u=uo(o);c--;)a[c]=arguments[c];var l=s<3&&a[0]!==u&&a[s-1]!==u?[]:un(a,u);return(s-=l.length)<n?Qi(t,e,qi,o.placeholder,r,a,l,r,r,n-s):ke(this&&this!==pe&&this instanceof o?i:t,this,a)}}(t,e,g):e!=c&&33!=e||p.length?qi.apply(r,_):function(t,e,n,r){var i=1&e,o=$i(t);return function e(){for(var s=-1,a=arguments.length,c=-1,u=r.length,l=st(u+a),f=this&&this!==pe&&this instanceof e?o:t;++c<u;)l[c]=r[c];for(;a--;)l[c++]=arguments[++s];return ke(f,i?n:this,l)}}(t,e,n,o);else var x=function(t,e,n){var r=1&e,i=$i(t);return function e(){return(this&&this!==pe&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,n);return Do((b?ni:No)(x,_),t,e)}function to(t,e,n,i){return t===r||Hs(t,Nt[n])&&!Dt.call(i,n)?e:t}function eo(t,e,n,i,o,s){return ra(t)&&ra(e)&&(s.set(e,t),Ur(t,e,r,eo,s),s.delete(e)),t}function no(t){return aa(t)?r:t}function ro(t,e,n,i,o,s){var a=1&n,c=t.length,u=e.length;if(c!=u&&!(a&&u>c))return!1;var l=s.get(t),f=s.get(e);if(l&&f)return l==e&&f==t;var p=-1,h=!0,d=2&n?new Zn:r;for(s.set(t,e),s.set(e,t);++p<c;){var g=t[p],m=e[p];if(i)var v=a?i(m,g,p,e,t,s):i(g,m,p,t,e,s);if(v!==r){if(v)continue;h=!1;break}if(d){if(!De(e,(function(t,e){if(!Ye(d,e)&&(g===t||o(g,t,n,i,s)))return d.push(e)}))){h=!1;break}}else if(g!==m&&!o(g,m,n,i,s)){h=!1;break}}return s.delete(t),s.delete(e),h}function io(t){return Fo(Po(t,r,Ko),t+"")}function oo(t){return Cr(t,La,go)}function so(t){return Cr(t,Fa,mo)}var ao=jn?function(t){return jn.get(t)}:fc;function co(t){for(var e=t.name+"",n=Nn[e],r=Dt.call(Nn,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function uo(t){return(Dt.call(qn,"placeholder")?qn:t).placeholder}function lo(){var t=qn.iteratee||ac;return t=t===ac?Mr:t,arguments.length?t(arguments[0],arguments[1]):t}function fo(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function po(t){for(var e=La(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,To(i)]}return e}function ho(t,e){var n=function(t,e){return null==t?r:t[e]}(t,e);return Dr(n)?n:r}var go=Me?function(t){return null==t?[]:(t=Tt(t),Pe(Me(t),(function(e){return Qt.call(t,e)})))}:yc,mo=Me?function(t){for(var e=[];t;)Ne(e,go(t)),t=Gt(t);return e}:yc,vo=Tr;function yo(t,e,n){for(var r=-1,i=(e=_i(e,t)).length,o=!1;++r<i;){var s=Bo(e[r]);if(!(o=null!=t&&n(t,s)))break;t=t[s]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&na(i)&&_o(s,i)&&(Gs(t)||Ws(t))}function wo(t){return"function"!=typeof t.constructor||Co(t)?{}:Hn(Gt(t))}function bo(t){return Gs(t)||Ws(t)||!!(Xt&&t&&t[Xt])}function _o(t,e){var n=typeof t;return!!(e=null==e?h:e)&&("number"==n||"symbol"!=n&&wt.test(t))&&t>-1&&t%1==0&&t<e}function xo(t,e,n){if(!ra(n))return!1;var r=typeof e;return!!("number"==r?Qs(n)&&_o(e,n.length):"string"==r&&e in n)&&Hs(n[e],t)}function So(t,e){if(Gs(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!fa(t))||(et.test(t)||!tt.test(t)||null!=e&&t in Tt(e))}function ko(t){var e=co(t),n=qn[e];if("function"!=typeof n||!(e in Wn.prototype))return!1;if(t===n)return!0;var r=ao(n);return!!r&&t===r[0]}(Cn&&vo(new Cn(new ArrayBuffer(1)))!=L||Tn&&vo(new Tn)!=k||An&&vo(An.resolve())!=T||Pn&&vo(new Pn)!=P||On&&vo(new On)!=j)&&(vo=function(t){var e=Tr(t),n=e==C?t.constructor:r,i=n?zo(n):"";if(i)switch(i){case Ln:return L;case Fn:return k;case Dn:return T;case Mn:return P;case Rn:return j}return e});var Eo=Lt?ta:wc;function Co(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Nt)}function To(t){return t==t&&!ra(t)}function Ao(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==r||t in Tt(n)))}}function Po(t,e,n){return e=bn(e===r?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=bn(r.length-e,0),s=st(o);++i<o;)s[i]=r[e+i];i=-1;for(var a=st(e+1);++i<e;)a[i]=r[i];return a[e]=n(s),ke(t,this,a)}}function Oo(t,e){return e.length<2?t:Er(t,oi(e,0,-1))}function Io(t,e){for(var n=t.length,i=_n(e.length,n),o=Ii(t);i--;){var s=e[i];t[i]=_o(s,n)?o[s]:r}return t}function jo(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var No=Mo(ni),Lo=de||function(t,e){return pe.setTimeout(t,e)},Fo=Mo(ri);function Do(t,e,n){var r=e+"";return Fo(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(at,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return Ce(m,(function(n){var r="_."+n[0];e&n[1]&&!Oe(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(ct);return e?e[1].split(ut):[]}(r),n)))}function Mo(t){var e=0,n=0;return function(){var i=xn(),o=16-(i-n);if(n=i,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(r,arguments)}}function Ro(t,e){var n=-1,i=t.length,o=i-1;for(e=e===r?i:e;++n<e;){var s=Zr(n,o),a=t[s];t[s]=t[n],t[n]=a}return t.length=e,t}var $o=function(t){var e=Ms(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(nt,(function(t,n,r,i){e.push(r?i.replace(pt,"$1"):n||t)})),e}));function Bo(t){if("string"==typeof t||fa(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function zo(t){if(null!=t){try{return Ft.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function qo(t){if(t instanceof Wn)return t.clone();var e=new Vn(t.__wrapped__,t.__chain__);return e.__actions__=Ii(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Ho=Yr((function(t,e){return Zs(t)?hr(t,wr(e,1,Zs,!0)):[]})),Uo=Yr((function(t,e){var n=Xo(e);return Zs(n)&&(n=r),Zs(t)?hr(t,wr(e,1,Zs,!0),lo(n,2)):[]})),Vo=Yr((function(t,e){var n=Xo(e);return Zs(n)&&(n=r),Zs(t)?hr(t,wr(e,1,Zs,!0),r,n):[]}));function Wo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:va(n);return i<0&&(i=bn(r+i,0)),$e(t,lo(e,3),i)}function Go(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var o=i-1;return n!==r&&(o=va(n),o=n<0?bn(i+o,0):_n(o,i-1)),$e(t,lo(e,3),o,!0)}function Ko(t){return(null==t?0:t.length)?wr(t,1):[]}function Qo(t){return t&&t.length?t[0]:r}var Zo=Yr((function(t){var e=je(t,wi);return e.length&&e[0]===t[0]?Ir(e):[]})),Jo=Yr((function(t){var e=Xo(t),n=je(t,wi);return e===Xo(n)?e=r:n.pop(),n.length&&n[0]===t[0]?Ir(n,lo(e,2)):[]})),Yo=Yr((function(t){var e=Xo(t),n=je(t,wi);return(e="function"==typeof e?e:r)&&n.pop(),n.length&&n[0]===t[0]?Ir(n,r,e):[]}));function Xo(t){var e=null==t?0:t.length;return e?t[e-1]:r}var ts=Yr(es);function es(t,e){return t&&t.length&&e&&e.length?Kr(t,e):t}var ns=io((function(t,e){var n=null==t?0:t.length,r=cr(t,e);return Qr(t,je(e,(function(t){return _o(t,n)?+t:t})).sort(Ai)),r}));function rs(t){return null==t?t:En.call(t)}var is=Yr((function(t){return pi(wr(t,1,Zs,!0))})),os=Yr((function(t){var e=Xo(t);return Zs(e)&&(e=r),pi(wr(t,1,Zs,!0),lo(e,2))})),ss=Yr((function(t){var e=Xo(t);return e="function"==typeof e?e:r,pi(wr(t,1,Zs,!0),r,e)}));function as(t){if(!t||!t.length)return[];var e=0;return t=Pe(t,(function(t){if(Zs(t))return e=bn(t.length,e),!0})),Ke(e,(function(e){return je(t,Ue(e))}))}function cs(t,e){if(!t||!t.length)return[];var n=as(t);return null==e?n:je(n,(function(t){return ke(e,r,t)}))}var us=Yr((function(t,e){return Zs(t)?hr(t,e):[]})),ls=Yr((function(t){return vi(Pe(t,Zs))})),fs=Yr((function(t){var e=Xo(t);return Zs(e)&&(e=r),vi(Pe(t,Zs),lo(e,2))})),ps=Yr((function(t){var e=Xo(t);return e="function"==typeof e?e:r,vi(Pe(t,Zs),r,e)})),hs=Yr(as);var ds=Yr((function(t){var e=t.length,n=e>1?t[e-1]:r;return n="function"==typeof n?(t.pop(),n):r,cs(t,n)}));function gs(t){var e=qn(t);return e.__chain__=!0,e}function ms(t,e){return e(t)}var vs=io((function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,o=function(e){return cr(e,t)};return!(e>1||this.__actions__.length)&&i instanceof Wn&&_o(n)?((i=i.slice(n,+n+(e?1:0))).__actions__.push({func:ms,args:[o],thisArg:r}),new Vn(i,this.__chain__).thru((function(t){return e&&!t.length&&t.push(r),t}))):this.thru(o)}));var ys=Ni((function(t,e,n){Dt.call(t,n)?++t[n]:ar(t,n,1)}));var ws=Bi(Wo),bs=Bi(Go);function _s(t,e){return(Gs(t)?Ce:dr)(t,lo(e,3))}function xs(t,e){return(Gs(t)?Te:gr)(t,lo(e,3))}var Ss=Ni((function(t,e,n){Dt.call(t,n)?t[n].push(e):ar(t,n,[e])}));var ks=Yr((function(t,e,n){var r=-1,i="function"==typeof e,o=Qs(t)?st(t.length):[];return dr(t,(function(t){o[++r]=i?ke(e,t,n):jr(t,e,n)})),o})),Es=Ni((function(t,e,n){ar(t,n,e)}));function Cs(t,e){return(Gs(t)?je:zr)(t,lo(e,3))}var Ts=Ni((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]}));var As=Yr((function(t,e){if(null==t)return[];var n=e.length;return n>1&&xo(t,e[0],e[1])?e=[]:n>2&&xo(e[0],e[1],e[2])&&(e=[e[0]]),Wr(t,wr(e,1),[])})),Ps=he||function(){return pe.Date.now()};function Os(t,e,n){return e=n?r:e,e=t&&null==e?t.length:e,Xi(t,l,r,r,r,r,e)}function Is(t,e){var n;if("function"!=typeof e)throw new Ot(i);return t=va(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=r),n}}var js=Yr((function(t,e,n){var r=1;if(n.length){var i=un(n,uo(js));r|=c}return Xi(t,r,e,n,i)})),Ns=Yr((function(t,e,n){var r=3;if(n.length){var i=un(n,uo(Ns));r|=c}return Xi(e,r,t,n,i)}));function Ls(t,e,n){var o,s,a,c,u,l,f=0,p=!1,h=!1,d=!0;if("function"!=typeof t)throw new Ot(i);function g(e){var n=o,i=s;return o=s=r,f=e,c=t.apply(i,n)}function m(t){return f=t,u=Lo(y,e),p?g(t):c}function v(t){var n=t-l;return l===r||n>=e||n<0||h&&t-f>=a}function y(){var t=Ps();if(v(t))return w(t);u=Lo(y,function(t){var n=e-(t-l);return h?_n(n,a-(t-f)):n}(t))}function w(t){return u=r,d&&o?g(t):(o=s=r,c)}function b(){var t=Ps(),n=v(t);if(o=arguments,s=this,l=t,n){if(u===r)return m(l);if(h)return ki(u),u=Lo(y,e),g(l)}return u===r&&(u=Lo(y,e)),c}return e=wa(e)||0,ra(n)&&(p=!!n.leading,a=(h="maxWait"in n)?bn(wa(n.maxWait)||0,e):a,d="trailing"in n?!!n.trailing:d),b.cancel=function(){u!==r&&ki(u),f=0,o=l=s=u=r},b.flush=function(){return u===r?c:w(Ps())},b}var Fs=Yr((function(t,e){return pr(t,1,e)})),Ds=Yr((function(t,e,n){return pr(t,wa(e)||0,n)}));function Ms(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Ot(i);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(Ms.Cache||Qn),n}function Rs(t){if("function"!=typeof t)throw new Ot(i);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Ms.Cache=Qn;var $s=xi((function(t,e){var n=(e=1==e.length&&Gs(e[0])?je(e[0],Ze(lo())):je(wr(e,1),Ze(lo()))).length;return Yr((function(r){for(var i=-1,o=_n(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return ke(t,this,r)}))})),Bs=Yr((function(t,e){var n=un(e,uo(Bs));return Xi(t,c,r,e,n)})),zs=Yr((function(t,e){var n=un(e,uo(zs));return Xi(t,u,r,e,n)})),qs=io((function(t,e){return Xi(t,f,r,r,r,e)}));function Hs(t,e){return t===e||t!=t&&e!=e}var Us=Ki(Ar),Vs=Ki((function(t,e){return t>=e})),Ws=Nr(function(){return arguments}())?Nr:function(t){return ia(t)&&Dt.call(t,"callee")&&!Qt.call(t,"callee")},Gs=st.isArray,Ks=ye?Ze(ye):function(t){return ia(t)&&Tr(t)==N};function Qs(t){return null!=t&&na(t.length)&&!ta(t)}function Zs(t){return ia(t)&&Qs(t)}var Js=Ve||wc,Ys=we?Ze(we):function(t){return ia(t)&&Tr(t)==b};function Xs(t){if(!ia(t))return!1;var e=Tr(t);return e==_||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!aa(t)}function ta(t){if(!ra(t))return!1;var e=Tr(t);return e==x||e==S||"[object AsyncFunction]"==e||"[object Proxy]"==e}function ea(t){return"number"==typeof t&&t==va(t)}function na(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=h}function ra(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ia(t){return null!=t&&"object"==typeof t}var oa=be?Ze(be):function(t){return ia(t)&&vo(t)==k};function sa(t){return"number"==typeof t||ia(t)&&Tr(t)==E}function aa(t){if(!ia(t)||Tr(t)!=C)return!1;var e=Gt(t);if(null===e)return!0;var n=Dt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Ft.call(n)==Bt}var ca=_e?Ze(_e):function(t){return ia(t)&&Tr(t)==A};var ua=xe?Ze(xe):function(t){return ia(t)&&vo(t)==P};function la(t){return"string"==typeof t||!Gs(t)&&ia(t)&&Tr(t)==O}function fa(t){return"symbol"==typeof t||ia(t)&&Tr(t)==I}var pa=Se?Ze(Se):function(t){return ia(t)&&na(t.length)&&!!oe[Tr(t)]};var ha=Ki(Br),da=Ki((function(t,e){return t<=e}));function ga(t){if(!t)return[];if(Qs(t))return la(t)?hn(t):Ii(t);if(ee&&t[ee])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[ee]());var e=vo(t);return(e==k?an:e==P?ln:Ha)(t)}function ma(t){return t?(t=wa(t))===p||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function va(t){var e=ma(t),n=e%1;return e==e?n?e-n:e:0}function ya(t){return t?ur(va(t),0,g):0}function wa(t){if("number"==typeof t)return t;if(fa(t))return d;if(ra(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ra(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Qe(t);var n=mt.test(t);return n||yt.test(t)?ue(t.slice(2),n?2:8):gt.test(t)?d:+t}function ba(t){return ji(t,Fa(t))}function _a(t){return null==t?"":fi(t)}var xa=Li((function(t,e){if(Co(e)||Qs(e))ji(e,La(e),t);else for(var n in e)Dt.call(e,n)&&rr(t,n,e[n])})),Sa=Li((function(t,e){ji(e,Fa(e),t)})),ka=Li((function(t,e,n,r){ji(e,Fa(e),t,r)})),Ea=Li((function(t,e,n,r){ji(e,La(e),t,r)})),Ca=io(cr);var Ta=Yr((function(t,e){t=Tt(t);var n=-1,i=e.length,o=i>2?e[2]:r;for(o&&xo(e[0],e[1],o)&&(i=1);++n<i;)for(var s=e[n],a=Fa(s),c=-1,u=a.length;++c<u;){var l=a[c],f=t[l];(f===r||Hs(f,Nt[l])&&!Dt.call(t,l))&&(t[l]=s[l])}return t})),Aa=Yr((function(t){return t.push(r,eo),ke(Ma,r,t)}));function Pa(t,e,n){var i=null==t?r:Er(t,e);return i===r?n:i}function Oa(t,e){return null!=t&&yo(t,e,Or)}var Ia=Hi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=$t.call(e)),t[e]=n}),rc(sc)),ja=Hi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=$t.call(e)),Dt.call(t,e)?t[e].push(n):t[e]=[n]}),lo),Na=Yr(jr);function La(t){return Qs(t)?Yn(t):Rr(t)}function Fa(t){return Qs(t)?Yn(t,!0):$r(t)}var Da=Li((function(t,e,n){Ur(t,e,n)})),Ma=Li((function(t,e,n,r){Ur(t,e,n,r)})),Ra=io((function(t,e){var n={};if(null==t)return n;var r=!1;e=je(e,(function(e){return e=_i(e,t),r||(r=e.length>1),e})),ji(t,so(t),n),r&&(n=lr(n,7,no));for(var i=e.length;i--;)hi(n,e[i]);return n}));var $a=io((function(t,e){return null==t?{}:function(t,e){return Gr(t,e,(function(e,n){return Oa(t,n)}))}(t,e)}));function Ba(t,e){if(null==t)return{};var n=je(so(t),(function(t){return[t]}));return e=lo(e),Gr(t,n,(function(t,n){return e(t,n[0])}))}var za=Yi(La),qa=Yi(Fa);function Ha(t){return null==t?[]:Je(t,La(t))}var Ua=Ri((function(t,e,n){return e=e.toLowerCase(),t+(n?Va(e):e)}));function Va(t){return Xa(_a(t).toLowerCase())}function Wa(t){return(t=_a(t))&&t.replace(bt,nn).replace(Yt,"")}var Ga=Ri((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Ka=Ri((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Qa=Mi("toLowerCase");var Za=Ri((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));var Ja=Ri((function(t,e,n){return t+(n?" ":"")+Xa(e)}));var Ya=Ri((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Xa=Mi("toUpperCase");function tc(t,e,n){return t=_a(t),(e=n?r:e)===r?function(t){return ne.test(t)}(t)?function(t){return t.match(te)||[]}(t):function(t){return t.match(lt)||[]}(t):t.match(e)||[]}var ec=Yr((function(t,e){try{return ke(t,r,e)}catch(t){return Xs(t)?t:new kt(t)}})),nc=io((function(t,e){return Ce(e,(function(e){e=Bo(e),ar(t,e,js(t[e],t))})),t}));function rc(t){return function(){return t}}var ic=zi(),oc=zi(!0);function sc(t){return t}function ac(t){return Mr("function"==typeof t?t:lr(t,1))}var cc=Yr((function(t,e){return function(n){return jr(n,t,e)}})),uc=Yr((function(t,e){return function(n){return jr(t,n,e)}}));function lc(t,e,n){var r=La(e),i=kr(e,r);null!=n||ra(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=kr(e,La(e)));var o=!(ra(n)&&"chain"in n&&!n.chain),s=ta(t);return Ce(i,(function(n){var r=e[n];t[n]=r,s&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),i=n.__actions__=Ii(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Ne([this.value()],arguments))})})),t}function fc(){}var pc=Vi(je),hc=Vi(Ae),dc=Vi(De);function gc(t){return So(t)?Ue(Bo(t)):function(t){return function(e){return Er(e,t)}}(t)}var mc=Gi(),vc=Gi(!0);function yc(){return[]}function wc(){return!1}var bc=Ui((function(t,e){return t+e}),0),_c=Zi("ceil"),xc=Ui((function(t,e){return t/e}),1),Sc=Zi("floor");var kc=Ui((function(t,e){return t*e}),1),Ec=Zi("round"),Cc=Ui((function(t,e){return t-e}),0);return qn.after=function(t,e){if("function"!=typeof e)throw new Ot(i);return t=va(t),function(){if(--t<1)return e.apply(this,arguments)}},qn.ary=Os,qn.assign=xa,qn.assignIn=Sa,qn.assignInWith=ka,qn.assignWith=Ea,qn.at=Ca,qn.before=Is,qn.bind=js,qn.bindAll=nc,qn.bindKey=Ns,qn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Gs(t)?t:[t]},qn.chain=gs,qn.chunk=function(t,e,n){e=(n?xo(t,e,n):e===r)?1:bn(va(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var o=0,s=0,a=st(me(i/e));o<i;)a[s++]=oi(t,o,o+=e);return a},qn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},qn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=st(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return Ne(Gs(n)?Ii(n):[n],wr(e,1))},qn.cond=function(t){var e=null==t?0:t.length,n=lo();return t=e?je(t,(function(t){if("function"!=typeof t[1])throw new Ot(i);return[n(t[0]),t[1]]})):[],Yr((function(n){for(var r=-1;++r<e;){var i=t[r];if(ke(i[0],this,n))return ke(i[1],this,n)}}))},qn.conforms=function(t){return function(t){var e=La(t);return function(n){return fr(n,t,e)}}(lr(t,1))},qn.constant=rc,qn.countBy=ys,qn.create=function(t,e){var n=Hn(t);return null==e?n:sr(n,e)},qn.curry=function t(e,n,i){var o=Xi(e,8,r,r,r,r,r,n=i?r:n);return o.placeholder=t.placeholder,o},qn.curryRight=function t(e,n,i){var o=Xi(e,a,r,r,r,r,r,n=i?r:n);return o.placeholder=t.placeholder,o},qn.debounce=Ls,qn.defaults=Ta,qn.defaultsDeep=Aa,qn.defer=Fs,qn.delay=Ds,qn.difference=Ho,qn.differenceBy=Uo,qn.differenceWith=Vo,qn.drop=function(t,e,n){var i=null==t?0:t.length;return i?oi(t,(e=n||e===r?1:va(e))<0?0:e,i):[]},qn.dropRight=function(t,e,n){var i=null==t?0:t.length;return i?oi(t,0,(e=i-(e=n||e===r?1:va(e)))<0?0:e):[]},qn.dropRightWhile=function(t,e){return t&&t.length?gi(t,lo(e,3),!0,!0):[]},qn.dropWhile=function(t,e){return t&&t.length?gi(t,lo(e,3),!0):[]},qn.fill=function(t,e,n,i){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&xo(t,e,n)&&(n=0,i=o),function(t,e,n,i){var o=t.length;for((n=va(n))<0&&(n=-n>o?0:o+n),(i=i===r||i>o?o:va(i))<0&&(i+=o),i=n>i?0:ya(i);n<i;)t[n++]=e;return t}(t,e,n,i)):[]},qn.filter=function(t,e){return(Gs(t)?Pe:yr)(t,lo(e,3))},qn.flatMap=function(t,e){return wr(Cs(t,e),1)},qn.flatMapDeep=function(t,e){return wr(Cs(t,e),p)},qn.flatMapDepth=function(t,e,n){return n=n===r?1:va(n),wr(Cs(t,e),n)},qn.flatten=Ko,qn.flattenDeep=function(t){return(null==t?0:t.length)?wr(t,p):[]},qn.flattenDepth=function(t,e){return(null==t?0:t.length)?wr(t,e=e===r?1:va(e)):[]},qn.flip=function(t){return Xi(t,512)},qn.flow=ic,qn.flowRight=oc,qn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},qn.functions=function(t){return null==t?[]:kr(t,La(t))},qn.functionsIn=function(t){return null==t?[]:kr(t,Fa(t))},qn.groupBy=Ss,qn.initial=function(t){return(null==t?0:t.length)?oi(t,0,-1):[]},qn.intersection=Zo,qn.intersectionBy=Jo,qn.intersectionWith=Yo,qn.invert=Ia,qn.invertBy=ja,qn.invokeMap=ks,qn.iteratee=ac,qn.keyBy=Es,qn.keys=La,qn.keysIn=Fa,qn.map=Cs,qn.mapKeys=function(t,e){var n={};return e=lo(e,3),xr(t,(function(t,r,i){ar(n,e(t,r,i),t)})),n},qn.mapValues=function(t,e){var n={};return e=lo(e,3),xr(t,(function(t,r,i){ar(n,r,e(t,r,i))})),n},qn.matches=function(t){return qr(lr(t,1))},qn.matchesProperty=function(t,e){return Hr(t,lr(e,1))},qn.memoize=Ms,qn.merge=Da,qn.mergeWith=Ma,qn.method=cc,qn.methodOf=uc,qn.mixin=lc,qn.negate=Rs,qn.nthArg=function(t){return t=va(t),Yr((function(e){return Vr(e,t)}))},qn.omit=Ra,qn.omitBy=function(t,e){return Ba(t,Rs(lo(e)))},qn.once=function(t){return Is(2,t)},qn.orderBy=function(t,e,n,i){return null==t?[]:(Gs(e)||(e=null==e?[]:[e]),Gs(n=i?r:n)||(n=null==n?[]:[n]),Wr(t,e,n))},qn.over=pc,qn.overArgs=$s,qn.overEvery=hc,qn.overSome=dc,qn.partial=Bs,qn.partialRight=zs,qn.partition=Ts,qn.pick=$a,qn.pickBy=Ba,qn.property=gc,qn.propertyOf=function(t){return function(e){return null==t?r:Er(t,e)}},qn.pull=ts,qn.pullAll=es,qn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Kr(t,e,lo(n,2)):t},qn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Kr(t,e,r,n):t},qn.pullAt=ns,qn.range=mc,qn.rangeRight=vc,qn.rearg=qs,qn.reject=function(t,e){return(Gs(t)?Pe:yr)(t,Rs(lo(e,3)))},qn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=lo(e,3);++r<o;){var s=t[r];e(s,r,t)&&(n.push(s),i.push(r))}return Qr(t,i),n},qn.rest=function(t,e){if("function"!=typeof t)throw new Ot(i);return Yr(t,e=e===r?e:va(e))},qn.reverse=rs,qn.sampleSize=function(t,e,n){return e=(n?xo(t,e,n):e===r)?1:va(e),(Gs(t)?tr:ti)(t,e)},qn.set=function(t,e,n){return null==t?t:ei(t,e,n)},qn.setWith=function(t,e,n,i){return i="function"==typeof i?i:r,null==t?t:ei(t,e,n,i)},qn.shuffle=function(t){return(Gs(t)?er:ii)(t)},qn.slice=function(t,e,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&xo(t,e,n)?(e=0,n=i):(e=null==e?0:va(e),n=n===r?i:va(n)),oi(t,e,n)):[]},qn.sortBy=As,qn.sortedUniq=function(t){return t&&t.length?ui(t):[]},qn.sortedUniqBy=function(t,e){return t&&t.length?ui(t,lo(e,2)):[]},qn.split=function(t,e,n){return n&&"number"!=typeof n&&xo(t,e,n)&&(e=n=r),(n=n===r?g:n>>>0)?(t=_a(t))&&("string"==typeof e||null!=e&&!ca(e))&&!(e=fi(e))&&sn(t)?Si(hn(t),0,n):t.split(e,n):[]},qn.spread=function(t,e){if("function"!=typeof t)throw new Ot(i);return e=null==e?0:bn(va(e),0),Yr((function(n){var r=n[e],i=Si(n,0,e);return r&&Ne(i,r),ke(t,this,i)}))},qn.tail=function(t){var e=null==t?0:t.length;return e?oi(t,1,e):[]},qn.take=function(t,e,n){return t&&t.length?oi(t,0,(e=n||e===r?1:va(e))<0?0:e):[]},qn.takeRight=function(t,e,n){var i=null==t?0:t.length;return i?oi(t,(e=i-(e=n||e===r?1:va(e)))<0?0:e,i):[]},qn.takeRightWhile=function(t,e){return t&&t.length?gi(t,lo(e,3),!1,!0):[]},qn.takeWhile=function(t,e){return t&&t.length?gi(t,lo(e,3)):[]},qn.tap=function(t,e){return e(t),t},qn.throttle=function(t,e,n){var r=!0,o=!0;if("function"!=typeof t)throw new Ot(i);return ra(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),Ls(t,e,{leading:r,maxWait:e,trailing:o})},qn.thru=ms,qn.toArray=ga,qn.toPairs=za,qn.toPairsIn=qa,qn.toPath=function(t){return Gs(t)?je(t,Bo):fa(t)?[t]:Ii($o(_a(t)))},qn.toPlainObject=ba,qn.transform=function(t,e,n){var r=Gs(t),i=r||Js(t)||pa(t);if(e=lo(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:ra(t)&&ta(o)?Hn(Gt(t)):{}}return(i?Ce:xr)(t,(function(t,r,i){return e(n,t,r,i)})),n},qn.unary=function(t){return Os(t,1)},qn.union=is,qn.unionBy=os,qn.unionWith=ss,qn.uniq=function(t){return t&&t.length?pi(t):[]},qn.uniqBy=function(t,e){return t&&t.length?pi(t,lo(e,2)):[]},qn.uniqWith=function(t,e){return e="function"==typeof e?e:r,t&&t.length?pi(t,r,e):[]},qn.unset=function(t,e){return null==t||hi(t,e)},qn.unzip=as,qn.unzipWith=cs,qn.update=function(t,e,n){return null==t?t:di(t,e,bi(n))},qn.updateWith=function(t,e,n,i){return i="function"==typeof i?i:r,null==t?t:di(t,e,bi(n),i)},qn.values=Ha,qn.valuesIn=function(t){return null==t?[]:Je(t,Fa(t))},qn.without=us,qn.words=tc,qn.wrap=function(t,e){return Bs(bi(e),t)},qn.xor=ls,qn.xorBy=fs,qn.xorWith=ps,qn.zip=hs,qn.zipObject=function(t,e){return yi(t||[],e||[],rr)},qn.zipObjectDeep=function(t,e){return yi(t||[],e||[],ei)},qn.zipWith=ds,qn.entries=za,qn.entriesIn=qa,qn.extend=Sa,qn.extendWith=ka,lc(qn,qn),qn.add=bc,qn.attempt=ec,qn.camelCase=Ua,qn.capitalize=Va,qn.ceil=_c,qn.clamp=function(t,e,n){return n===r&&(n=e,e=r),n!==r&&(n=(n=wa(n))==n?n:0),e!==r&&(e=(e=wa(e))==e?e:0),ur(wa(t),e,n)},qn.clone=function(t){return lr(t,4)},qn.cloneDeep=function(t){return lr(t,5)},qn.cloneDeepWith=function(t,e){return lr(t,5,e="function"==typeof e?e:r)},qn.cloneWith=function(t,e){return lr(t,4,e="function"==typeof e?e:r)},qn.conformsTo=function(t,e){return null==e||fr(t,e,La(e))},qn.deburr=Wa,qn.defaultTo=function(t,e){return null==t||t!=t?e:t},qn.divide=xc,qn.endsWith=function(t,e,n){t=_a(t),e=fi(e);var i=t.length,o=n=n===r?i:ur(va(n),0,i);return(n-=e.length)>=0&&t.slice(n,o)==e},qn.eq=Hs,qn.escape=function(t){return(t=_a(t))&&Z.test(t)?t.replace(K,rn):t},qn.escapeRegExp=function(t){return(t=_a(t))&&it.test(t)?t.replace(rt,"\\$&"):t},qn.every=function(t,e,n){var i=Gs(t)?Ae:mr;return n&&xo(t,e,n)&&(e=r),i(t,lo(e,3))},qn.find=ws,qn.findIndex=Wo,qn.findKey=function(t,e){return Re(t,lo(e,3),xr)},qn.findLast=bs,qn.findLastIndex=Go,qn.findLastKey=function(t,e){return Re(t,lo(e,3),Sr)},qn.floor=Sc,qn.forEach=_s,qn.forEachRight=xs,qn.forIn=function(t,e){return null==t?t:br(t,lo(e,3),Fa)},qn.forInRight=function(t,e){return null==t?t:_r(t,lo(e,3),Fa)},qn.forOwn=function(t,e){return t&&xr(t,lo(e,3))},qn.forOwnRight=function(t,e){return t&&Sr(t,lo(e,3))},qn.get=Pa,qn.gt=Us,qn.gte=Vs,qn.has=function(t,e){return null!=t&&yo(t,e,Pr)},qn.hasIn=Oa,qn.head=Qo,qn.identity=sc,qn.includes=function(t,e,n,r){t=Qs(t)?t:Ha(t),n=n&&!r?va(n):0;var i=t.length;return n<0&&(n=bn(i+n,0)),la(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Be(t,e,n)>-1},qn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:va(n);return i<0&&(i=bn(r+i,0)),Be(t,e,i)},qn.inRange=function(t,e,n){return e=ma(e),n===r?(n=e,e=0):n=ma(n),function(t,e,n){return t>=_n(e,n)&&t<bn(e,n)}(t=wa(t),e,n)},qn.invoke=Na,qn.isArguments=Ws,qn.isArray=Gs,qn.isArrayBuffer=Ks,qn.isArrayLike=Qs,qn.isArrayLikeObject=Zs,qn.isBoolean=function(t){return!0===t||!1===t||ia(t)&&Tr(t)==w},qn.isBuffer=Js,qn.isDate=Ys,qn.isElement=function(t){return ia(t)&&1===t.nodeType&&!aa(t)},qn.isEmpty=function(t){if(null==t)return!0;if(Qs(t)&&(Gs(t)||"string"==typeof t||"function"==typeof t.splice||Js(t)||pa(t)||Ws(t)))return!t.length;var e=vo(t);if(e==k||e==P)return!t.size;if(Co(t))return!Rr(t).length;for(var n in t)if(Dt.call(t,n))return!1;return!0},qn.isEqual=function(t,e){return Lr(t,e)},qn.isEqualWith=function(t,e,n){var i=(n="function"==typeof n?n:r)?n(t,e):r;return i===r?Lr(t,e,r,n):!!i},qn.isError=Xs,qn.isFinite=function(t){return"number"==typeof t&&vn(t)},qn.isFunction=ta,qn.isInteger=ea,qn.isLength=na,qn.isMap=oa,qn.isMatch=function(t,e){return t===e||Fr(t,e,po(e))},qn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:r,Fr(t,e,po(e),n)},qn.isNaN=function(t){return sa(t)&&t!=+t},qn.isNative=function(t){if(Eo(t))throw new kt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Dr(t)},qn.isNil=function(t){return null==t},qn.isNull=function(t){return null===t},qn.isNumber=sa,qn.isObject=ra,qn.isObjectLike=ia,qn.isPlainObject=aa,qn.isRegExp=ca,qn.isSafeInteger=function(t){return ea(t)&&t>=-9007199254740991&&t<=h},qn.isSet=ua,qn.isString=la,qn.isSymbol=fa,qn.isTypedArray=pa,qn.isUndefined=function(t){return t===r},qn.isWeakMap=function(t){return ia(t)&&vo(t)==j},qn.isWeakSet=function(t){return ia(t)&&"[object WeakSet]"==Tr(t)},qn.join=function(t,e){return null==t?"":yn.call(t,e)},qn.kebabCase=Ga,qn.last=Xo,qn.lastIndexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var o=i;return n!==r&&(o=(o=va(n))<0?bn(i+o,0):_n(o,i-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,o):$e(t,qe,o,!0)},qn.lowerCase=Ka,qn.lowerFirst=Qa,qn.lt=ha,qn.lte=da,qn.max=function(t){return t&&t.length?vr(t,sc,Ar):r},qn.maxBy=function(t,e){return t&&t.length?vr(t,lo(e,2),Ar):r},qn.mean=function(t){return He(t,sc)},qn.meanBy=function(t,e){return He(t,lo(e,2))},qn.min=function(t){return t&&t.length?vr(t,sc,Br):r},qn.minBy=function(t,e){return t&&t.length?vr(t,lo(e,2),Br):r},qn.stubArray=yc,qn.stubFalse=wc,qn.stubObject=function(){return{}},qn.stubString=function(){return""},qn.stubTrue=function(){return!0},qn.multiply=kc,qn.nth=function(t,e){return t&&t.length?Vr(t,va(e)):r},qn.noConflict=function(){return pe._===this&&(pe._=zt),this},qn.noop=fc,qn.now=Ps,qn.pad=function(t,e,n){t=_a(t);var r=(e=va(e))?pn(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Wi(ve(i),n)+t+Wi(me(i),n)},qn.padEnd=function(t,e,n){t=_a(t);var r=(e=va(e))?pn(t):0;return e&&r<e?t+Wi(e-r,n):t},qn.padStart=function(t,e,n){t=_a(t);var r=(e=va(e))?pn(t):0;return e&&r<e?Wi(e-r,n)+t:t},qn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),Sn(_a(t).replace(ot,""),e||0)},qn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&xo(t,e,n)&&(e=n=r),n===r&&("boolean"==typeof e?(n=e,e=r):"boolean"==typeof t&&(n=t,t=r)),t===r&&e===r?(t=0,e=1):(t=ma(t),e===r?(e=t,t=0):e=ma(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var o=kn();return _n(t+o*(e-t+ce("1e-"+((o+"").length-1))),e)}return Zr(t,e)},qn.reduce=function(t,e,n){var r=Gs(t)?Le:We,i=arguments.length<3;return r(t,lo(e,4),n,i,dr)},qn.reduceRight=function(t,e,n){var r=Gs(t)?Fe:We,i=arguments.length<3;return r(t,lo(e,4),n,i,gr)},qn.repeat=function(t,e,n){return e=(n?xo(t,e,n):e===r)?1:va(e),Jr(_a(t),e)},qn.replace=function(){var t=arguments,e=_a(t[0]);return t.length<3?e:e.replace(t[1],t[2])},qn.result=function(t,e,n){var i=-1,o=(e=_i(e,t)).length;for(o||(o=1,t=r);++i<o;){var s=null==t?r:t[Bo(e[i])];s===r&&(i=o,s=n),t=ta(s)?s.call(t):s}return t},qn.round=Ec,qn.runInContext=t,qn.sample=function(t){return(Gs(t)?Xn:Xr)(t)},qn.size=function(t){if(null==t)return 0;if(Qs(t))return la(t)?pn(t):t.length;var e=vo(t);return e==k||e==P?t.size:Rr(t).length},qn.snakeCase=Za,qn.some=function(t,e,n){var i=Gs(t)?De:si;return n&&xo(t,e,n)&&(e=r),i(t,lo(e,3))},qn.sortedIndex=function(t,e){return ai(t,e)},qn.sortedIndexBy=function(t,e,n){return ci(t,e,lo(n,2))},qn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=ai(t,e);if(r<n&&Hs(t[r],e))return r}return-1},qn.sortedLastIndex=function(t,e){return ai(t,e,!0)},qn.sortedLastIndexBy=function(t,e,n){return ci(t,e,lo(n,2),!0)},qn.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=ai(t,e,!0)-1;if(Hs(t[n],e))return n}return-1},qn.startCase=Ja,qn.startsWith=function(t,e,n){return t=_a(t),n=null==n?0:ur(va(n),0,t.length),e=fi(e),t.slice(n,n+e.length)==e},qn.subtract=Cc,qn.sum=function(t){return t&&t.length?Ge(t,sc):0},qn.sumBy=function(t,e){return t&&t.length?Ge(t,lo(e,2)):0},qn.template=function(t,e,n){var i=qn.templateSettings;n&&xo(t,e,n)&&(e=r),t=_a(t),e=ka({},e,i,to);var o,s,a=ka({},e.imports,i.imports,to),c=La(a),u=Je(a,c),l=0,f=e.interpolate||_t,p="__p += '",h=At((e.escape||_t).source+"|"+f.source+"|"+(f===X?ht:_t).source+"|"+(e.evaluate||_t).source+"|$","g"),d="//# sourceURL="+(Dt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ie+"]")+"\n";t.replace(h,(function(e,n,r,i,a,c){return r||(r=i),p+=t.slice(l,c).replace(xt,on),n&&(o=!0,p+="' +\n__e("+n+") +\n'"),a&&(s=!0,p+="';\n"+a+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=c+e.length,e})),p+="';\n";var g=Dt.call(e,"variable")&&e.variable;if(g){if(ft.test(g))throw new kt("Invalid `variable` option passed into `_.template`")}else p="with (obj) {\n"+p+"\n}\n";p=(s?p.replace(U,""):p).replace(V,"$1").replace(W,"$1;"),p="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var m=ec((function(){return Et(c,d+"return "+p).apply(r,u)}));if(m.source=p,Xs(m))throw m;return m},qn.times=function(t,e){if((t=va(t))<1||t>h)return[];var n=g,r=_n(t,g);e=lo(e),t-=g;for(var i=Ke(r,e);++n<t;)e(n);return i},qn.toFinite=ma,qn.toInteger=va,qn.toLength=ya,qn.toLower=function(t){return _a(t).toLowerCase()},qn.toNumber=wa,qn.toSafeInteger=function(t){return t?ur(va(t),-9007199254740991,h):0===t?t:0},qn.toString=_a,qn.toUpper=function(t){return _a(t).toUpperCase()},qn.trim=function(t,e,n){if((t=_a(t))&&(n||e===r))return Qe(t);if(!t||!(e=fi(e)))return t;var i=hn(t),o=hn(e);return Si(i,Xe(i,o),tn(i,o)+1).join("")},qn.trimEnd=function(t,e,n){if((t=_a(t))&&(n||e===r))return t.slice(0,dn(t)+1);if(!t||!(e=fi(e)))return t;var i=hn(t);return Si(i,0,tn(i,hn(e))+1).join("")},qn.trimStart=function(t,e,n){if((t=_a(t))&&(n||e===r))return t.replace(ot,"");if(!t||!(e=fi(e)))return t;var i=hn(t);return Si(i,Xe(i,hn(e))).join("")},qn.truncate=function(t,e){var n=30,i="...";if(ra(e)){var o="separator"in e?e.separator:o;n="length"in e?va(e.length):n,i="omission"in e?fi(e.omission):i}var s=(t=_a(t)).length;if(sn(t)){var a=hn(t);s=a.length}if(n>=s)return t;var c=n-pn(i);if(c<1)return i;var u=a?Si(a,0,c).join(""):t.slice(0,c);if(o===r)return u+i;if(a&&(c+=u.length-c),ca(o)){if(t.slice(c).search(o)){var l,f=u;for(o.global||(o=At(o.source,_a(dt.exec(o))+"g")),o.lastIndex=0;l=o.exec(f);)var p=l.index;u=u.slice(0,p===r?c:p)}}else if(t.indexOf(fi(o),c)!=c){var h=u.lastIndexOf(o);h>-1&&(u=u.slice(0,h))}return u+i},qn.unescape=function(t){return(t=_a(t))&&Q.test(t)?t.replace(G,gn):t},qn.uniqueId=function(t){var e=++Mt;return _a(t)+e},qn.upperCase=Ya,qn.upperFirst=Xa,qn.each=_s,qn.eachRight=xs,qn.first=Qo,lc(qn,function(){var t={};return xr(qn,(function(e,n){Dt.call(qn.prototype,n)||(t[n]=e)})),t}(),{chain:!1}),qn.VERSION="4.17.21",Ce(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){qn[t].placeholder=qn})),Ce(["drop","take"],(function(t,e){Wn.prototype[t]=function(n){n=n===r?1:bn(va(n),0);var i=this.__filtered__&&!e?new Wn(this):this.clone();return i.__filtered__?i.__takeCount__=_n(n,i.__takeCount__):i.__views__.push({size:_n(n,g),type:t+(i.__dir__<0?"Right":"")}),i},Wn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Ce(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;Wn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:lo(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),Ce(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Wn.prototype[t]=function(){return this[n](1).value()[0]}})),Ce(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Wn.prototype[t]=function(){return this.__filtered__?new Wn(this):this[n](1)}})),Wn.prototype.compact=function(){return this.filter(sc)},Wn.prototype.find=function(t){return this.filter(t).head()},Wn.prototype.findLast=function(t){return this.reverse().find(t)},Wn.prototype.invokeMap=Yr((function(t,e){return"function"==typeof t?new Wn(this):this.map((function(n){return jr(n,t,e)}))})),Wn.prototype.reject=function(t){return this.filter(Rs(lo(t)))},Wn.prototype.slice=function(t,e){t=va(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Wn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==r&&(n=(e=va(e))<0?n.dropRight(-e):n.take(e-t)),n)},Wn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Wn.prototype.toArray=function(){return this.take(g)},xr(Wn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),o=qn[i?"take"+("last"==e?"Right":""):e],s=i||/^find/.test(e);o&&(qn.prototype[e]=function(){var e=this.__wrapped__,a=i?[1]:arguments,c=e instanceof Wn,u=a[0],l=c||Gs(e),f=function(t){var e=o.apply(qn,Ne([t],a));return i&&p?e[0]:e};l&&n&&"function"==typeof u&&1!=u.length&&(c=l=!1);var p=this.__chain__,h=!!this.__actions__.length,d=s&&!p,g=c&&!h;if(!s&&l){e=g?e:new Wn(this);var m=t.apply(e,a);return m.__actions__.push({func:ms,args:[f],thisArg:r}),new Vn(m,p)}return d&&g?t.apply(this,a):(m=this.thru(f),d?i?m.value()[0]:m.value():m)})})),Ce(["pop","push","shift","sort","splice","unshift"],(function(t){var e=It[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);qn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(Gs(i)?i:[],t)}return this[n]((function(n){return e.apply(Gs(n)?n:[],t)}))}})),xr(Wn.prototype,(function(t,e){var n=qn[e];if(n){var r=n.name+"";Dt.call(Nn,r)||(Nn[r]=[]),Nn[r].push({name:e,func:n})}})),Nn[qi(r,2).name]=[{name:"wrapper",func:r}],Wn.prototype.clone=function(){var t=new Wn(this.__wrapped__);return t.__actions__=Ii(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Ii(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Ii(this.__views__),t},Wn.prototype.reverse=function(){if(this.__filtered__){var t=new Wn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Wn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Gs(t),r=e<0,i=n?t.length:0,o=function(t,e,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=_n(e,t+s);break;case"takeRight":t=bn(t,e-s)}}return{start:t,end:e}}(0,i,this.__views__),s=o.start,a=o.end,c=a-s,u=r?a:s-1,l=this.__iteratees__,f=l.length,p=0,h=_n(c,this.__takeCount__);if(!n||!r&&i==c&&h==c)return mi(t,this.__actions__);var d=[];t:for(;c--&&p<h;){for(var g=-1,m=t[u+=e];++g<f;){var v=l[g],y=v.iteratee,w=v.type,b=y(m);if(2==w)m=b;else if(!b){if(1==w)continue t;break t}}d[p++]=m}return d},qn.prototype.at=vs,qn.prototype.chain=function(){return gs(this)},qn.prototype.commit=function(){return new Vn(this.value(),this.__chain__)},qn.prototype.next=function(){this.__values__===r&&(this.__values__=ga(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?r:this.__values__[this.__index__++]}},qn.prototype.plant=function(t){for(var e,n=this;n instanceof Un;){var i=qo(n);i.__index__=0,i.__values__=r,e?o.__wrapped__=i:e=i;var o=i;n=n.__wrapped__}return o.__wrapped__=t,e},qn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Wn){var e=t;return this.__actions__.length&&(e=new Wn(this)),(e=e.reverse()).__actions__.push({func:ms,args:[rs],thisArg:r}),new Vn(e,this.__chain__)}return this.thru(rs)},qn.prototype.toJSON=qn.prototype.valueOf=qn.prototype.value=function(){return mi(this.__wrapped__,this.__actions__)},qn.prototype.first=qn.prototype.head,ee&&(qn.prototype[ee]=function(){return this}),qn}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(pe._=mn,define((function(){return mn}))):de?((de.exports=mn)._=mn,he._=mn):pe._=mn}.call(this),n.exports}.call({});Ce=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};var Ae,Pe={},Oe="object"==typeof t&&t&&t.Object===Object&&t,Ie="object"==typeof self&&self&&self.Object===Object&&self,je=Oe||Ie||Function("return this")();Ae=function(){return Pe.Date.now()};var Ne,Le=/\s/;var Fe=function(t){for(var e=t.length;e--&&Le.test(t.charAt(e)););return e},De=/^\s+/;Ne=function(t){return t?t.slice(0,Fe(t)+1).replace(De,""):t};var Me,Re,$e=Me=(Pe=je).Symbol,Be=Object.prototype,ze=Be.hasOwnProperty,qe=Be.toString,He=$e?$e.toStringTag:void 0;Re=function(t){var e=ze.call(t,He),n=t[He];try{t[He]=void 0;var r=!0}catch(t){}var i=qe.call(t);return r&&(e?t[He]=n:delete t[He]),i};var Ue=Object.prototype.toString;var Ve=Re,We=function(t){return Ue.call(t)},Ge=Me?Me.toStringTag:void 0;var Ke=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Ge&&Ge in Object(t)?Ve(t):We(t)},Qe=function(t){return null!=t&&"object"==typeof t};var Ze=Ne,Je=Ce,Ye=function(t){return"symbol"==typeof t||Qe(t)&&"[object Symbol]"==Ke(t)},Xe=/^[-+]0x[0-9a-f]+$/i,tn=/^0b[01]+$/i,en=/^0o[0-7]+$/i,nn=parseInt;var rn=Ce,on=Ae,sn=function(t){if("number"==typeof t)return t;if(Ye(t))return NaN;if(Je(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Je(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Ze(t);var n=tn.test(t);return n||en.test(t)?nn(t.slice(2),n?2:8):Xe.test(t)?NaN:+t},an=Math.max,cn=Math.min;var un=e((function(t,e,n){var r,i,o,s,a,c,u=0,l=!1,f=!1,p=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function h(e){var n=r,o=i;return r=i=void 0,u=e,s=t.apply(o,n)}function d(t){return u=t,a=setTimeout(m,e),l?h(t):s}function g(t){var n=t-c;return void 0===c||n>=e||n<0||f&&t-u>=o}function m(){var t=on();if(g(t))return v(t);a=setTimeout(m,function(t){var n=e-(t-c);return f?cn(n,o-(t-u)):n}(t))}function v(t){return a=void 0,p&&r?h(t):(r=i=void 0,s)}function y(){var t=on(),n=g(t);if(r=arguments,i=this,c=t,n){if(void 0===a)return d(c);if(f)return clearTimeout(a),a=setTimeout(m,e),h(c)}return void 0===a&&(a=setTimeout(m,e)),s}return e=sn(e)||0,rn(n)&&(l=!!n.leading,o=(f="maxWait"in n)?an(sn(n.maxWait)||0,e):o,p="trailing"in n?!!n.trailing:p),y.cancel=function(){void 0!==a&&clearTimeout(a),u=0,r=c=i=a=void 0},y.flush=function(){return void 0===a?s:v(on())},y}));const ln=h.DiagnosticCategory;function fn(t){return{line:t.row+1,offset:t.column+1}}function pn(t){return new m(t.line-1,t.offset-1)}function hn(t){return dn(t.start,t.end)}function dn(t,e){return new v(pn(t),pn(e))}function gn(t){const e=mn(t),n=e.formatCodeOptions;return{formatCodeOptions:{indentSize:atom.config.get("editor.tabLength"),tabSize:atom.config.get("editor.tabLength"),...n},compileOnSave:!!e.compileOnSave,preferences:e.preferences?e.preferences:{}}}function mn(t){".json"!==C(t)&&(t=`${t}.json`);let{config:e}=h.readConfigFile(t,(t=>h.sys.readFile(t)));if(void 0===e)return{};if("string"==typeof e.extends){const n=mn(T(A(t),e.extends));e=Object.assign({},n,e)}return e}function vn(t){return{label:wn(t.prefixDisplayParts)+t.parameters.map((t=>wn(t.displayParts))).join(wn(t.separatorDisplayParts))+wn(t.suffixDisplayParts),documentation:wn(t.documentation),parameters:t.parameters.map(yn)}}function yn(t){return{label:wn(t.displayParts),documentation:wn(t.documentation)}}function wn(t){return t.map((t=>t.text)).join("")}const bn=function(){let t;return function(e,n){if(void 0===e)return!0;void 0===t&&(t=new Map(Object.values(h.Diagnostics).map((t=>[t.code,t.category]))));const r=t.get(e);return void 0===r||r===n}}();function _n(t,e){const n=new Error("Max time reached");return atom.notifications.addError(`${t} took more than ${e} seconds to complete`,{dismissable:!0,description:`${t} took too long to complete and was terminated.`,stack:n.stack}),n}async function xn(t,e){const n=function(t,e){const n=performance.now();let r=n;return async function(){const i=performance.now();return i-r>t&&(await new Promise(s),r=i),i-n<=e}}(100,5e3),r=new y;try{const i=atom.grammars.grammarForId(e),o=atom.grammars.languageModeForGrammarAndBuffer(i,r);r.setLanguageMode(o),r.setText(t);const s=r.getEndPosition();o.startTokenizing&&o.startTokenizing(),await async function(t){return new Promise((e=>{if(t.fullyTokenized||t.tree)e(void 0);else if(t.onDidTokenize){const n=t.onDidTokenize((()=>{n.dispose(),e(void 0)}))}else e(void 0)}))}(o);const a=o.buildHighlightIterator();if(a.getOpenScopeIds&&a.getCloseScopeIds){let t={row:0,column:0};a.seek(t);const e=[];for(;t.row<s.row||t.row===s.row&&t.column<=s.column;){e.push(...a.getCloseScopeIds().map((()=>"</span>")),...a.getOpenScopeIds().map((t=>`<span class="${o.classNameForScopeId(t)}">`))),a.moveToSuccessor();const i=a.getPosition();if(e.push(r.getTextInRange([t,i]).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")),!await n()){console.error(_n("Atom-TypeScript: Highlighter",5));break}t=i}return e.join("")}return t}finally{r.destroy()}}function Sn(t){return void 0!==t&&An(C(t))}function kn(){const t=atom.config.get("atom-typescript"),e=t.tsSyntaxScopes;return t.allowJS&&e.push(...t.jsSyntaxScopes),e}function En(t){return Sn(t.getPath())&&Cn(t)}function Cn(t){const[e]=t.getRootScopeDescriptor().getScopesArray();return kn().includes(e)}function Tn(t){return null!=t}const An=function(t,e){const n=Te.memoize((n=>Te.throttle(t,e,{leading:!0})));return t=>n(t)(t)}((t=>{const e=atom.config.get("atom-typescript"),n=e.tsFileExtensions;if(e.allowJS&&n.push(...e.jsFileExtensions),e.extensionsFromGrammars){var r;const t=null!==(r=atom.config.get("core.customFileTypes"))&&void 0!==r?r:{},e=kn();n.push(...[].concat(...e.map((t=>{var e;return null===(e=atom.grammars.grammarForScopeName(t))||void 0===e?void 0:e.fileTypes})),...e.map((e=>t[e]))).filter(Tn).map((t=>`.${t}`)))}return n.includes(t)}),5e3);function Pn(t,e){const n=t.getPath();if(void 0!==n){return{file:n,...e?fn(e):function(t){const e=t.getCursorBufferPosition();return{line:e.row+1,offset:e.column+1}}(t)}}}function On(t){const e=t.dataset.startLine;return void 0!==e?parseInt(e,10)-1:0}function In(t){const e=t.dataset.endLine;return void 0!==e?parseInt(e,10)-1:0}function jn(t,e,n){const r=n.querySelectorAll(":scope > ol > li.node");if(0===r.length)return;for(const n of Array.from(r)){const r=On(n),i=In(n);if(isFinite(r)&&isFinite(i)){if(t>=r&&e<=i){const r=jn(t,e,n);return r||n}if(isFinite(i)&&e<i)break}const o=jn(t,e,n);if(o)return o}const i=On(n),o=In(n);return isFinite(i)&&isFinite(o)&&t>=i&&e<=o?n:void 0}function Nn(t){return t.spans.length>0?t.spans[0].start.line-1:0}function Ln(t,e){if(!t||!e)return t===e;if(t.text===e.text){if(e.collapsed&&(t.collapsed=!0),t.childItems&&e.childItems){let n,r;for(let i=0,o=t.childItems.length;i<o;++i)n=t.childItems[i],r=e.childItems[i],Ln(n,r)||(r=e.childItems[i+1],Ln(n,r)||(r=e.childItems[i-1],Ln(n,r)))}return!0}return!1}function Fn(t){if(null!==t&&t.childItems){if(t.childItems.length<1)return void(t.childItems=void 0);t.childItems.sort(((t,e)=>Nn(t)-Nn(e)));for(const e of t.childItems)Fn(e)}}class Dn{constructor(t){this.props=t,Ft.initialize(this)}async update(t){this.props={...this.props,...t},await Ft.update(this)}async destroy(){await Ft.destroy(this)}render(){var t,e,n,r;const i=this.props.navTree,{ctrl:o}=this.props,s=(i.childItems?"nested-":"")+"item"+(i.collapsed?" collapsed":" expanded"),a=this.getStyles();return Ft.dom("li",{className:"node entry exanded list-"+s,dataset:{startLine:null===(t=this.props.navTree.spans[0])||void 0===t||null===(e=t.start)||void 0===e?void 0:e.line,endLine:null===(n=this.props.navTree.spans[0])||void 0===n||null===(r=n.end)||void 0===r?void 0:r.line}},Ft.dom("div",{className:"header list-item",on:{click:t=>this.entryClicked(t,i)}},Ft.dom("span",{className:a},i.text)),Ft.dom("ol",{className:"entries list-tree"},i.childItems?i.childItems.map((t=>Ft.dom(Dn,{navTree:t,ctrl:o}))):null))}getStyles(){const{kind:t}=this.props.navTree;let e=`icon icon-${t}`;const{kindModifiers:n}=this.props.navTree;return n&&(e+=" "+n.split(/[, ]/).map((t=>`modifier-${t.trim()}`)).join(" ")),e}entryClicked(t,e){t.stopPropagation();(function(t,e){return!!t.childItems&&e.target===e.currentTarget})(e,t)?(e.collapsed=!e.collapsed,Ee(Ft.update(this))):this.props.ctrl.gotoNode(e)}}class Mn{constructor(t){this.props=t,this.subscriptions=new g,this.longLineLength=4e3,this.largeFileLineCount=500,this.loadNavTree=async()=>{if(!this.editor)return;if(!this.getClient)return;const t=this.editor.getPath();if(void 0!==t)try{const e=await this.getClient(t),n=(await e.execute("navtree",{file:t})).body;n&&(this.setNavTree(n),await Ft.update(this))}catch(e){console.error(e,t)}},this.selectAtCursorLine=({newBufferPosition:t})=>{var e,n;const r=this.firstNode();if(!r)return;const i=t.row,o=null!==(e=null===(n=jn(i,i,r))||void 0===n?void 0:n.querySelector(".header"))&&void 0!==e?e:void 0,s=this.getSelectedNode();o!==s&&(s&&s.classList.remove("selected"),o&&o.classList.add("selected"))},this.subscribeToEditor=async t=>{if(this.editorScrolling&&this.editorScrolling.dispose(),this.editorChanging&&this.editorChanging.dispose(),!t||!En(t))return this.update({navTree:null});this.editor=t,await this.loadNavTree();const e=this.lineCountIfLarge(t);atom.config.get("atom-typescript.largeFileNoFollowCursor")&&0!==e||(this.editorScrolling=t.onDidChangeCursorPosition(this.selectAtCursorLine)),this.editorChanging=t.onDidStopChanging(0===e?this.loadNavTree:un(this.loadNavTree,Math.max(e/5,300)))},Fn(t.navTree),Ft.initialize(this),this.subscriptions.add(atom.workspace.observeActiveTextEditor(this.subscribeToEditor),atom.commands.add("atom-text-editor.typescript-editor",{"typescript:reveal-in-semantic-view":{description:"Reveal the symbol under the text cursor in semantic view",didDispatch:t=>{const e=t.currentTarget.getModel();this.selectAtCursorLine({newBufferPosition:e.getCursorBufferPosition()})}}}),atom.config.observe("atom-typescript.longLineLength",(t=>{t>0&&(this.longLineLength=t)})),atom.config.observe("atom-typescript.largeFileLineCount",(t=>{t>0&&(this.largeFileLineCount=t)})),atom.config.observe("linter-ui-default.longLineLength",(t=>{atom.config.get("atom-typescript.longLineLength")>0||"number"==typeof t&&(this.longLineLength=t)})),atom.config.observe("linter-ui-default.largeFileLineCount",(t=>{atom.config.get("atom-typescript.largeFileLineCount")>0||"number"==typeof t&&(this.largeFileLineCount=t/6)})))}async update(t){void 0!==t.navTree&&this.setNavTree(t.navTree),this.props={...this.props,...t},await Ft.update(this)}async destroy(){this.editorScrolling&&this.editorScrolling.dispose(),this.editorChanging&&this.editorChanging.dispose(),this.editorScrolling=void 0,this.editorChanging=void 0,this.subscriptions.dispose(),await Ft.destroy(this)}async setGetClient(t){this.getClient=t,await this.loadNavTree()}getSelectedNode(){var t;return null!==(t=this.element.querySelector(".header.selected"))&&void 0!==t?t:void 0}clearSelection(){const t=this.element.querySelectorAll(".header.selected");for(let e=0;e<t.length;e+=1)t.item(e).classList.remove("selected")}markSelection(t){if(this.clearSelection(),!t)return;const e=t.querySelector(".header");e&&e.classList.add("selected")}firstNode(){var t;return null!==(t=this.element.querySelector("li.node"))&&void 0!==t?t:void 0}render(){const t=this.props.navTree?Ft.dom(Dn,{navTree:this.props.navTree,ctrl:this}):null;return Ft.dom("div",{className:"atomts atomts-semantic-view native-key-bindings"},Ft.dom("ol",{className:"list-tree has-collapsable-children focusable-panel"},t))}readAfterUpdate(){const t=this.element.querySelector(".selected");t&&this.scrollTo(t)}gotoNode(t){if(!this.editor)return;const e=Nn(t),n=function(t){return t.spans.length>0?t.spans[0].start.offset-1:0}(t);this.editor.setCursorBufferPosition([e,n])}getCursorLine(){return this.editor?this.editor.getLastCursor().getBufferRow():void 0}setNavTree(t){if(Fn(t),Te.isEqual(t,this.props.navTree))return;Ln(t,this.props.navTree),this.props.navTree=t;const e=this.firstNode();if(e){const t=this.getCursorLine();void 0!==t&&this.markSelection(jn(t,t,e))}}scrollTo(t){const e=t;"function"==typeof e.scrollIntoViewIfNeeded?e.scrollIntoViewIfNeeded():e.scrollIntoView()}lineCountIfLarge(t){const e=t.getLineCount();if(e>=this.largeFileLineCount)return e;{const n=t.getBuffer();for(let t=0,r=e;t<r;t++)if(n.lineLengthForRow(t)>this.longLineLength)return this.longLineLength/100;return 0}}}class Rn{constructor(t){this.comp=new Mn({navTree:t.navTree})}static create(t){return Rn.instance||(Rn.instance=new Rn(t)),Rn.instance}get element(){return this.comp.element}async setGetClient(t){await this.comp.setGetClient(t),await this.comp.update({})}getTitle(){return"TypeScript"}getURI(){return"atom-typescript://semantic-view"}async destroy(){Rn.instance=null,await this.comp.destroy()}getDefaultLocation(){return"right"}getAllowedLocations(){return["left","right"]}serialize(){return{deserializer:"atomts-semantic-view/SemanticView",data:{navTree:this.comp.props.navTree}}}}Rn.instance=null;var $n;$n=function(t,e){return Bn(t,e)};var Bn=function(t,e){return t?zn(t,e):new qn(e)};$n.createStream=Bn;function zn(t,e){if(!t)throw new Error("expected readStream");if(!t.readable)throw new Error("readStream must be readable");var n=new qn(e);return t.pipe(n),n}function qn(t){f.call(this,t),t=t||{},this._readableState.objectMode=!0,this._lineBuffer=[],this._keepEmptyLines=t.keepEmptyLines||!1,this._lastChunkEndedWithCR=!1;var e=this;this.on("pipe",(function(t){e.encoding||t instanceof p&&(e.encoding=t._readableState.encoding)}))}$n.createLineStream=function(t){return console.log("WARNING: byline#createLineStream is deprecated and will be removed soon"),zn(t)},$n.LineStream=qn,u(qn,f),qn.prototype._transform=function(t,e,n){e=e||"utf8",Buffer.isBuffer(t)&&("buffer"==e?(t=t.toString(),e="utf8"):t=t.toString(e)),this._chunkEncoding=e;var r=t.split(/\r\n|[\n\v\f\r\x85\u2028\u2029]/g);this._lastChunkEndedWithCR&&"\n"==t[0]&&r.shift(),this._lineBuffer.length>0&&(this._lineBuffer[this._lineBuffer.length-1]+=r[0],r.shift()),this._lastChunkEndedWithCR="\r"==t[t.length-1],this._lineBuffer=this._lineBuffer.concat(r),this._pushBuffer(e,1,n)},qn.prototype._pushBuffer=function(t,e,n){for(;this._lineBuffer.length>e;){var r=this._lineBuffer.shift();if((this._keepEmptyLines||r.length>0)&&!this.push(this._reencode(r,t))){var i=this;return void s((function(){i._pushBuffer(t,e,n)}))}}n()},qn.prototype._flush=function(t){this._pushBuffer(this._chunkEncoding,0,t)},qn.prototype._reencode=function(t,e){return this.encoding&&this.encoding!=e?new Buffer(t,e).toString(this.encoding):this.encoding?t:new Buffer(t,e)};var Hn=e($n);class Un{constructor(t){this.reportBusyWhile=t,this.callbacks=new Map,this.interval=0}async add(t,e){try{const n=new Promise(((n,r)=>{this.callbacks.set(t,{command:e,resolve:n,reject:r,started:Date.now()})}));return 0===this.interval&&(this.interval=window.setInterval((()=>{process.activateUvLoop()}),100)),await this.reportBusyWhile(e,(()=>n))}finally{this.callbacks.delete(t),0!==this.interval&&0===this.callbacks.size&&(clearInterval(this.interval),this.interval=0)}}rejectAll(t){for(const{reject:e}of this.callbacks.values())e(t);this.callbacks.clear()}resolve(t){const e=this.callbacks.get(t.request_seq);e?(window.atom_typescript_debug&&console.log("received response for",t.command,"in",Date.now()-e.started,"ms","with data",t.body),t.success?e.resolve(t):e.reject(new Error(t.message))):console.warn("unexpected response:",t)}resolveMS(t){const e=this.callbacks.get(t.request_seq);e?(window.atom_typescript_debug&&console.log(`received requestCompleted event for multistep command ${e.command} in ${Date.now()-e.started} ms`),e.resolve(void 0)):console.warn("unexpected requestCompleted event:",t)}error(t,e){const n=this.callbacks.get(t);n?n.reject(e):console.error(e)}}const Vn=new Set(Object.keys({compileOnSaveAffectedFileList:!0,compileOnSaveEmitFile:!0,completionEntryDetails:!0,completions:!0,completionInfo:!0,configure:!0,definition:!0,format:!0,getCodeFixes:!0,getSupportedCodeFixes:!0,documentHighlights:!0,projectInfo:!0,quickinfo:!0,references:!0,reload:!0,rename:!0,navtree:!0,navto:!0,getApplicableRefactors:!0,getEditsForRefactor:!0,organizeImports:!0,signatureHelp:!0,getEditsForFileRename:!0,applyCodeActionCommand:!0})),Wn=new Set(Object.keys({geterr:!0,geterrForProject:!0})),Gn=new Set(Object.keys({configFileDiag:!0,semanticDiag:!0,suggestionDiag:!0,syntaxDiag:!0}));class Kn{constructor(t,e,n){this.tsServerPath=t,this.version=e,this.reportBusyWhile=n,this.emitter=new b,this.seq=0,this.lastStderrOutput="",this.on=this.emitter.on.bind(this.emitter),this.exitHandler=(t,e=!0)=>{if(this.callbacks.rejectAll(t),e&&console.error("tsserver: ",t),this.server=void 0,this.emitter.emit("terminated"),e){let e=t.message;this.lastStderrOutput&&(e=`Last output from tsserver:\n${this.lastStderrOutput}\n\n${e}`),atom.notifications.addError("TypeScript server quit unexpectedly",{detail:e,stack:t.stack,dismissable:!0})}},this.onMessage=t=>{"response"===t.type?this.callbacks.resolve(t):this.onEvent(t)};const[r,i]=e.split(".").slice(0,2).map((t=>parseInt(t,10)));this.multistepSupported=r>2||2===r&&i>=2,this.callbacks=new Un(this.reportBusyWhile),this.server=this.startServer()}async execute(t,...e){this.server||(this.server=this.startServer(),this.emitter.emit("restarted"));const n={seq:this.seq++,command:t,arguments:e[0]};let r;window.atom_typescript_debug&&console.log("sending request",n),(function(t){return Vn.has(t)}(t)||this.multistepSupported&&function(t){return Wn.has(t)}(t))&&(r=this.callbacks.add(n.seq,t));try{if(!this.server.stdin)throw new Error("Server stdin is missing");this.server.stdin.write(JSON.stringify(n)+"\n")}catch(t){this.callbacks.error(n.seq,t)}return r}async restartServer(){if(this.server){const t=this.server,e=setTimeout((()=>t.kill()),1e4);await Promise.all([this.execute("exit"),new Promise((t=>{const e=this.emitter.once("terminated",(()=>{e.dispose(),t()}))}))]),clearTimeout(e)}this.server||(this.server=this.startServer(),this.emitter.emit("restarted"))}startServer(){window.atom_typescript_debug&&console.log("starting",this.tsServerPath);const t=function(t){const e=atom.config.get("atom-typescript").locale,n=e?["--locale",e]:[];return new _({command:t,args:n}).process}(this.tsServerPath);if(!t)throw new Error("ChildProcess failed to start");const e=this.exitHandler;if(t.once("error",e),t.once("exit",((t,n)=>{0===t?e(new Error("Server stopped normally"),!1):null!==t?e(new Error(`exited with code: ${t}`)):null!==n&&e(new Error(`terminated on signal: ${n}`))})),!t.stdout)throw new Error("ChildProcess stdout missing");if(!t.stderr)throw new Error("ChildProcess stderr missing");var n;return(n=t.stdout,n.pipe(Hn()).pipe(new Qn)).on("data",this.onMessage),t.stderr.on("data",(t=>{console.warn("tsserver stderr:",this.lastStderrOutput=t.toString())})),t}onEvent(t){var e;window.atom_typescript_debug&&console.log("received event",t),t.body&&(e=t.event,Gn.has(e)?this.emitter.emit(t.event,t.body):"requestCompleted"===t.event&&this.callbacks.resolveMS(t.body))}}class Qn extends f{constructor(){super({objectMode:!0})}_transform(t,e,n){const r=t.toString();try{r.startsWith("{")?this.push(JSON.parse(r)):r.startsWith("Content-Length:")||console.warn(r)}catch(t){console.error("client: failed to parse: ",r)}finally{n(void 0)}}}function Zn(t,e){void 0===e&&(e=!1);var n=t.length,r=0,i="",o=0,s=16,a=0,c=0,u=0,l=0,f=0;function p(e,n){for(var i=0,o=0;i<e||!n;){var s=t.charCodeAt(r);if(s>=48&&s<=57)o=16*o+s-48;else if(s>=65&&s<=70)o=16*o+s-65+10;else{if(!(s>=97&&s<=102))break;o=16*o+s-97+10}r++,i++}return i<e&&(o=-1),o}function h(){if(i="",f=0,o=r,c=a,l=u,r>=n)return o=n,s=17;var e=t.charCodeAt(r);if(Jn(e)){do{r++,i+=String.fromCharCode(e),e=t.charCodeAt(r)}while(Jn(e));return s=15}if(Yn(e))return r++,i+=String.fromCharCode(e),13===e&&10===t.charCodeAt(r)&&(r++,i+="\n"),a++,u=r,s=14;switch(e){case 123:return r++,s=1;case 125:return r++,s=2;case 91:return r++,s=3;case 93:return r++,s=4;case 58:return r++,s=6;case 44:return r++,s=5;case 34:return r++,i=function(){for(var e="",i=r;;){if(r>=n){e+=t.substring(i,r),f=2;break}var o=t.charCodeAt(r);if(34===o){e+=t.substring(i,r),r++;break}if(92!==o){if(o>=0&&o<=31){if(Yn(o)){e+=t.substring(i,r),f=2;break}f=6}r++}else{if(e+=t.substring(i,r),++r>=n){f=2;break}switch(t.charCodeAt(r++)){case 34:e+='"';break;case 92:e+="\\";break;case 47:e+="/";break;case 98:e+="\b";break;case 102:e+="\f";break;case 110:e+="\n";break;case 114:e+="\r";break;case 116:e+="\t";break;case 117:var s=p(4,!0);s>=0?e+=String.fromCharCode(s):f=4;break;default:f=5}i=r}}return e}(),s=10;case 47:var h=r-1;if(47===t.charCodeAt(r+1)){for(r+=2;r<n&&!Yn(t.charCodeAt(r));)r++;return i=t.substring(h,r),s=12}if(42===t.charCodeAt(r+1)){r+=2;for(var g=n-1,m=!1;r<g;){var v=t.charCodeAt(r);if(42===v&&47===t.charCodeAt(r+1)){r+=2,m=!0;break}r++,Yn(v)&&(13===v&&10===t.charCodeAt(r)&&r++,a++,u=r)}return m||(r++,f=1),i=t.substring(h,r),s=13}return i+=String.fromCharCode(e),r++,s=16;case 45:if(i+=String.fromCharCode(e),++r===n||!Xn(t.charCodeAt(r)))return s=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return i+=function(){var e=r;if(48===t.charCodeAt(r))r++;else for(r++;r<t.length&&Xn(t.charCodeAt(r));)r++;if(r<t.length&&46===t.charCodeAt(r)){if(!(++r<t.length&&Xn(t.charCodeAt(r))))return f=3,t.substring(e,r);for(r++;r<t.length&&Xn(t.charCodeAt(r));)r++}var n=r;if(r<t.length&&(69===t.charCodeAt(r)||101===t.charCodeAt(r)))if((++r<t.length&&43===t.charCodeAt(r)||45===t.charCodeAt(r))&&r++,r<t.length&&Xn(t.charCodeAt(r))){for(r++;r<t.length&&Xn(t.charCodeAt(r));)r++;n=r}else f=3;return t.substring(e,n)}(),s=11;default:for(;r<n&&d(e);)r++,e=t.charCodeAt(r);if(o!==r){switch(i=t.substring(o,r)){case"true":return s=8;case"false":return s=9;case"null":return s=7}return s=16}return i+=String.fromCharCode(e),r++,s=16}}function d(t){if(Jn(t)||Yn(t))return!1;switch(t){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}return{setPosition:function(t){r=t,i="",o=0,s=16,f=0},getPosition:function(){return r},scan:e?function(){var t;do{t=h()}while(t>=12&&t<=15);return t}:h,getToken:function(){return s},getTokenValue:function(){return i},getTokenOffset:function(){return o},getTokenLength:function(){return r-o},getTokenStartLine:function(){return c},getTokenStartCharacter:function(){return o-l},getTokenError:function(){return f}}}function Jn(t){return 32===t||9===t||11===t||12===t||160===t||5760===t||t>=8192&&t<=8203||8239===t||8287===t||12288===t||65279===t}function Yn(t){return 10===t||13===t||8232===t||8233===t}function Xn(t){return t>=48&&t<=57}var tr;function er(t,e,n){void 0===n&&(n=tr.DEFAULT);var r=Zn(t,!1);function i(t){return t?function(){return t(r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter())}:function(){return!0}}function o(t){return t?function(e){return t(e,r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter())}:function(){return!0}}var s=i(e.onObjectBegin),a=o(e.onObjectProperty),c=i(e.onObjectEnd),u=i(e.onArrayBegin),l=i(e.onArrayEnd),f=o(e.onLiteralValue),p=o(e.onSeparator),h=i(e.onComment),d=o(e.onError),g=n&&n.disallowComments,m=n&&n.allowTrailingComma;function v(){for(;;){var t=r.scan();switch(r.getTokenError()){case 4:y(14);break;case 5:y(15);break;case 3:y(13);break;case 1:g||y(11);break;case 2:y(12);break;case 6:y(16)}switch(t){case 12:case 13:g?y(10):h();break;case 16:y(1);break;case 15:case 14:break;default:return t}}}function y(t,e,n){if(void 0===e&&(e=[]),void 0===n&&(n=[]),d(t),e.length+n.length>0)for(var i=r.getToken();17!==i;){if(-1!==e.indexOf(i)){v();break}if(-1!==n.indexOf(i))break;i=v()}}function w(t){var e=r.getTokenValue();return t?f(e):a(e),v(),!0}function b(){switch(r.getToken()){case 3:return function(){u(),v();for(var t=!1;4!==r.getToken()&&17!==r.getToken();){if(5===r.getToken()){if(t||y(4,[],[]),p(","),v(),4===r.getToken()&&m)break}else t&&y(6,[],[]);b()||y(4,[],[4,5]),t=!0}return l(),4!==r.getToken()?y(8,[4],[]):v(),!0}();case 1:return function(){s(),v();for(var t=!1;2!==r.getToken()&&17!==r.getToken();){if(5===r.getToken()){if(t||y(4,[],[]),p(","),v(),2===r.getToken()&&m)break}else t&&y(6,[],[]);(10!==r.getToken()?(y(3,[],[2,5]),0):(w(!1),6===r.getToken()?(p(":"),v(),b()||y(4,[],[2,5])):y(5,[],[2,5]),1))||y(4,[],[2,5]),t=!0}return c(),2!==r.getToken()?y(7,[2],[]):v(),!0}();case 10:return w(!0);default:return function(){switch(r.getToken()){case 11:var t=r.getTokenValue(),e=Number(t);isNaN(e)&&(y(2),e=0),f(e);break;case 7:f(null);break;case 8:f(!0);break;case 9:f(!1);break;default:return!1}return v(),!0}()}}return v(),17===r.getToken()?!!n.allowEmptyContent||(y(4,[],[]),!1):b()?(17!==r.getToken()&&y(9,[],[]),!0):(y(4,[],[]),!1)}(tr||(tr={})).DEFAULT={allowTrailingComma:!1};var nr,rr,ir,or,sr,ar,cr,ur,lr,fr,pr,hr=function(t,e,n){void 0===e&&(e=[]),void 0===n&&(n=tr.DEFAULT);var r=null,i=[],o=[];function s(t){Array.isArray(i)?i.push(t):null!==r&&(i[r]=t)}return er(t,{onObjectBegin:function(){var t={};s(t),o.push(i),i=t,r=null},onObjectProperty:function(t){r=t},onObjectEnd:function(){i=o.pop()},onArrayBegin:function(){var t=[];s(t),o.push(i),i=t,r=null},onArrayEnd:function(){i=o.pop()},onLiteralValue:s,onError:function(t,n,r){e.push({error:t,offset:n,length:r})}},n),i[0]},dr=nr=function(){var t=Error.prepareStackTrace;Error.prepareStackTrace=function(t,e){return e};var e=(new Error).stack;return Error.prepareStackTrace=t,e[2].getFileName()},gr=!1;function mr(){ir={},or="win32"===process.platform,sr=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,ar=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,(cr={}).parse=function(t){if("string"!=typeof t)throw new TypeError("Parameter 'pathString' must be a string, not "+typeof t);var e,n,r,i,o,s=(e=t,n=sr.exec(e),r=(n[1]||"")+(n[2]||""),i=n[3]||"",o=ar.exec(i),[r,o[1],o[2],o[3]]);if(!s||4!==s.length)throw new TypeError("Invalid path '"+t+"'");return{root:s[0],dir:s[0]+s[1].slice(0,-1),base:s[2],ext:s[3],name:s[2].slice(0,s[2].length-s[3].length)}},ur=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,(lr={}).parse=function(t){if("string"!=typeof t)throw new TypeError("Parameter 'pathString' must be a string, not "+typeof t);var e,n=(e=t,ur.exec(e).slice(1));if(!n||4!==n.length)throw new TypeError("Invalid path '"+t+"'");return n[1]=n[1]||"",n[2]=n[2]||"",n[3]=n[3]||"",{root:n[0],dir:n[0]+n[1].slice(0,-1),base:n[2],ext:n[3],name:n[2].slice(0,n[2].length-n[3].length)}},ir=or?cr.parse:lr.parse,fr=lr.parse,ir.posix=fr,pr=cr.parse,ir.win32=pr}var vr,yr,wr=L||(gr||(gr=!0,mr()),ir),br=function(t,e){var n="/";/^([A-Za-z]:)/.test(t)?n="":/^\\\\/.test(t)&&(n="\\\\");for(var r=[t],i=wr(t);i.dir!==r[r.length-1];)r.push(i.dir),i=wr(i.dir);return r.reduce((function(t,r){return t.concat(e.map((function(t){return I(n,r,t)})))}),[])},_r=rr=function(t,e,n){var r=e&&e.moduleDirectory?[].concat(e.moduleDirectory):["node_modules"];if(e&&"function"==typeof e.paths)return e.paths(n,t,(function(){return br(t,r)}),e);var i=br(t,r);return e&&e.paths?i.concat(e.paths):i},xr=vr=function(t,e){return e||{}},Sr=Array.prototype.slice,kr=Object.prototype.toString,Er=function(t){var e=this;if("function"!=typeof e||"[object Function]"!==kr.call(e))throw new TypeError("Function.prototype.bind called on incompatible "+e);for(var n,r=Sr.call(arguments,1),i=function(){if(this instanceof n){var i=e.apply(this,r.concat(Sr.call(arguments)));return Object(i)===i?i:this}return e.apply(t,r.concat(Sr.call(arguments)))},o=Math.max(0,e.length-r.length),s=[],a=0;a<o;a++)s.push("$"+a);if(n=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this,arguments); }")(i),e.prototype){var c=function(){};c.prototype=e.prototype,n.prototype=new c,c.prototype=null}return n},Cr=(Function.prototype.bind||Er).call(Function.call,Object.prototype.hasOwnProperty);function Tr(t,e){for(var n=t.split("."),r=e.split(" "),i=r.length>1?r[0]:"=",o=(r.length>1?r[1]:r[0]).split("."),s=0;s<3;++s){var a=parseInt(n[s]||0,10),c=parseInt(o[s]||0,10);if(a!==c)return"<"===i?a<c:">="===i&&a>=c}return">="===i}function Ar(t,e){var n=e.split(/ ?&& ?/);if(0===n.length)return!1;for(var r=0;r<n.length;++r)if(!Tr(t,n[r]))return!1;return!0}var Pr,Or=JSON.parse('{"assert":true,"assert/strict":">= 15","async_hooks":">= 8","buffer_ieee754":"< 0.9.7","buffer":true,"child_process":true,"cluster":true,"console":true,"constants":true,"crypto":true,"_debug_agent":">= 1 && < 8","_debugger":"< 8","dgram":true,"diagnostics_channel":">= 15.1","dns":true,"dns/promises":">= 15","domain":">= 0.7.12","events":true,"freelist":"< 6","fs":true,"fs/promises":[">= 10 && < 10.1",">= 14"],"_http_agent":">= 0.11.1","_http_client":">= 0.11.1","_http_common":">= 0.11.1","_http_incoming":">= 0.11.1","_http_outgoing":">= 0.11.1","_http_server":">= 0.11.1","http":true,"http2":">= 8.8","https":true,"inspector":">= 8.0.0","_linklist":"< 8","module":true,"net":true,"node-inspect/lib/_inspect":">= 7.6.0 && < 12","node-inspect/lib/internal/inspect_client":">= 7.6.0 && < 12","node-inspect/lib/internal/inspect_repl":">= 7.6.0 && < 12","os":true,"path":true,"path/posix":">= 15.3","path/win32":">= 15.3","perf_hooks":">= 8.5","process":">= 1","punycode":true,"querystring":true,"readline":true,"repl":true,"smalloc":">= 0.11.5 && < 3","_stream_duplex":">= 0.9.4","_stream_transform":">= 0.9.4","_stream_wrap":">= 1.4.1","_stream_passthrough":">= 0.9.4","_stream_readable":">= 0.9.4","_stream_writable":">= 0.9.4","stream":true,"stream/promises":">= 15","string_decoder":true,"sys":[">= 0.6 && < 0.7",">= 0.8"],"timers":true,"timers/promises":">= 15","_tls_common":">= 0.11.13","_tls_legacy":">= 0.11.3 && < 10","_tls_wrap":">= 0.11.3","tls":true,"trace_events":">= 10","tty":true,"url":true,"util":true,"util/types":">= 15.3","v8/tools/arguments":">= 10 && < 12","v8/tools/codemap":[">= 4.4.0 && < 5",">= 5.2.0 && < 12"],"v8/tools/consarray":[">= 4.4.0 && < 5",">= 5.2.0 && < 12"],"v8/tools/csvparser":[">= 4.4.0 && < 5",">= 5.2.0 && < 12"],"v8/tools/logreader":[">= 4.4.0 && < 5",">= 5.2.0 && < 12"],"v8/tools/profile_view":[">= 4.4.0 && < 5",">= 5.2.0 && < 12"],"v8/tools/splaytree":[">= 4.4.0 && < 5",">= 5.2.0 && < 12"],"v8":">= 1","vm":true,"wasi":">= 13.4 && < 13.5","worker_threads":">= 11.7","zlib":true}'),Ir=yr=function(t,e){return Cr(Or,t)&&function(t,e){if("boolean"==typeof e)return e;var n=void 0===t?process.versions&&process.versions.node&&process.versions.node:t;if("string"!=typeof n)throw new TypeError(void 0===t?"Unable to determine current node version":"If provided, a valid node version is required");if(e&&"object"==typeof e){for(var r=0;r<e.length;++r)if(Ar(n,e[r]))return!0;return!1}return Ar(n,e)}(e,Or[t])},jr=q&&"function"==typeof q.native?q.native:q,Nr=function(t,e){H(t,(function(t,n){return t?"ENOENT"===t.code||"ENOTDIR"===t.code?e(null,!1):e(t):e(null,n.isFile()||n.isFIFO())}))},Lr=function(t,e){H(t,(function(t,n){return t?"ENOENT"===t.code||"ENOTDIR"===t.code?e(null,!1):e(t):e(null,n.isDirectory())}))},Fr=function(t,e){jr(t,(function(n,r){n&&"ENOENT"!==n.code?e(n):e(null,n?t:r)}))},Dr=function(t,e,n,r){n&&!1===n.preserveSymlinks?t(e,r):r(null,e)},Mr=function(t,e,n){t(e,(function(t,e){if(t)n(t);else try{var r=JSON.parse(e);n(null,r)}catch(t){n(null)}}))},Rr=function t(e,n,r){var i=r,o=n;if("function"==typeof n&&(i=o,o={}),"string"!=typeof e){var s=new TypeError("Path must be a string.");return process.nextTick((function(){i(s)}))}var a=(o=xr(e,o)).isFile||Nr,c=o.isDirectory||Lr,u=o.readFile||u,l=o.realpath||Fr,f=o.readPackage||Mr;if(o.readFile&&o.readPackage){var p=new TypeError("`readFile` and `readPackage` are mutually exclusive.");return process.nextTick((function(){i(p)}))}var h=o.packageIterator,d=o.extensions||[".js"],g=!1!==o.includeCoreModules,m=o.basedir||A(dr()),v=o.filename||m;o.paths=o.paths||[];var y,w=t(m);function b(t,n,r){t?i(t):n?i(null,n,r):S(y,(function(t,n,r){if(t)i(t);else if(n)Dr(l,n,o,(function(t,e){t?i(t):i(null,e,r)}));else{var s=new Error("Cannot find module '"+e+"' from '"+v+"'");s.code="MODULE_NOT_FOUND",i(s)}}))}function _(e,n,r){var i=n,s=r;"function"==typeof i&&(s=i,i=void 0),function e(n,r,i){if(0===n.length)return s(null,void 0,i);var c=r+n[0],u=i;u?l(null,u):x(A(c),l);function l(i,l,p){if(u=l,i)return s(i);if(p&&u&&o.pathFilter){var h=N(p,c),g=h.slice(0,h.length-n[0].length),m=o.pathFilter(u,r,g);if(m)return e([""].concat(d.slice()),t(p,m),u)}a(c,f)}function f(t,i){return t?s(t):i?s(null,c,u):void e(n.slice(1),r,u)}}([""].concat(d),e,i)}function x(t,e){return""===t||"/"===t||"win32"===process.platform&&/^\w:[/\\]*$/.test(t)||/[/\\]node_modules[/\\]*$/.test(t)?e(null):void Dr(l,t,o,(function(n,r){if(n)return x(A(t),e);var i=T(r,"package.json");a(i,(function(n,r){if(!r)return x(A(t),e);f(u,i,(function(n,r){n&&e(n);var s=r;s&&o.packageFilter&&(s=o.packageFilter(s,i)),e(null,s,t)}))}))}))}function S(e,n,r){var i=r,s=n;"function"==typeof s&&(i=s,s=o.package),Dr(l,e,o,(function(n,r){if(n)return i(n);var c=T(r,"package.json");a(c,(function(n,r){return n?i(n):r?void f(u,c,(function(n,r){if(n)return i(n);var s=r;if(s&&o.packageFilter&&(s=o.packageFilter(s,c)),s&&s.main){if("string"!=typeof s.main){var a=new TypeError("package “"+s.name+"” `main` must be a string");return a.code="INVALID_PACKAGE_MAIN",i(a)}return"."!==s.main&&"./"!==s.main||(s.main="index"),void _(t(e,s.main),s,(function(n,r,o){return n?i(n):r?i(null,r,o):o?void S(t(e,o.main),o,(function(t,n,r){return t?i(t):n?i(null,n,r):void _(T(e,"index"),r,i)})):_(T(e,"index"),o,i)}))}_(T(e,"/index"),s,i)})):_(T(e,"index"),s,i)}))}))}function k(t,e){if(0===e.length)return t(null,void 0);var n=e[0];function r(e,r,s){return e?t(e):r?t(null,r,s):void S(n,o.package,i)}function i(n,r,i){return n?t(n):r?t(null,r,i):void k(t,e.slice(1))}c(A(n),(function(i,s){if(i)return t(i);if(!s)return k(t,e.slice(1));_(n,o.package,r)}))}Dr(l,w,o,(function(n,r){n?i(n):function(n){if(/^(?:\.\.?(?:\/|$)|\/|([A-Za-z]:)?[/\\])/.test(e))y=t(n,e),"."!==e&&".."!==e&&"/"!==e.slice(-1)||(y+="/"),/\/$/.test(e)&&y===n?S(y,o.package,b):_(y,o.package,b);else{if(g&&Ir(e))return i(null,e);!function(t,e,n){var r=function(){return function(t,e,n){for(var r=_r(e,n,t),i=0;i<r.length;i++)r[i]=T(r[i],t);return r}(t,e,o)};k(n,h?h(t,e,r,o):r())}(e,n,(function(t,n,r){if(t)i(t);else{if(n)return Dr(l,n,o,(function(t,e){t?i(t):i(null,e,r)}));var s=new Error("Cannot find module '"+e+"' from '"+v+"'");s.code="MODULE_NOT_FOUND",i(s)}}))}}(r)}))},$r=process.versions&&process.versions.node&&process.versions.node.split(".")||[];function Br(t){for(var e=t.split(" "),n=e.length>1?e[0]:"=",r=(e.length>1?e[1]:e[0]).split("."),i=0;i<3;++i){var o=parseInt($r[i]||0,10),s=parseInt(r[i]||0,10);if(o!==s)return"<"===n?o<s:">="===n&&o>=s}return">="===n}function zr(t){var e=t.split(/ ?&& ?/);if(0===e.length)return!1;for(var n=0;n<e.length;++n)if(!Br(e[n]))return!1;return!0}function qr(t){if("boolean"==typeof t)return t;if(t&&"object"==typeof t){for(var e=0;e<t.length;++e)if(zr(t[e]))return!0;return!1}return zr(t)}var Hr=JSON.parse('{"assert":true,"assert/strict":">= 15","async_hooks":">= 8","buffer_ieee754":"< 0.9.7","buffer":true,"child_process":true,"cluster":true,"console":true,"constants":true,"crypto":true,"_debug_agent":">= 1 && < 8","_debugger":"< 8","dgram":true,"diagnostics_channel":">= 15.1","dns":true,"dns/promises":">= 15","domain":">= 0.7.12","events":true,"freelist":"< 6","fs":true,"fs/promises":[">= 10 && < 10.1",">= 14"],"_http_agent":">= 0.11.1","_http_client":">= 0.11.1","_http_common":">= 0.11.1","_http_incoming":">= 0.11.1","_http_outgoing":">= 0.11.1","_http_server":">= 0.11.1","http":true,"http2":">= 8.8","https":true,"inspector":">= 8.0.0","_linklist":"< 8","module":true,"net":true,"node-inspect/lib/_inspect":">= 7.6.0 && < 12","node-inspect/lib/internal/inspect_client":">= 7.6.0 && < 12","node-inspect/lib/internal/inspect_repl":">= 7.6.0 && < 12","os":true,"path":true,"path/posix":">= 15.3","path/win32":">= 15.3","perf_hooks":">= 8.5","process":">= 1","punycode":true,"querystring":true,"readline":true,"repl":true,"smalloc":">= 0.11.5 && < 3","_stream_duplex":">= 0.9.4","_stream_transform":">= 0.9.4","_stream_wrap":">= 1.4.1","_stream_passthrough":">= 0.9.4","_stream_readable":">= 0.9.4","_stream_writable":">= 0.9.4","stream":true,"stream/promises":">= 15","string_decoder":true,"sys":[">= 0.6 && < 0.7",">= 0.8"],"timers":true,"timers/promises":">= 15","_tls_common":">= 0.11.13","_tls_legacy":">= 0.11.3 && < 10","_tls_wrap":">= 0.11.3","tls":true,"trace_events":">= 10","tty":true,"url":true,"util":true,"util/types":">= 15.3","v8/tools/arguments":">= 10 && < 12","v8/tools/codemap":[">= 4.4.0 && < 5",">= 5.2.0 && < 12"],"v8/tools/consarray":[">= 4.4.0 && < 5",">= 5.2.0 && < 12"],"v8/tools/csvparser":[">= 4.4.0 && < 5",">= 5.2.0 && < 12"],"v8/tools/logreader":[">= 4.4.0 && < 5",">= 5.2.0 && < 12"],"v8/tools/profile_view":[">= 4.4.0 && < 5",">= 5.2.0 && < 12"],"v8/tools/splaytree":[">= 4.4.0 && < 5",">= 5.2.0 && < 12"],"v8":">= 1","vm":true,"wasi":">= 13.4 && < 13.5","worker_threads":">= 11.7","zlib":true}'),Ur={};for(var Vr in Hr)Object.prototype.hasOwnProperty.call(Hr,Vr)&&(Ur[Vr]=qr(Hr[Vr]));Pr=Ur,Rr.core=Pr;var Wr,Gr=yr;Wr=function(t){return Gr(t)},Rr.isCore=Wr;var Kr,Qr=yr,Zr=nr,Jr=rr,Yr=vr,Xr=U&&"function"==typeof U.native?U.native:U,ti=function(t){try{var e=V(t)}catch(t){if(t&&("ENOENT"===t.code||"ENOTDIR"===t.code))return!1;throw t}return e.isFile()||e.isFIFO()},ei=function(t){try{var e=V(t)}catch(t){if(t&&("ENOENT"===t.code||"ENOTDIR"===t.code))return!1;throw t}return e.isDirectory()},ni=function(t){try{return Xr(t)}catch(t){if("ENOENT"!==t.code)throw t}return t},ri=function(t,e,n){return n&&!1===n.preserveSymlinks?t(e):e},ii=function(t,e){var n=t(e);try{return JSON.parse(n)}catch(t){}};Kr=function(t,e){if("string"!=typeof t)throw new TypeError("Path must be a string.");var n=Yr(t,e),r=n.isFile||ti,i=n.readFileSync||i,o=n.isDirectory||ei,s=n.realpathSync||ni,a=n.readPackageSync||ii;if(n.readFileSync&&n.readPackageSync)throw new TypeError("`readFileSync` and `readPackageSync` are mutually exclusive.");var c=n.packageIterator,u=n.extensions||[".js"],l=!1!==n.includeCoreModules,f=n.basedir||A(Zr()),p=n.filename||f;n.paths=n.paths||[];var h=ri(s,I(f),n);if(/^(?:\.\.?(?:\/|$)|\/|([A-Za-z]:)?[/\\])/.test(t)){var d=I(h,t);"."!==t&&".."!==t&&"/"!==t.slice(-1)||(d+="/");var g=y(d)||b(d);if(g)return ri(s,g,n)}else{if(l&&Qr(t))return t;var m=function(t,e){for(var r=function(){return function(t,e,n){for(var r=Jr(e,n,t),i=0;i<r.length;i++)r[i]=T(r[i],t);return r}(t,e,n)},i=c?c(t,e,r,n):r(),s=0;s<i.length;s++){var a=i[s];if(o(A(a))){var u=y(a);if(u)return u;var l=b(a);if(l)return l}}}(t,h);if(m)return ri(s,m,n)}var v=new Error("Cannot find module '"+t+"' from '"+p+"'");throw v.code="MODULE_NOT_FOUND",v;function y(t){var e=w(A(t));if(e&&e.dir&&e.pkg&&n.pathFilter){var i=N(e.dir,t),o=n.pathFilter(e.pkg,t,i);o&&(t=I(e.dir,o))}if(r(t))return t;for(var s=0;s<u.length;s++){var a=t+u[s];if(r(a))return a}}function w(t){if(""!==t&&"/"!==t&&!("win32"===process.platform&&/^\w:[/\\]*$/.test(t)||/[/\\]node_modules[/\\]*$/.test(t))){var e=T(ri(s,t,n),"package.json");if(!r(e))return w(A(t));var o=a(i,e);return o&&n.packageFilter&&(o=n.packageFilter(o,t)),{pkg:o,dir:t}}}function b(t){var e=T(ri(s,t,n),"/package.json");if(r(e)){try{var o=a(i,e)}catch(t){}if(o&&n.packageFilter&&(o=n.packageFilter(o,t)),o&&o.main){if("string"!=typeof o.main){var c=new TypeError("package “"+o.name+"” `main` must be a string");throw c.code="INVALID_PACKAGE_MAIN",c}"."!==o.main&&"./"!==o.main||(o.main="index");try{var u=y(I(t,o.main));if(u)return u;var l=b(I(t,o.main));if(l)return l}catch(t){}}}return y(T(t,"/index"))}},Rr.sync=Kr;var oi=e(Rr);async function si(t,e){const{NODE_PATH:n}=process.env,r=`${e}.js`,i=await async function(t,e){return new Promise(((n,r)=>oi(t,e,((t,e)=>{t?r(t):void 0===e?r(new Error("Module path is undefined")):n(e)}))))}(`typescript/lib/${r}`,{basedir:A(t),paths:void 0!==n?n.split(O):void 0}).catch((async()=>{const e=await async function(t){const e=await ui(t);if(e)try{const r=hr(await async function(t){return new Promise(((e,n)=>z(t,((t,r)=>{t?n(t):e(r.toString("utf-8"))}))))}(e.configFile));let i;if("object"==typeof(n=r)&&null!==n&&"string"==typeof n.tsdkPath)i=r.tsdkPath;else{if(!function(t){return"object"==typeof t&&null!==t&&"string"==typeof t["typescript.tsdk"]}(r))return;i=t(r["typescript.tsdk"])}return j(i)?i:T(e.basedir,i)}catch(t){console.warn(t)}var n}(A(t));if(void 0!==e){const t=T(e,"lib",r);if(await ai(t))return t}const n=atom.config.get("atom-typescript.tsdkPath");if(n){const t=T(n,"lib",r);if(await ai(t))return t}return require.resolve(`typescript/lib/${r}`)})),o=I(i,"../../package.json");return{version:require(o).version,pathToBin:i}}async function ai(t){return new Promise((e=>$(t,B.F_OK,(t=>{e(!t)}))))}async function ci(t,e){for(const n of e){const e=T(t,...n);if(await ai(e))return e}}async function ui(t){let e=t,n=A(e);for(;e!==n;){const t=await ci(e,[[".atom-typescript.json"],[".atom","atom-typescript.json"],[".vscode","settings.json"]]);if(void 0!==t)return{basedir:e,configFile:t};e=n,n=A(e)}}class li{constructor(t){this.reportBusyWhile=t,this.clients=new Map,this.memoizedClients=new Map,this.emitter=new b,this.subscriptions=new g,this.tsserverInstancePerTsconfig=atom.config.get("atom-typescript").tsserverInstancePerTsconfig,this.on=this.emitter.on.bind(this.emitter),this.diagnosticHandler=(t,e)=>n=>{const r=(i=n)&&i.triggerFile&&i.configFile?n.configFile:n.file;var i;r&&this.emitter.emit("diagnostics",{type:e,serverPath:t,filePath:r,diagnostics:n.diagnostics})}}async restartAllServers(){await this.reportBusyWhile("Restarting servers",(()=>Promise.all(Array.from(this.getAllClients()).map((t=>t.restartServer())))))}async get(t){const e=this.memoizedClients.get(t);if(e)return e;const n=this._get(t);this.memoizedClients.set(t,n);try{return await n}catch(e){throw this.memoizedClients.delete(t),e}}dispose(){this.emitter.dispose(),this.subscriptions.dispose(),this.memoizedClients.clear(),this.clients.clear()}async _get(t){const{pathToBin:e,version:n}=await si(t,"tsserver"),r=this.tsserverInstancePerTsconfig?h.findConfigFile(t,(t=>h.sys.fileExists(t))):void 0;let i=this.clients.get(e);i||(i=new Map,this.clients.set(e,i));const o=i.get(r);if(o)return o;const s=new Kn(e,n,this.reportBusyWhile);return i.set(r,s),this.subscriptions.add(s.on("configFileDiag",this.diagnosticHandler(e,"configFileDiag")),s.on("semanticDiag",this.diagnosticHandler(e,"semanticDiag")),s.on("syntaxDiag",this.diagnosticHandler(e,"syntaxDiag")),s.on("suggestionDiag",this.diagnosticHandler(e,"suggestionDiag"))),s}*getAllClients(){for(const t of this.clients.values())yield*t.values()}}function fi(t){return{grammarScopes:kn(),priority:100,highlight:async function(e,n){if(!En(e))return;const r=Pn(e,n);if(!r)return;const i=await t(r.file),o=await i.execute("documentHighlights",{...r,filesToSearch:[r.file]});return o.body?Array.from(function*(t,e){for(const n of e)n.file===t&&(yield*n.highlightSpans.map(hn))}(r.file,o.body)):void 0}}}async function pi(t,e,n){if(void 0===t)return null;const r=e.dom("div",{className:"atom-typescript-datatip-tooltip-kind"},t.kind,function(t,e){return void 0===e?null:t.dom("span",{className:"atom-typescript-datatip-tooltip-kind-modifiers"},e)}(t.kindModifiers)),i=t.tags?t.tags.map((t=>{const n=`atom-typescript-datatip-tooltip-doc-tag atom-typescript-datatip-tooltip-doc-tag-name-${t.name}`;return e.dom("div",{className:n},e.dom("span",{className:"atom-typescript-datatip-tooltip-doc-tag-name"},t.name),function(t,e){if(void 0===e)return null;const[,n,r]=/^\s*(\S*)([^]*)$/.exec(e);return t.dom("span",{className:"atom-typescript-datatip-tooltip-doc-tag-text"},t.dom("span",{className:"atom-typescript-datatip-tooltip-doc-tag-text-first-word"},n),r)}(e,t.text))})):null,o=e.dom("div",{className:"atom-typescript-datatip-tooltip-doc"},t.documentation,i),s=t.displayString.replace(/^\(.+?\)\s+/,"");return[await n(s),r,o]}const hi=Symbol.for("react.element"),di={dom:function(t,e,...n){return n.length>0?{$$typeof:hi,type:t,ref:null,props:{...e,children:n}}:{$$typeof:hi,type:t,ref:null,props:{...e}}}};class gi{constructor(t){this.getClient=t,this.providerName="TypeScript type tooltips",this.priority=100,this.grammarScopes=kn()}async datatip(t,e){try{const n=t.getPath();if(void 0===n)return;const r=await this.getClient(n),i=(await r.execute("quickinfo",{file:n,line:e.row+1,offset:e.column+1})).body,o=await pi(i,di,mi);return{component:()=>di.dom("div",{className:"atom-typescript-datatip-tooltip"},o),range:v.fromObject([pn(i.start),pn(i.end)])}}catch(t){return}}}async function mi(t){const e=atom.config.get("editor.fontFamily"),n=await xn(t.replace(/\r?\n$/,""),"source.ts");return di.dom("div",{style:{fontFamily:e},className:"atom-typescript-datatip-tooltip-code",dangerouslySetInnerHTML:{__html:n}})}function vi(t){const e=hn(t);return{path:t.file,position:e.start,range:e,language:"TypeScript"}}function yi(t){return{uri:t.file,range:dn(t.start,t.end),name:void 0}}class wi{constructor(t){this.props=t,Ft.initialize(this)}async update(t){return this.props={...this.props,...t},Ft.update(this)}render(){const t={fontFamily:atom.config.get("editor.fontFamily")};return Ft.dom("div",{className:"editor editor-colors",style:t,innerHTML:this.props.highlightedText})}}var bi,_i,xi,Si={},ki=!1;function Ei(){return ki||(ki=!0,function(){var t,e;t=E,bi=function(e,n,r){var i,o,s,a,c;for(o=e.length-1;e[o]===t;)o--;for(c=0,s=o,i=null;o>=0;)e[o]===t?(c++,null==i&&(i=e.substring(o+1,s+1))):0===o&&(s<e.length-1?null==i&&(i=e.substring(0,s+1)):null==i&&(i=e)),o--;return i===e?r*=2:i&&(r+=_i(i,n)),a=c+1,r*(.01*Math.max(1,10-a))},xi.basenameScore=bi,_i=function(n,r){var i,o,s,a,c,u,l,f,p,h,d,g;if(n===r)return 1;if(e(n,r))return 1;for(h=0,l=r.length,p=n.length,s=0,a=0;s<l;){if(i=r[s++],c=n.indexOf(i.toLowerCase()),d=n.indexOf(i.toUpperCase()),-1===(u=Math.min(c,d))&&(u=Math.max(c,d)),-1===(a=u))return 0;o=.1,n[a]===i&&(o+=.1),0===a||n[a-1]===t?o+=.8:"-"!==(g=n[a-1])&&"_"!==g&&" "!==g||(o+=.7),n=n.substring(a+1,p),h+=o}return((f=h/l)*(l/p)+f)/2},xi.score=_i,e=function(e,n){if(e[e.length-n.length-1]===t)return e.lastIndexOf(n)===e.length-n.length}}.call(xi={})),xi}var Ci,Ti=!1;function Ai(){return Ti||(Ti=!0,function(){var t,e,n;e=Ei(),t=function(t){return t.candidate},n=function(t,e){return e.score-t.score},Ci=function(r,i,o,s){var a,c,u,l,f,p,h,d,g;if(c=(g=null!=s?s:{}).key,u=g.maxResults,i){for(f=[],h=0,d=r.length;h<d;h++)a=r[h],(p=null!=c?a[c]:a)&&(l=e.score(p,i,o),o||(l=e.basenameScore(p,i,l)),l>0&&f.push({candidate:a,score:l}));f.sort(n),r=f.map(t)}return null!=u&&(r=r.slice(0,u)),r}}.call(Ci={})),Ci}var Pi,Oi,Ii,ji=!1;function Ni(){return ji||(ji=!0,function(){var t;t=E,Pi=function(e,n){var r,i,o;for(i=e.length-1;e[i]===t;)i--;for(o=i,r=null;i>=0;)e[i]===t?null==r&&(r=e.substring(i+1,o+1)):0===i&&(o<e.length-1?null==r&&(r=e.substring(0,o+1)):null==r&&(r=e)),i--;return Oi(r,n,e.length-r.length)},Ii.basenameMatch=Pi,Oi=function(t,e,n){var r,i,o,s,a,c,u,l,f,p;if(null==n&&(n=0),t===e)return function(){p=[];for(var e=n,r=n+t.length;n<=r?e<r:e>r;n<=r?e++:e--)p.push(e);return p}.apply(this);for(u=e.length,l=t.length,i=0,o=0,a=[];i<u;){if(r=e[i++],s=t.indexOf(r.toLowerCase()),f=t.indexOf(r.toUpperCase()),-1===(c=Math.min(s,f))&&(c=Math.max(s,f)),-1===(o=c))return[];a.push(n+o),n+=o+1,t=t.substring(o+1,l)}return a},Ii.match=Oi}.call(Ii={})),Ii}(function(){var t,e,n,r,i;i=Ei(),n=Ai(),r=Ni(),t=E,e=/\ /g,Si={filter:function(r,i,o){var s;return i&&(s=-1!==i.indexOf(t),i=i.replace(e,"")),n(r,i,s,o)},score:function(n,r){var o,s;return n&&r?n===r?2:(o=-1!==r.indexOf(t),r=r.replace(e,""),s=i.score(n,r),o||(s=i.basenameScore(n,r,s)),s):0},match:function(n,i){var o,s,a,c,u,l;if(!n)return[];if(!i)return[];if(n===i)return function(){l=[];for(var t=0,e=n.length;0<=e?t<e:t>e;0<=e?t++:t--)l.push(t);return l}.apply(this);if(c=-1!==i.indexOf(t),i=i.replace(e,""),a=r.match(n,i),!c)for(o=r.basenameMatch(n,i),a=a.concat(o).sort((function(t,e){return t-e})),u=null,s=0;s<a.length;)s&&u===a[s]?a.splice(s,1):(u=a[s],s++);return a}}}).call(Si);class Li{constructor(t){this.props=t,this.matches=this.match(this.props),Ft.initialize(this)}async update(t){this.props={...this.props,...t},this.matches=this.match(this.props),await Ft.update(this)}async destroy(){await Ft.destroy(this)}render(){return Ft.dom("span",null,this.matches.map((t=>Ft.dom("span",{className:t.type},t.text))))}match(t){return t.query?function(t,e){let n=0,r=[];const i=[],o=Si.match(t,e);let s;for(s of o){if(s<0)continue;const e=t.substring(n,s);e&&(r.length>0&&i.push({text:r.join(""),type:"character-match"}),r=[],i.push({text:e})),r.push(t[s]),n=s+1}r.length>0&&i.push({text:r.join(""),type:"character-match"});return i.push({text:t.substring(n)}),i}(t.label,t.query):[{text:t.label}]}}var Fi={},Di=Fi&&Fi.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Fi,"__esModule",{value:!0});const Mi=Di(Ft),Ri=Mi.default.dom,$i=Di(Si);Fi=class{constructor(t){this.props=t,this.props.hasOwnProperty("initialSelectionIndex")||(this.props.initialSelectionIndex=0),t.initiallyVisibleItemCount&&this.initializeVisibilityObserver(),this.computeItems(!1),this.disposables=new g,Mi.default.initialize(this),this.element.classList.add("select-list"),this.disposables.add(this.refs.queryEditor.onDidChange(this.didChangeQuery.bind(this))),t.skipCommandsRegistration||this.disposables.add(this.registerAtomCommands());const e=this.refs.queryEditor.element,n=this.didLoseFocus.bind(this);e.addEventListener("blur",n),this.didClickItemsList=!1,this.element.addEventListener("mousedown",(t=>{t.target===this.refs.items&&(this.didClickItemsList=!0)})),this.disposables.add(new w((()=>{e.removeEventListener("blur",n)})))}static setScheduler(t){Mi.default.setScheduler(t)}static getScheduler(){return Mi.default.getScheduler()}initializeVisibilityObserver(){this.visibilityObserver=new IntersectionObserver((t=>{for(const e of t)if(e.intersectionRatio>0){const t=e.target;this.visibilityObserver.unobserve(t);const n=Array.from(this.refs.items.children).indexOf(t);n>=0&&this.renderItemAtIndex(n)}}))}focus(){this.refs.queryEditor.element.focus()}didLoseFocus(t){this.didClickItemsList||this.element.contains(t.relatedTarget)?(this.didClickItemsList=!1,this.refs.queryEditor.element.focus()):document.hasFocus()&&this.cancelSelection()}reset(){this.refs.queryEditor.setText("")}destroy(){return this.disposables.dispose(),this.visibilityObserver&&this.visibilityObserver.disconnect(),Mi.default.destroy(this)}registerAtomCommands(){return atom.commands.add(this.element,{"core:move-up":t=>{this.selectPrevious(),t.stopPropagation()},"core:move-down":t=>{this.selectNext(),t.stopPropagation()},"core:move-to-top":t=>{this.selectFirst(),t.stopPropagation()},"core:move-to-bottom":t=>{this.selectLast(),t.stopPropagation()},"core:confirm":t=>{this.confirmSelection(),t.stopPropagation()},"core:cancel":t=>{this.cancelSelection(),t.stopPropagation()}})}update(t){let e=!1;return"items"in t&&(this.props.items=t.items,e=!0),"maxResults"in t&&(this.props.maxResults=t.maxResults,e=!0),"filter"in t&&(this.props.filter=t.filter,e=!0),"filterQuery"in t&&(this.props.filterQuery=t.filterQuery,e=!0),"query"in t&&(this.refs.queryEditor.setText(t.query),e=!1),"selectQuery"in t&&(t.selectQuery?this.refs.queryEditor.selectAll():this.refs.queryEditor.clearSelections()),"order"in t&&(this.props.order=t.order),"emptyMessage"in t&&(this.props.emptyMessage=t.emptyMessage),"errorMessage"in t&&(this.props.errorMessage=t.errorMessage),"infoMessage"in t&&(this.props.infoMessage=t.infoMessage),"loadingMessage"in t&&(this.props.loadingMessage=t.loadingMessage),"loadingBadge"in t&&(this.props.loadingBadge=t.loadingBadge),"itemsClassList"in t&&(this.props.itemsClassList=t.itemsClassList),"initialSelectionIndex"in t&&(this.props.initialSelectionIndex=t.initialSelectionIndex),e&&this.computeItems(),Mi.default.update(this)}render(){return Ri.div({},Ri(x,{ref:"queryEditor",mini:!0}),this.renderLoadingMessage(),this.renderInfoMessage(),this.renderErrorMessage(),this.renderItems())}renderItems(){if(this.items.length>0){const t=["list-group"].concat(this.props.itemsClassList||[]).join(" ");return this.visibilityObserver&&Mi.default.getScheduler().updateDocument((()=>{Array.from(this.refs.items.children).slice(this.props.initiallyVisibleItemCount).forEach((t=>{this.visibilityObserver.observe(t)}))})),this.listItems=this.items.map(((t,e)=>{const n=this.getSelectedItem()===t,r=!this.props.initiallyVisibleItemCount||e<this.props.initiallyVisibleItemCount;return Ri(Bi,{element:this.props.elementForItem(t,{selected:n,index:e,visible:r}),selected:n,onclick:()=>this.didClickItem(e)})})),Ri.ol({className:t,ref:"items"},...this.listItems)}return!this.props.loadingMessage&&this.props.emptyMessage?Ri.span({ref:"emptyMessage"},this.props.emptyMessage):""}renderErrorMessage(){return this.props.errorMessage?Ri.span({ref:"errorMessage"},this.props.errorMessage):""}renderInfoMessage(){return this.props.infoMessage?Ri.span({ref:"infoMessage"},this.props.infoMessage):""}renderLoadingMessage(){return this.props.loadingMessage?Ri.div({className:"loading"},Ri.span({ref:"loadingMessage",className:"loading-message"},this.props.loadingMessage),this.props.loadingBadge?Ri.span({ref:"loadingBadge",className:"badge"},this.props.loadingBadge):""):""}getQuery(){return this.refs&&this.refs.queryEditor?this.refs.queryEditor.getText():""}getFilterQuery(){return this.props.filterQuery?this.props.filterQuery(this.getQuery()):this.getQuery()}didChangeQuery(){this.props.didChangeQuery&&this.props.didChangeQuery(this.getFilterQuery()),this.computeItems()}didClickItem(t){this.selectIndex(t),this.confirmSelection()}computeItems(t){this.listItems=null,this.visibilityObserver&&this.visibilityObserver.disconnect();const e=this.props.filter||this.fuzzyFilter.bind(this);this.items=e(this.props.items.slice(),this.getFilterQuery()),this.props.order&&this.items.sort(this.props.order),this.props.maxResults&&(this.items=this.items.slice(0,this.props.maxResults)),this.selectIndex(this.props.initialSelectionIndex,t)}fuzzyFilter(t,e){if(0===e.length)return t;{const n=[];for(const r of t){const t=this.props.filterKeyForItem?this.props.filterKeyForItem(r):r,i=$i.default.score(t,e);i>0&&n.push({item:r,score:i})}return n.sort(((t,e)=>e.score-t.score)),n.map((t=>t.item))}}getSelectedItem(){return void 0===this.selectionIndex?null:this.items[this.selectionIndex]}renderItemAtIndex(t){const e=this.items[t],n=this.getSelectedItem()===e,r=this.listItems[t].component;this.visibilityObserver&&this.visibilityObserver.unobserve(r.element),r.update({element:this.props.elementForItem(e,{selected:n,index:t,visible:!0}),selected:n,onclick:()=>this.didClickItem(t)})}selectPrevious(){return void 0===this.selectionIndex?this.selectLast():this.selectIndex(this.selectionIndex-1)}selectNext(){return void 0===this.selectionIndex?this.selectFirst():this.selectIndex(this.selectionIndex+1)}selectFirst(){return this.selectIndex(0)}selectLast(){return this.selectIndex(this.items.length-1)}selectNone(){return this.selectIndex(void 0)}selectIndex(t,e=!0){t>=this.items.length?t=0:t<0&&(t=this.items.length-1);const n=this.selectionIndex;return this.selectionIndex=t,void 0!==t&&this.props.didChangeSelection&&this.props.didChangeSelection(this.getSelectedItem()),e?this.listItems?(n>=0&&this.renderItemAtIndex(n),t>=0&&this.renderItemAtIndex(t),Mi.default.getScheduler().getNextUpdatePromise()):Mi.default.update(this):Promise.resolve()}selectItem(t){const e=this.items.indexOf(t);if(-1===e)throw new Error("Cannot select the specified item because it does not exist.");return this.selectIndex(e)}confirmSelection(){const t=this.getSelectedItem();null!=t?this.props.didConfirmSelection&&this.props.didConfirmSelection(t):this.props.didConfirmEmptySelection&&this.props.didConfirmEmptySelection()}cancelSelection(){this.props.didCancelSelection&&this.props.didCancelSelection()}};class Bi{constructor(t){this.mouseDown=this.mouseDown.bind(this),this.mouseUp=this.mouseUp.bind(this),this.didClick=this.didClick.bind(this),this.selected=t.selected,this.onclick=t.onclick,this.element=t.element,this.element.addEventListener("mousedown",this.mouseDown),this.element.addEventListener("mouseup",this.mouseUp),this.element.addEventListener("click",this.didClick),this.selected&&this.element.classList.add("selected"),this.domEventsDisposable=new w((()=>{this.element.removeEventListener("mousedown",this.mouseDown),this.element.removeEventListener("mouseup",this.mouseUp),this.element.removeEventListener("click",this.didClick)})),Mi.default.getScheduler().updateDocument(this.scrollIntoViewIfNeeded.bind(this))}mouseDown(t){t.preventDefault()}mouseUp(t){t.preventDefault()}didClick(t){t.preventDefault(),this.onclick()}destroy(){this.element.remove(),this.domEventsDisposable.dispose()}update(t){this.element.removeEventListener("mousedown",this.mouseDown),this.element.removeEventListener("mouseup",this.mouseUp),this.element.removeEventListener("click",this.didClick),this.element.parentNode.replaceChild(t.element,this.element),this.element=t.element,this.element.addEventListener("mousedown",this.mouseDown),this.element.addEventListener("mouseup",this.mouseUp),this.element.addEventListener("click",this.didClick),t.selected&&this.element.classList.add("selected"),this.selected=t.selected,this.onclick=t.onclick,Mi.default.getScheduler().updateDocument(this.scrollIntoViewIfNeeded.bind(this))}scrollIntoViewIfNeeded(){this.selected&&this.element.scrollIntoViewIfNeeded(!1)}}var zi=e(Fi);async function qi({items:t,itemTemplate:e,itemFilterKey:n,didChangeSelection:r}){let i;const o=document.activeElement;try{return await new Promise((o=>{let s,a,c="Loading...",u=!1;const l=t=>{u||Ee(f.update(t))};"function"==typeof t&&(s=async e=>{const n=setTimeout((()=>l({loadingMessage:"Loading..."})),300),r=await t(e);clearTimeout(n),l({items:r,emptyMessage:"Nothing matches the search value",loadingMessage:void 0})},c=void 0,a="Please enter a search value");const f=new zi({items:[],elementForItem:t=>Ft.render(e(t,f)),filterKeyForItem:t=>`${t[n]}`,didChangeSelection:r,didCancelSelection:()=>{u=!0,o(void 0)},didConfirmSelection:t=>{u=!0,o(t)},loadingMessage:c,didChangeQuery:s,emptyMessage:a,itemsClassList:["atom-typescript"]});"function"!=typeof t&&Ee(Promise.resolve(t).then((t=>{l({items:t,loadingMessage:void 0})}))),i=atom.workspace.addModalPanel({item:f,visible:!0}),f.focus()}))}finally{i&&i.destroy(),o&&o.focus()}}const Hi=[];function Ui(t,e,n){Hi.push({selector:t,command:e,desc:n})}async function Vi(t,e,n){const r=Promise.all(t.body.refs.map((async t=>{var e,n;const r=(await new Promise(((e,n)=>z(t.file,((t,r)=>{t?n(t):e(r.toString("utf-8"))}))))).split(/\r?\n/g),i=void 0!==t.contextStart&&void 0!==t.contextEnd?r.slice(t.contextStart.line-1,t.contextEnd.line):r,o=(await xn(i.join("\n"),"source.tsx")).split("\n")[t.start.line-(null!==(e=null===(n=t.contextStart)||void 0===n?void 0:n.line)&&void 0!==e?e:1)];return{...t,hlText:o}}))),i=await qi({items:r,itemTemplate:(t,e)=>Ft.dom("li",null,Ft.dom(Li,{label:atom.project.relativize(t.file),query:e.getFilterQuery()}),Ft.dom("div",{className:"pull-right"},"line: ",t.start.line),Ft.dom(wi,{highlightedText:t.hlText})),itemFilterKey:"file"});i&&await n(e,i)}async function Wi(t,e,n){if(t.body)if(t.body.length>1){const r=await qi({items:t.body,itemTemplate:(t,e)=>Ft.dom("li",null,Ft.dom(Li,{label:t.file,query:e.getFilterQuery()}),Ft.dom("div",{className:"pull-right"},"line: ",t.start.line)),itemFilterKey:"file"});r&&await n(e,r)}else t.body.length>0&&await n(e,t.body[0])}function Gi(t){const e=t.spans.map(hn).reduce(((t,e)=>e.union(t)));return{kind:Qi[t.kind],plainText:t.text,startPosition:e.start,endPosition:e.end,landingPosition:t.nameSpan?hn(t.nameSpan).start:void 0,children:t.childItems?t.childItems.map(Gi).sort(Ki):[]}}function Ki(t,e){const n=t.landingPosition?t.landingPosition:t.startPosition,r=e.landingPosition?e.landingPosition:e.startPosition;return n.compare(r)}Ui("atom-text-editor","typescript:find-references",(t=>({description:"Find where symbol under text cursor is referenced",didDispatch:async function(e){const n=Pn(e);if(!n)return;const r=await t.getClient(n.file),i=await r.execute("references",n);await Vi(i,e,t.histGoForward)}}))),Ui("atom-text-editor","typescript:go-to-declaration",(t=>({description:"Go to declaration of symbol under text cursor",didDispatch:async function(e){const n=Pn(e);if(!n)return;const r=await t.getClient(n.file),i=await r.execute("definition",n);await Wi(i,e,t.histGoForward)}})));const Qi={directory:"file",module:"module","external module name":"module",class:"class","local class":"class",method:"method",property:"property",getter:"property",setter:"property","JSX attribute":"field",constructor:"constructor",enum:"enum",interface:"interface",type:"interface",function:"function","local function":"function",label:"variable",alias:"variable",var:"variable",let:"variable","local var":"variable",parameter:"variable","enum member":"constant",const:"constant",string:"string","":void 0,warning:void 0,keyword:void 0,script:void 0,call:void 0,index:void 0,construct:void 0,"type parameter":void 0,"primitive type":void 0};class Zi{constructor(t){this.getClient=t,this.triggerCharacters=new Set([]),this.grammarScopes=kn(),this.priority=100,this.disposables=new g;const e=new Set(["<","(",","]),n=new Set([]);this.disposables.add(atom.config.observe("atom-typescript.sigHelpDisplayOnChange",(t=>{this.triggerCharacters=t?e:n})))}dispose(){this.disposables.dispose()}async getSignatureHelp(t,e){try{const n=t.getPath();if(void 0===n)return;const r=await this.getClient(n),i=(await r.execute("signatureHelp",{file:n,line:e.row+1,offset:e.column+1})).body;return{signatures:i.items.map(vn),activeParameter:i.argumentIndex,activeSignature:i.selectedItemIndex}}catch(t){return}}}function Ji(t){return Ft.dom("li",null,t.description)}class Yi{constructor(t,e){this.getClient=t,this.applyEdits=e,this.selector=kn().map((t=>t.includes(".")?`.${t}`:t)).join(", "),this.inclusionPriority=3,this.suggestionPriority=atom.config.get("atom-typescript").autocompletionSuggestionPriority,this.excludeLowerPriority=!1}async getSuggestions(t){const e=function(t){const e=t.editor.getPath();if(void 0===e)return;return{file:e,line:t.bufferPosition.row+1,offset:t.bufferPosition.column+1}}(t),n=function(t){const e=t.editor.getBuffer().getTextInRange([[t.bufferPosition.row,0],t.bufferPosition]).match(Xi);return e?e[0]:""}(t);if(!e)return[];const r=function(t){if(void 0===t)return;if(!t)return;const e=t.slice(-1);if(oo.has(e))return e;return}(function(t,e){let n;const r=new v([0,0],e);return t.backwardsScanInRange(/\S/,r,(({matchText:t,stop:e})=>{n=t,e()})),n}(t.editor.getBuffer(),t.bufferPosition));if(!n&&!t.activatedManually&&!r)return[];if(eo(t.scopeDescriptor.getScopesArray(),"string.template.")&&!eo(t.scopeDescriptor.getScopesArray(),"template.expression."))return[];try{let i=await this.getSuggestionsWithCache({prefix:n,location:e,triggerCharacter:r,activatedManually:t.activatedManually});return i=Si.filter(i,n,{key:"displayText"}),i.map((r=>({replacementPrefix:r.replacementRange?t.editor.getTextInBufferRange(r.replacementRange):n,location:e,...this.getDetailsFromCache(r),...ro(t,r)})))}catch(t){return[]}}async getSuggestionDetailsOnSelect(t){return"text"in t&&!("rightLabel"in t)?this.getAdditionalDetails(t):null}onDidInsertSuggestion(t){const e=t.suggestion;if(!e.hasAction)return;if(!this.lastSuggestions)return;const n=this.lastSuggestions.client;let r=this.getDetailsFromCache(e);Ee((async()=>{var t;if(r||(r=await this.getAdditionalDetails(e)),null===(t=r)||void 0===t||!t.details.codeActions)return;let i;i=1===r.details.codeActions.length?r.details.codeActions[0]:await qi({items:r.details.codeActions,itemTemplate:Ji,itemFilterKey:"description"}),i&&(await this.applyEdits(i.changes),i.commands&&await Promise.all(i.commands.map((t=>n.execute("applyCodeActionCommand",{command:t})))))})())}async getAdditionalDetails(t){var e;if(void 0===t.identifier)return null;if(!this.lastSuggestions)return null;const n=await this.lastSuggestions.client.execute("completionEntryDetails",{entryNames:[t.identifier],...this.lastSuggestions.location});if(!n.body)return null;const[r]=n.body;if(!r)return null;let i=r.displayParts;i.length>=3&&"("===i[0].text&&i[1].text===t.leftLabel&&")"===i[2].text&&(i=i.slice(3));let o=i.map((t=>t.text)).join("");const s=t.hasAction&&1===(null===(e=r.codeActions)||void 0===e?void 0:e.length)?`${r.codeActions[0].description}\n\n`:"";s&&(o=s);const a=s+r.displayParts.map((t=>t.text)).join("")+(r.documentation?"\n\n"+r.documentation.map((t=>t.text)).join(" "):"");return this.lastSuggestions.details.set(t.displayText,{details:r,rightLabel:o,description:a}),{...t,details:r,rightLabel:o,description:a}}getDetailsFromCache(t){if(!this.lastSuggestions)return null;const e=this.lastSuggestions.details.get(t.displayText);return e||null}async getSuggestionsWithCache({prefix:t,location:e,triggerCharacter:n,activatedManually:r}){if(this.lastSuggestions&&!r){const n=this.lastSuggestions.location,r=to(this.lastSuggestions.prefix,n.offset),i=to(t,e.offset);if(n.file===e.file&&n.line===e.line&&r===i&&0!==this.lastSuggestions.suggestions.length)return this.lastSuggestions.suggestions}const i=await this.getClient(e.file),o=await async function({client:t,location:e,triggerCharacter:n}){if(parseInt(t.version.split(".")[0],10)>=3){var r;const i=await t.execute("completionInfo",{includeExternalModuleExports:!1,includeInsertTextCompletions:!0,triggerCharacter:n,...e});return i.body.entries.map(no.bind(null,null===(r=i.body)||void 0===r?void 0:r.isMemberCompletion))}return(await t.execute("completions",{includeExternalModuleExports:!1,includeInsertTextCompletions:!0,...e})).body.map(no.bind(null,void 0))}({client:i,location:e,triggerCharacter:r?void 0:n});return this.lastSuggestions={client:i,location:e,prefix:t,suggestions:o,details:new Map},o}}const Xi=/(?:(?![\u{10000}-\u{10FFFF}])[\$_\p{Lu}\p{Ll}\p{Lt}\p{Lm}\p{Lo}\p{Nl}])(?:(?![\u{10000}-\u{10FFFF}])[\$_\p{Lu}\p{Ll}\p{Lt}\p{Lm}\p{Lo}\p{Nl}\u200C\u200D\p{Mn}\p{Mc}\p{Nd}\p{Pc}])*$/u;function to(t,e){return e-("."===t?0:t.length)}function eo(t,e){for(const n of t)if(n.includes(e))return!0;return!1}function no(t,e){return{displayText:e.name,text:void 0!==e.insertText?e.insertText:e.name,leftLabel:e.kind,replacementRange:e.replacementSpan?hn(e.replacementSpan):void 0,type:io[e.kind],isMemberCompletion:t,identifier:void 0!==e.source?{name:e.name,source:e.source}:e.name,hasAction:e.hasAction}}function ro(t,e){return atom.config.get("atom-typescript.autocompleteParens")&&["function","method"].includes(e.leftLabel)&&!function(t){const e=t.editor.getBuffer(),n=t.bufferPosition;return!!e.getTextInRange([n,[n.row,e.lineLengthForRow(n.row)]]).match(/\s*\(/)}(t)?{...e,snippet:`${e.text}($1)`,text:void 0}:e}const io={directory:"require",module:"import","external module name":"import",class:"class","local class":"class",method:"method",property:"property",getter:"property",setter:"property","JSX attribute":"property",constructor:"method",enum:"type",interface:"type",type:"type","type parameter":"type","primitive type":"type",function:"function","local function":"function",label:"variable",alias:"import",var:"variable",let:"variable","local var":"variable",parameter:"variable","enum member":"constant",const:"constant",string:"value",keyword:"keyword","":void 0,warning:void 0,script:void 0,call:void 0,index:void 0,construct:void 0},oo=new Set(Object.keys({".":null,'"':null,"'":null,"`":null,"/":null,"@":null,"<":null,"#":null}));async function so(t,e){const n=await async function(t,e){try{return await t.execute("getApplicableRefactors",{triggerReason:"invoked",...e})}catch{return}}(t,e);if(!n)return[];if(void 0===n.body||0===n.body.length)return[];const r=[];for(const t of n.body)for(const n of t.actions)r.push({refactorName:t.name,refactorDescription:t.description,refactorRange:e,actionName:n.name,actionDescription:n.description,inlineable:void 0===t.inlineable||t.inlineable});return r}async function ao(t,e,n){const r=await e.execute("getEditsForRefactor",{...t.refactorRange,refactor:t.refactorName,action:t.actionName});if(void 0===r.body)return;const{edits:i,renameFilename:o,renameLocation:s}=r.body;if(await n.applyEdits(i),void 0===o||void 0===s)return;const a=await atom.workspace.open(o,{searchAllPanes:!0,initialLine:s.line-1,initialColumn:s.offset-1});await atom.commands.dispatch(atom.views.getView(a),"typescript:rename-refactor")}Ui("atom-text-editor","typescript:refactor-selection",(t=>({description:"Get a list of applicable refactors to selected code",didDispatch:async function(e){const n=Pn(e);if(!n)return;const r=e.getSelectedBufferRange(),i=await t.getClient(n.file),o=r.isEmpty()?n:{file:n.file,startLine:r.start.row+1,startOffset:r.start.column+1,endLine:r.end.row+1,endOffset:r.end.column+1},s=await so(i,o);if(0===s.length)return void atom.notifications.addInfo("AtomTS: No applicable refactors for the selection");const a=await qi({items:s,itemTemplate:(t,e)=>Ft.dom("li",null,Ft.dom(Li,{label:`${t.refactorDescription}: ${t.actionDescription}`,query:e.getFilterQuery()})),itemFilterKey:"actionDescription"});void 0!==a&&await ao(a,i,t)}})));class co{constructor(t,e,n){this.clientResolver=t,this.errorPusher=e,this.applyEdits=n,this.supportedFixes=new WeakMap}async getFixableRanges(t,e){const n=t.getPath();if(void 0===n)return[];const r=this.errorPusher.getErrorsInRange(n,e),i=await this.clientResolver.get(n),o=await this.getSupportedFixes(i);return Array.from(r).filter((t=>void 0!==t.code&&o.has(t.code))).map((t=>hn(t)))}async runCodeFix(t,e){const n=t.getPath();if(void 0===n)return[];const r=await this.clientResolver.get(n),i=await this.getSupportedFixes(r),o=Array.from(this.errorPusher.getErrorsAt(n,e)).filter((t=>void 0!==t.code&&i.has(t.code))).map((t=>r.execute("getCodeFixes",{file:n,startLine:t.start.line,startOffset:t.start.offset,endLine:t.end.line,endOffset:t.end.offset,errorCodes:[t.code]}))),s=await Promise.all(o),a=[];for(const t of s)if(t.body)for(const e of t.body)a.push(e);const c=await so(r,{file:n,...fn(e)});return a.push(...c),a}async applyFix(t){if("changes"in t)return this.applyEdits(t.changes);return ao(t,await this.clientResolver.get(t.refactorRange.file),{applyEdits:this.applyEdits})}dispose(){}async getSupportedFixes(t){let e=this.supportedFixes.get(t);if(e)return e;const n=await t.execute("getSupportedCodeFixes");if(!n.body)throw new Error("No code fixes are supported");return e=new Set(n.body.map((t=>parseInt(t,10)))),this.supportedFixes.set(t,e),e}}async function uo(t,e){let n;try{return await new Promise(((r,i)=>{try{const o=new _({command:t,args:["--init"],options:{cwd:e},exit:t=>{0===t?r():i(new Error(`Tsc ended with nonzero exit code ${t}`))}});n=o.onWillThrowError(i)}catch(t){i(t)}}))}finally{n&&n.dispose()}}Ui("atom-text-editor","typescript:build",(t=>({description:"Compile all files in project related to current active text editor",didDispatch:async function(e){const n=e.getPath();if(void 0===n)return;const r=await t.getClient(n);t.reportBuildStatus(void 0);const i=await r.execute("projectInfo",{file:n,needFileNameList:!0}),o=new Set(i.body.fileNames);o.delete(i.body.configFileName);let s=0;const a=[...o.values()].map((e=>{return n=r.execute("compileOnSaveEmitFile",{file:e,forced:!0}),i=()=>{s+=1,t.reportProgress({max:o.size,value:s})},n.then(i,i),n;var n,i}));try{if((await Promise.all(a)).some((t=>!1===t.body)))throw new Error("Emit failed");t.reportBuildStatus({success:!0})}catch(e){const n=e;console.error(n),t.reportBuildStatus({success:!1,message:n.message})}}}))),Ui("atom-text-editor","typescript:check-all-files",(t=>({description:"Typecheck all files in project related to current active text editor",didDispatch:async function(e){var n;const r=e.getPath();if(void 0===r)return;const i=await t.getClient(r),o=await i.execute("projectInfo",{file:r,needFileNameList:!0}),s=new Set(null===(n=o.body.fileNames)||void 0===n?void 0:n.filter((t=>!t.endsWith("tsconfig.json")&&!t.includes(`${F}node_modules${F}`)))),a=s.size;if(i.multistepSupported){const e=i.on("syntaxDiag",(e=>{"file"in e&&s.delete(e.file),t.reportProgress({max:a,value:a-s.size})}));t.reportProgress({max:a,value:0}),await i.execute("geterrForProject",{file:r,delay:0}),e.dispose()}else{let e;const n=i.on("syntaxDiag",(r=>{void 0!==e&&window.clearTimeout(e),e=window.setTimeout((()=>{s.clear(),n.dispose(),t.reportProgress({max:a,value:a})}),2e3),"file"in r&&s.delete(r.file),0===s.size&&(n.dispose(),window.clearTimeout(e)),t.reportProgress({max:a,value:a-s.size})}));t.reportProgress({max:a,value:0}),await i.execute("geterrForProject",{file:r,delay:0})}}}))),Ui("atom-workspace","typescript:clear-errors",(t=>({description:"Clear error messages",didDispatch:function(){t.clearErrors()}}))),Ui("atom-text-editor","typescript:format-code",(t=>({description:"Format code in currently active text editor",didDispatch:async function(e){const n=e.getPath();if(void 0===n)return;const r=[];for(const t of e.getSelectedBufferRanges())t.isEmpty()||r.push({line:(i=t).start.row+1,offset:i.start.column+1,endLine:i.end.row+1,endOffset:i.end.column+1});var i;if(0===r.length){const t=e.getBuffer().getEndPosition();r.push({line:1,offset:1,endLine:t.row+1,endOffset:t.column+1})}const o=await t.getClient(n),s=[];for(const t of r){const e=await o.execute("format",{...t,file:n});e.body&&s.push(...e.body)}s.length>0&&e.transact((()=>{!function(t,e){for(let n=e.length-1;n>=0;n--)t.setTextInBufferRange(hn(e[n]),e[n].newText)}(e,s)}))}}))),Ui("atom-text-editor","typescript:initialize-config",(()=>({description:"Create tsconfig.json in the project related to currently-active text edtior",didDispatch:async function(t,e){const n=atom.project.getDirectories();if(0===n.length)return e();const r=t.getPath();if(void 0===r)return;const i=(await si(r,"tsc")).pathToBin;for(const t of n)t.contains(r)&&(await uo(i,t.getPath()),atom.notifications.addSuccess(`Successfully created tsconfig.json in ${t.getPath()}`))}}))),Ui("atom-text-editor","typescript:organize-imports",(t=>({description:"Organize module imports",didDispatch:async function(e){const n=e.getPath();if(void 0===n)return;const r=await t.getClient(n),i=await r.execute("organizeImports",{scope:{type:"file",args:{file:n}}});i.body.length>0&&await t.applyEdits(i.body)}}))),Ui("atom-text-editor","typescript:reload-projects",(t=>({description:"Reload projects",didDispatch:async function(e){const n=e.getPath();if(void 0===n)return;const r=await t.getClient(n);await r.execute("reloadProjects")}})));var lo,fo,po={},ho=!1;function go(){return ho||(ho=!0,lo={},function(){var e="object"==typeof self&&self.self===self&&self||"object"==typeof t&&t.global===t&&t||this||{},n=e._,r=Array.prototype,i=Object.prototype,o="undefined"!=typeof Symbol?Symbol.prototype:null,s=r.push,a=r.slice,c=i.toString,u=i.hasOwnProperty,l=Array.isArray,f=Object.keys,p=Object.create,h=function(){},d=function(t){return t instanceof d?t:this instanceof d?void(this._wrapped=t):new d(t)};void 0===lo||go().nodeType?e._=d:(!module.nodeType&&lo&&(lo=d),fo=d,lo._=fo),d.VERSION="1.9.1";var g,m=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return function(){return t.apply(e,arguments)}},v=function(t,e,n){return d.iteratee!==g?d.iteratee(t,e):null==t?d.identity:d.isFunction(t)?m(t,e,n):d.isObject(t)&&!d.isArray(t)?d.matcher(t):d.property(t)};d.iteratee=g=function(t,e){return v(t,e,1/0)};var y=function(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r);case 2:return t.call(this,arguments[0],arguments[1],r)}var o=Array(e+1);for(i=0;i<e;i++)o[i]=arguments[i];return o[e]=r,t.apply(this,o)}},w=function(t){if(!d.isObject(t))return{};if(p)return p(t);h.prototype=t;var e=new h;return h.prototype=null,e},b=function(t){return function(e){return null==e?void 0:e[t]}},_=function(t,e){return null!=t&&u.call(t,e)},x=function(t,e){for(var n=e.length,r=0;r<n;r++){if(null==t)return;t=t[e[r]]}return n?t:void 0},S=Math.pow(2,53)-1,k=b("length"),E=function(t){var e=k(t);return"number"==typeof e&&e>=0&&e<=S};d.each=d.forEach=function(t,e,n){var r,i;if(e=m(e,n),E(t))for(r=0,i=t.length;r<i;r++)e(t[r],r,t);else{var o=d.keys(t);for(r=0,i=o.length;r<i;r++)e(t[o[r]],o[r],t)}return t},d.map=d.collect=function(t,e,n){e=v(e,n);for(var r=!E(t)&&d.keys(t),i=(r||t).length,o=Array(i),s=0;s<i;s++){var a=r?r[s]:s;o[s]=e(t[a],a,t)}return o};var C=function(t){var e=function(e,n,r,i){var o=!E(e)&&d.keys(e),s=(o||e).length,a=t>0?0:s-1;for(i||(r=e[o?o[a]:a],a+=t);a>=0&&a<s;a+=t){var c=o?o[a]:a;r=n(r,e[c],c,e)}return r};return function(t,n,r,i){var o=arguments.length>=3;return e(t,m(n,i,4),r,o)}};d.reduce=d.foldl=d.inject=C(1),d.reduceRight=d.foldr=C(-1),d.find=d.detect=function(t,e,n){var r=(E(t)?d.findIndex:d.findKey)(t,e,n);if(void 0!==r&&-1!==r)return t[r]},d.filter=d.select=function(t,e,n){var r=[];return e=v(e,n),d.each(t,(function(t,n,i){e(t,n,i)&&r.push(t)})),r},d.reject=function(t,e,n){return d.filter(t,d.negate(v(e)),n)},d.every=d.all=function(t,e,n){e=v(e,n);for(var r=!E(t)&&d.keys(t),i=(r||t).length,o=0;o<i;o++){var s=r?r[o]:o;if(!e(t[s],s,t))return!1}return!0},d.some=d.any=function(t,e,n){e=v(e,n);for(var r=!E(t)&&d.keys(t),i=(r||t).length,o=0;o<i;o++){var s=r?r[o]:o;if(e(t[s],s,t))return!0}return!1},d.contains=d.includes=d.include=function(t,e,n,r){return E(t)||(t=d.values(t)),("number"!=typeof n||r)&&(n=0),d.indexOf(t,e,n)>=0},d.invoke=y((function(t,e,n){var r,i;return d.isFunction(e)?i=e:d.isArray(e)&&(r=e.slice(0,-1),e=e[e.length-1]),d.map(t,(function(t){var o=i;if(!o){if(r&&r.length&&(t=x(t,r)),null==t)return;o=t[e]}return null==o?o:o.apply(t,n)}))})),d.pluck=function(t,e){return d.map(t,d.property(e))},d.where=function(t,e){return d.filter(t,d.matcher(e))},d.findWhere=function(t,e){return d.find(t,d.matcher(e))},d.max=function(t,e,n){var r,i,o=-1/0,s=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var a=0,c=(t=E(t)?t:d.values(t)).length;a<c;a++)null!=(r=t[a])&&r>o&&(o=r);else e=v(e,n),d.each(t,(function(t,n,r){((i=e(t,n,r))>s||i===-1/0&&o===-1/0)&&(o=t,s=i)}));return o},d.min=function(t,e,n){var r,i,o=1/0,s=1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var a=0,c=(t=E(t)?t:d.values(t)).length;a<c;a++)null!=(r=t[a])&&r<o&&(o=r);else e=v(e,n),d.each(t,(function(t,n,r){((i=e(t,n,r))<s||i===1/0&&o===1/0)&&(o=t,s=i)}));return o},d.shuffle=function(t){return d.sample(t,1/0)},d.sample=function(t,e,n){if(null==e||n)return E(t)||(t=d.values(t)),t[d.random(t.length-1)];var r=E(t)?d.clone(t):d.values(t),i=k(r);e=Math.max(Math.min(e,i),0);for(var o=i-1,s=0;s<e;s++){var a=d.random(s,o),c=r[s];r[s]=r[a],r[a]=c}return r.slice(0,e)},d.sortBy=function(t,e,n){var r=0;return e=v(e,n),d.pluck(d.map(t,(function(t,n,i){return{value:t,index:r++,criteria:e(t,n,i)}})).sort((function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index})),"value")};var T=function(t,e){return function(n,r,i){var o=e?[[],[]]:{};return r=v(r,i),d.each(n,(function(e,i){var s=r(e,i,n);t(o,e,s)})),o}};d.groupBy=T((function(t,e,n){_(t,n)?t[n].push(e):t[n]=[e]})),d.indexBy=T((function(t,e,n){t[n]=e})),d.countBy=T((function(t,e,n){_(t,n)?t[n]++:t[n]=1}));var A=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;d.toArray=function(t){return t?d.isArray(t)?a.call(t):d.isString(t)?t.match(A):E(t)?d.map(t,d.identity):d.values(t):[]},d.size=function(t){return null==t?0:E(t)?t.length:d.keys(t).length},d.partition=T((function(t,e,n){t[n?0:1].push(e)}),!0),d.first=d.head=d.take=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[0]:d.initial(t,t.length-e)},d.initial=function(t,e,n){return a.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},d.last=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[t.length-1]:d.rest(t,Math.max(0,t.length-e))},d.rest=d.tail=d.drop=function(t,e,n){return a.call(t,null==e||n?1:e)},d.compact=function(t){return d.filter(t,Boolean)};var P=function(t,e,n,r){for(var i=(r=r||[]).length,o=0,s=k(t);o<s;o++){var a=t[o];if(E(a)&&(d.isArray(a)||d.isArguments(a)))if(e)for(var c=0,u=a.length;c<u;)r[i++]=a[c++];else P(a,e,n,r),i=r.length;else n||(r[i++]=a)}return r};d.flatten=function(t,e){return P(t,e,!1)},d.without=y((function(t,e){return d.difference(t,e)})),d.uniq=d.unique=function(t,e,n,r){d.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=v(n,r));for(var i=[],o=[],s=0,a=k(t);s<a;s++){var c=t[s],u=n?n(c,s,t):c;e&&!n?(s&&o===u||i.push(c),o=u):n?d.contains(o,u)||(o.push(u),i.push(c)):d.contains(i,c)||i.push(c)}return i},d.union=y((function(t){return d.uniq(P(t,!0,!0))})),d.intersection=function(t){for(var e=[],n=arguments.length,r=0,i=k(t);r<i;r++){var o=t[r];if(!d.contains(e,o)){var s;for(s=1;s<n&&d.contains(arguments[s],o);s++);s===n&&e.push(o)}}return e},d.difference=y((function(t,e){return e=P(e,!0,!0),d.filter(t,(function(t){return!d.contains(e,t)}))})),d.unzip=function(t){for(var e=t&&d.max(t,k).length||0,n=Array(e),r=0;r<e;r++)n[r]=d.pluck(t,r);return n},d.zip=y(d.unzip),d.object=function(t,e){for(var n={},r=0,i=k(t);r<i;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n};var O=function(t){return function(e,n,r){n=v(n,r);for(var i=k(e),o=t>0?0:i-1;o>=0&&o<i;o+=t)if(n(e[o],o,e))return o;return-1}};d.findIndex=O(1),d.findLastIndex=O(-1),d.sortedIndex=function(t,e,n,r){for(var i=(n=v(n,r,1))(e),o=0,s=k(t);o<s;){var a=Math.floor((o+s)/2);n(t[a])<i?o=a+1:s=a}return o};var I=function(t,e,n){return function(r,i,o){var s=0,c=k(r);if("number"==typeof o)t>0?s=o>=0?o:Math.max(o+c,s):c=o>=0?Math.min(o+1,c):o+c+1;else if(n&&o&&c)return r[o=n(r,i)]===i?o:-1;if(i!=i)return(o=e(a.call(r,s,c),d.isNaN))>=0?o+s:-1;for(o=t>0?s:c-1;o>=0&&o<c;o+=t)if(r[o]===i)return o;return-1}};d.indexOf=I(1,d.findIndex,d.sortedIndex),d.lastIndexOf=I(-1,d.findLastIndex),d.range=function(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;o<r;o++,t+=n)i[o]=t;return i},d.chunk=function(t,e){if(null==e||e<1)return[];for(var n=[],r=0,i=t.length;r<i;)n.push(a.call(t,r,r+=e));return n};var j=function(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var o=w(t.prototype),s=t.apply(o,i);return d.isObject(s)?s:o};d.bind=y((function(t,e,n){if(!d.isFunction(t))throw new TypeError("Bind must be called on a function");var r=y((function(i){return j(t,r,e,this,n.concat(i))}));return r})),d.partial=y((function(t,e){var n=d.partial.placeholder,r=function(){for(var i=0,o=e.length,s=Array(o),a=0;a<o;a++)s[a]=e[a]===n?arguments[i++]:e[a];for(;i<arguments.length;)s.push(arguments[i++]);return j(t,r,this,this,s)};return r})),d.partial.placeholder=d,d.bindAll=y((function(t,e){var n=(e=P(e,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=e[n];t[r]=d.bind(t[r],t)}})),d.memoize=function(t,e){var n=function(r){var i=n.cache,o=""+(e?e.apply(this,arguments):r);return _(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n},d.delay=y((function(t,e,n){return setTimeout((function(){return t.apply(null,n)}),e)})),d.defer=d.partial(d.delay,d,1),d.throttle=function(t,e,n){var r,i,o,s,a=0;n||(n={});var c=function(){a=!1===n.leading?0:d.now(),r=null,s=t.apply(i,o),r||(i=o=null)},u=function(){var u=d.now();a||!1!==n.leading||(a=u);var l=e-(u-a);return i=this,o=arguments,l<=0||l>e?(r&&(clearTimeout(r),r=null),a=u,s=t.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(c,l)),s};return u.cancel=function(){clearTimeout(r),a=0,r=i=o=null},u},d.debounce=function(t,e,n){var r,i,o=function(e,n){r=null,n&&(i=t.apply(e,n))},s=y((function(s){if(r&&clearTimeout(r),n){var a=!r;r=setTimeout(o,e),a&&(i=t.apply(this,s))}else r=d.delay(o,e,this,s);return i}));return s.cancel=function(){clearTimeout(r),r=null},s},d.wrap=function(t,e){return d.partial(e,t)},d.negate=function(t){return function(){return!t.apply(this,arguments)}},d.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},d.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},d.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},d.once=d.partial(d.before,2),d.restArguments=y;var N=!{toString:null}.propertyIsEnumerable("toString"),L=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],F=function(t,e){var n=L.length,r=t.constructor,o=d.isFunction(r)&&r.prototype||i,s="constructor";for(_(t,s)&&!d.contains(e,s)&&e.push(s);n--;)(s=L[n])in t&&t[s]!==o[s]&&!d.contains(e,s)&&e.push(s)};d.keys=function(t){if(!d.isObject(t))return[];if(f)return f(t);var e=[];for(var n in t)_(t,n)&&e.push(n);return N&&F(t,e),e},d.allKeys=function(t){if(!d.isObject(t))return[];var e=[];for(var n in t)e.push(n);return N&&F(t,e),e},d.values=function(t){for(var e=d.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r},d.mapObject=function(t,e,n){e=v(e,n);for(var r=d.keys(t),i=r.length,o={},s=0;s<i;s++){var a=r[s];o[a]=e(t[a],a,t)}return o},d.pairs=function(t){for(var e=d.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=[e[i],t[e[i]]];return r},d.invert=function(t){for(var e={},n=d.keys(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e},d.functions=d.methods=function(t){var e=[];for(var n in t)d.isFunction(t[n])&&e.push(n);return e.sort()};var D=function(t,e){return function(n){var r=arguments.length;if(e&&(n=Object(n)),r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],s=t(o),a=s.length,c=0;c<a;c++){var u=s[c];e&&void 0!==n[u]||(n[u]=o[u])}return n}};d.extend=D(d.allKeys),d.extendOwn=d.assign=D(d.keys),d.findKey=function(t,e,n){e=v(e,n);for(var r,i=d.keys(t),o=0,s=i.length;o<s;o++)if(e(t[r=i[o]],r,t))return r};var M,R,$=function(t,e,n){return e in n};d.pick=y((function(t,e){var n={},r=e[0];if(null==t)return n;d.isFunction(r)?(e.length>1&&(r=m(r,e[1])),e=d.allKeys(t)):(r=$,e=P(e,!1,!1),t=Object(t));for(var i=0,o=e.length;i<o;i++){var s=e[i],a=t[s];r(a,s,t)&&(n[s]=a)}return n})),d.omit=y((function(t,e){var n,r=e[0];return d.isFunction(r)?(r=d.negate(r),e.length>1&&(n=e[1])):(e=d.map(P(e,!1,!1),String),r=function(t,n){return!d.contains(e,n)}),d.pick(t,r,n)})),d.defaults=D(d.allKeys,!0),d.create=function(t,e){var n=w(t);return e&&d.extendOwn(n,e),n},d.clone=function(t){return d.isObject(t)?d.isArray(t)?t.slice():d.extend({},t):t},d.tap=function(t,e){return e(t),t},d.isMatch=function(t,e){var n=d.keys(e),r=n.length;if(null==t)return!r;for(var i=Object(t),o=0;o<r;o++){var s=n[o];if(e[s]!==i[s]||!(s in i))return!1}return!0},M=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var i=typeof t;return("function"===i||"object"===i||"object"==typeof e)&&R(t,e,n,r)},R=function(t,e,n,r){t instanceof d&&(t=t._wrapped),e instanceof d&&(e=e._wrapped);var i=c.call(t);if(i!==c.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return o.valueOf.call(t)===o.valueOf.call(e)}var s="[object Array]"===i;if(!s){if("object"!=typeof t||"object"!=typeof e)return!1;var a=t.constructor,u=e.constructor;if(a!==u&&!(d.isFunction(a)&&a instanceof a&&d.isFunction(u)&&u instanceof u)&&"constructor"in t&&"constructor"in e)return!1}r=r||[];for(var l=(n=n||[]).length;l--;)if(n[l]===t)return r[l]===e;if(n.push(t),r.push(e),s){if((l=t.length)!==e.length)return!1;for(;l--;)if(!M(t[l],e[l],n,r))return!1}else{var f,p=d.keys(t);if(l=p.length,d.keys(e).length!==l)return!1;for(;l--;)if(f=p[l],!_(e,f)||!M(t[f],e[f],n,r))return!1}return n.pop(),r.pop(),!0},d.isEqual=function(t,e){return M(t,e)},d.isEmpty=function(t){return null==t||(E(t)&&(d.isArray(t)||d.isString(t)||d.isArguments(t))?0===t.length:0===d.keys(t).length)},d.isElement=function(t){return!(!t||1!==t.nodeType)},d.isArray=l||function(t){return"[object Array]"===c.call(t)},d.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},d.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],(function(t){d["is"+t]=function(e){return c.call(e)==="[object "+t+"]"}})),d.isArguments(arguments)||(d.isArguments=function(t){return _(t,"callee")});var B=e.document&&e.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof B&&(d.isFunction=function(t){return"function"==typeof t||!1}),d.isFinite=function(t){return!d.isSymbol(t)&&isFinite(t)&&!isNaN(parseFloat(t))},d.isNaN=function(t){return d.isNumber(t)&&isNaN(t)},d.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===c.call(t)},d.isNull=function(t){return null===t},d.isUndefined=function(t){return void 0===t},d.has=function(t,e){if(!d.isArray(e))return _(t,e);for(var n=e.length,r=0;r<n;r++){var i=e[r];if(null==t||!u.call(t,i))return!1;t=t[i]}return!!n},d.noConflict=function(){return e._=n,this},d.identity=function(t){return t},d.constant=function(t){return function(){return t}},d.noop=function(){},d.property=function(t){return d.isArray(t)?function(e){return x(e,t)}:b(t)},d.propertyOf=function(t){return null==t?function(){}:function(e){return d.isArray(e)?x(t,e):t[e]}},d.matcher=d.matches=function(t){return t=d.extendOwn({},t),function(e){return d.isMatch(e,t)}},d.times=function(t,e,n){var r=Array(Math.max(0,t));e=m(e,n,1);for(var i=0;i<t;i++)r[i]=e(i);return r},d.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},d.now=Date.now||function(){return(new Date).getTime()};var z={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},q=d.invert(z),H=function(t){var e=function(e){return t[e]},n="(?:"+d.keys(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,e):t}};d.escape=H(z),d.unescape=H(q),d.result=function(t,e,n){d.isArray(e)||(e=[e]);var r=e.length;if(!r)return d.isFunction(n)?n.call(t):n;for(var i=0;i<r;i++){var o=null==t?void 0:t[e[i]];void 0===o&&(o=n,i=r),t=d.isFunction(o)?o.call(t):o}return t};var U=0;d.uniqueId=function(t){var e=++U+"";return t?t+e:e},d.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var V=/(.)^/,W={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},G=/\\|'|\r|\n|\u2028|\u2029/g,K=function(t){return"\\"+W[t]};d.template=function(t,e,n){!e&&n&&(e=n),e=d.defaults({},e,d.templateSettings);var r,i=RegExp([(e.escape||V).source,(e.interpolate||V).source,(e.evaluate||V).source].join("|")+"|$","g"),o=0,s="__p+='";t.replace(i,(function(e,n,r,i,a){return s+=t.slice(o,a).replace(G,K),o=a+e.length,n?s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?s+="'+\n((__t=("+r+"))==null?'':__t)+\n'":i&&(s+="';\n"+i+"\n__p+='"),e})),s+="';\n",e.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{r=new Function(e.variable||"obj","_",s)}catch(t){throw t.source=s,t}var a=function(t){return r.call(this,t,d)},c=e.variable||"obj";return a.source="function("+c+"){\n"+s+"}",a},d.chain=function(t){var e=d(t);return e._chain=!0,e};var Q=function(t,e){return t._chain?d(e).chain():e};d.mixin=function(t){return d.each(d.functions(t),(function(e){var n=d[e]=t[e];d.prototype[e]=function(){var t=[this._wrapped];return s.apply(t,arguments),Q(this,n.apply(d,t))}})),d},d.mixin(d),d.each(["pop","push","reverse","shift","sort","splice","unshift"],(function(t){var e=r[t];d.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],Q(this,n)}})),d.each(["concat","join","slice"],(function(t){var e=r[t];d.prototype[t]=function(){return Q(this,e.apply(this._wrapped,arguments))}})),d.prototype.value=function(){return this._wrapped},d.prototype.valueOf=d.prototype.toJSON=d.prototype.value,d.prototype.toString=function(){return String(this._wrapped)},"function"==typeof define&&define.amd&&define("underscore",[],(function(){return d}))}()),lo}var mo,vo=!1;function yo(){return vo||(vo=!0,function(){var t,e,n,r,i,o,s,a,c=[].slice;a=go(),n={cmd:"⌘",ctrl:"⌃",alt:"⌥",option:"⌥",shift:"⇧",enter:"⏎",left:"←",right:"→",up:"↑",down:"↓"},r={cmd:"Cmd",ctrl:"Ctrl",alt:"Alt",option:"Alt",shift:"Shift",enter:"Enter",left:"Left",right:"Right",up:"Up",down:"Down"},o={"~":"`",_:"-","+":"=","|":"\\","{":"[","}":"]",":":";",'"':"'","<":",",">":".","?":"/"},s=function(t){var e,n,r,i,o;if(r=0,n=[],null==t)return n;for(e=i=0,o=t.length;i<o;e=++i)"."!==t[e]||0!==e&&"\\"===t[e-1]||(n.push(t.substring(r,e)),r=e+1);return n.push(t.substr(r,t.length)),n},e=function(t){return a.isObject(t)&&!a.isArray(t)},i={adviseBefore:function(t,e,n){var r;return r=t[e],t[e]=function(){var t;if(t=1<=arguments.length?c.call(arguments,0):[],!1!==n.apply(this,t))return r.apply(this,t)}},camelize:function(t){return t?t.replace(/[_-]+(\w)/g,(function(t){return t[1].toUpperCase()})):""},capitalize:function(t){return t?"github"===t.toLowerCase()?"GitHub":t[0].toUpperCase()+t.slice(1):""},compactObject:function(t){var e,n,r;for(e in n={},t)null!=(r=t[e])&&(n[e]=r);return n},dasherize:function(t){return t?(t=t[0].toLowerCase()+t.slice(1)).replace(/([A-Z])|(_)/g,(function(t,e){return e?"-"+e.toLowerCase():"-"})):""},deepClone:function(t){return a.isArray(t)?t.map((function(t){return i.deepClone(t)})):a.isObject(t)&&!a.isFunction(t)?i.mapObject(t,(function(t,e){return[t,i.deepClone(e)]})):t},deepExtend:function(t){var n,r,o,s,a,c,u;for(s=t,n=0;++n<arguments.length;)if(o=arguments[n],e(s)&&e(o))for(a=0,c=(u=Object.keys(o)).length;a<c;a++)s[r=u[a]]=i.deepExtend(s[r],o[r]);else s=i.deepClone(o);return s},deepContains:function(t,e){var n,r,i;if(null==t)return!1;for(r=0,i=t.length;r<i;r++)if(n=t[r],a.isEqual(n,e))return!0;return!1},endsWith:function(t,e){return null==e&&(e=""),!!t&&-1!==t.indexOf(e,t.length-e.length)},escapeAttribute:function(t){return t?t.replace(/"/g,"&quot;").replace(/\n/g,"").replace(/\\/g,"-"):""},escapeRegExp:function(t){return t?t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"):""},humanizeEventName:function(t,e){var n,r,o,s;return r=(s=t.split(":"))[0],null==(n=s[1])?i.undasherize(r):(o=i.undasherize(r),null==e&&(e=i.undasherize(n)),o+": "+e)},humanizeKey:function(t,e){var s;return null==e&&(e=process.platform),t?(s="darwin"===e?n:r)[t]?s[t]:1===t.length&&null!=o[t]?[s.shift,o[t]]:1===t.length&&t===t.toUpperCase()&&t.toUpperCase()!==t.toLowerCase()?[s.shift,t.toUpperCase()]:1===t.length||/f[0-9]{1,2}/.test(t)?t.toUpperCase():"darwin"===e?t:i.capitalize(t):t},humanizeKeystroke:function(t,e){var n,r,o,s,c,u,l,f,p,h;if(null==e&&(e=process.platform),!t)return t;for(n=[],l=0,p=(c=t.split(" ")).length;l<p;l++){for(s=[],r=f=0,h=(u=(t=c[l]).split("-")).length;f<h;r=++f)""===(o=u[r])&&""===u[r-1]&&(o="-"),o&&s.push(i.humanizeKey(o,e));s=a.uniq(a.flatten(s)),s="darwin"===e?s.join(""):s.join("+"),n.push(s)}return n.join(" ")},isSubset:function(t,e){return a.every(t,(function(t){return a.include(e,t)}))},losslessInvert:function(t){var e,n,r;for(n in e={},t)null==e[r=t[n]]&&(e[r]=[]),e[r].push(n);return e},mapObject:function(t,e){var n,r,i,o,s,a,c;for(r={},o=0,s=(a=Object.keys(t)).length;o<s;o++)n=(c=e(n=a[o],t[n]))[0],i=c[1],r[n]=i;return r},multiplyString:function(t,e){var n,r;for(n="",r=0;r<e;)n+=t,r++;return n},pluralize:function(t,e,n){return null==t&&(t=0),null==n&&(n=e+"s"),1===t?t+" "+e:t+" "+n},remove:function(t,e){var n;return(n=t.indexOf(e))>=0&&t.splice(n,1),t},setValueForKeyPath:function(t,e,n){var r,i;for(i=s(e);i.length>1;)null==t[r=i.shift()]&&(t[r]={}),t=t[r];return null!=n?t[i.shift()]=n:delete t[i.shift()]},hasKeyPath:function(t,e){var n,r,i,o;for(i=0,o=(r=s(e)).length;i<o;i++){if(n=r[i],!t.hasOwnProperty(n))return!1;t=t[n]}return!0},spliceWithArray:function(t,e,n,r,i){var o,s,a,u;if(null==i&&(i=1e5),r.length<i)return t.splice.apply(t,[e,n].concat(c.call(r)));for(t.splice(e,n),u=[],o=s=0,a=r.length;i>0?s<=a:s>=a;o=s+=i)u.push(t.splice.apply(t,[e+o,0].concat(c.call(r.slice(o,o+i)))));return u},sum:function(t){var e,n,r;for(e=0,n=0,r=t.length;n<r;n++)e+=t[n];return e},uncamelcase:function(t){var e;return t?(e=t.replace(/([A-Z])|_+/g,(function(t,e){return null==e&&(e="")," "+e})),i.capitalize(e.trim())):""},undasherize:function(t){return t?t.split("-").map(i.capitalize).join(" "):""},underscore:function(t){return t?(t=t[0].toLowerCase()+t.slice(1)).replace(/([A-Z])|-+/g,(function(t,e){return null==e&&(e=""),"_"+e.toLowerCase()})):""},valueForKeyPath:function(t,e){var n,r,i;for(r=0,i=(n=s(e)).length;r<i;r++)if(null==(t=t[n[r]]))return;return t},isEqual:function(e,n,r,i){return a.isArray(r)&&a.isArray(i)?t(e,n,r,i):t(e,n)},isEqualForProperties:function(){var t,e,n,r,i,o;for(t=arguments[0],e=arguments[1],i=0,o=(n=3<=arguments.length?c.call(arguments,2):[]).length;i<o;i++)if(r=n[i],!a.isEqual(t[r],e[r]))return!1;return!0}},t=function(e,n,r,i){var o,s,c,u,l,f,p,h,d,g,m,v,y,w;if(null==r&&(r=[]),null==i&&(i=[]),e===n)return a.isEqual(e,n);if(a.isFunction(e)||a.isFunction(n))return a.isEqual(e,n);for(v=r.length;v--;)if(r[v]===e)return i[v]===n;if(r.push(e),i.push(n),d=!1,a.isFunction(null!=e?e.isEqual:void 0))d=e.isEqual(n,r,i);else if(a.isFunction(null!=n?n.isEqual:void 0))d=n.isEqual(e,i,r);else if(a.isArray(e)&&a.isArray(n)&&e.length===n.length){for(d=!0,g=y=0,w=e.length;y<w;g=++y)if(c=e[g],!t(c,n[g],r,i)){d=!1;break}}else if(a.isRegExp(e)&&a.isRegExp(n))d=a.isEqual(e,n);else if(a.isElement(e)&&a.isElement(n))d=e===n;else if(a.isObject(e)&&a.isObject(n))if(o=e.constructor,f=n.constructor,s=a.isFunction(o)&&o instanceof o,p=a.isFunction(f)&&f instanceof f,o===f||s&&p){for(m in u=0,d=!0,e)if(l=e[m],a.has(e,m)&&(u++,!a.has(n,m)||!t(l,n[m],r,i))){d=!1;break}if(d){for(m in h=0,n)n[m],a.has(n,m)&&h++;d=u===h}}else d=!1;else d=a.isEqual(e,n);return r.pop(),i.pop(),d},mo=a.extend({},a,i)}.call(mo={})),mo}var wo,bo=!1;function _o(){wo={},
/*!
  * async
  * https://github.com/caolan/async
  *
  * Copyright 2010-2014 Caolan McMahon
  * Released under the MIT license
  */
function(){var e,n={};function r(){}function i(t){return t}function o(t){return!!t}function a(t){return!t}var c="object"==typeof self&&self.self===self&&self||"object"==typeof t&&t.global===t&&t||this;function u(t){return function(){if(null===t)throw new Error("Callback was already called.");t.apply(this,arguments),t=null}}function l(t){return function(){null!==t&&(t.apply(this,arguments),t=null)}}null!=c&&(e=c.async),n.noConflict=function(){return c.async=e,n};var f=Object.prototype.toString,p=Array.isArray||function(t){return"[object Array]"===f.call(t)};function h(t){return p(t)||"number"==typeof t.length&&t.length>=0&&t.length%1==0}function d(t,e){for(var n=-1,r=t.length;++n<r;)e(t[n],n,t)}function g(t,e){for(var n=-1,r=t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function m(t){return g(Array(t),(function(t,e){return e}))}function v(t,e,n){return d(t,(function(t,r,i){n=e(n,t,r,i)})),n}function y(t,e){d(b(t),(function(n){e(t[n],n)}))}function w(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var b=Object.keys||function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e};function _(t){var e,n,r=-1;return h(t)?(e=t.length,function(){return++r<e?r:null}):(n=b(t),e=n.length,function(){return++r<e?n[r]:null})}function x(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r)}}}function S(t){return function(e,n,r){return t(e,r)}}var k="function"==typeof s&&s,E=k?function(t){k(t)}:function(t){setTimeout(t,0)};function C(t){return function(e,n,i){i=l(i||r);var o=_(e=e||[]);if(t<=0)return i(null);var s=!1,a=0,c=!1;!function r(){if(s&&a<=0)return i(null);for(;a<t&&!c;){var l=o();if(null===l)return s=!0,void(a<=0&&i(null));a+=1,n(e[l],l,u((function(t){a-=1,t?(i(t),c=!0):r()})))}}()}}function T(t){return function(e,r,i){return t(n.eachOf,e,r,i)}}function A(t){return function(e,n,r,i){return t(C(n),e,r,i)}}function P(t){return function(e,r,i){return t(n.eachOfSeries,e,r,i)}}function O(t,e,n,i){i=l(i||r);var o=h(e=e||[])?[]:{};t(e,(function(t,e,r){n(t,(function(t,n){o[e]=n,r(t)}))}),(function(t){i(t,o)}))}function I(t,e,n,r){var i=[];t(e,(function(t,e,r){n(t,(function(n){n&&i.push({index:e,value:t}),r()}))}),(function(){r(g(i.sort((function(t,e){return t.index-e.index})),(function(t){return t.value})))}))}function j(t,e,n,r){I(t,e,(function(t,e){n(t,(function(t){e(!t)}))}),r)}function N(t,e,n){return function(r,i,o,s){function a(){s&&s(n(!1,void 0))}function c(t,r,i){if(!s)return i();o(t,(function(r){s&&e(r)&&(s(n(!0,t)),s=o=!1),i()}))}arguments.length>3?t(r,i,c,a):(s=o,o=i,t(r,c,a))}}function L(t,e){return e}function F(t,e,n){n=n||r;var i=h(e)?[]:{};t(e,(function(t,e,n){t(x((function(t,r){r.length<=1&&(r=r[0]),i[e]=r,n(t)})))}),(function(t){n(t,i)}))}function D(t,e,n,r){var i=[];t(e,(function(t,e,r){n(t,(function(t,e){i=i.concat(e||[]),r(t)}))}),(function(t){r(t,i)}))}function M(t,e,i){if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");function o(t,e,i,o){if(null!=o&&"function"!=typeof o)throw new Error("task callback must be a function");if(t.started=!0,p(e)||(e=[e]),0===e.length&&t.idle())return n.setImmediate((function(){t.drain()}));d(e,(function(e){var n={data:e,callback:o||r};i?t.tasks.unshift(n):t.tasks.push(n),t.tasks.length===t.concurrency&&t.saturated()})),n.setImmediate(t.process)}function s(t,e){return function(){a-=1;var n=!1,r=arguments;d(e,(function(t){d(c,(function(e,r){e!==t||n||(c.splice(r,1),n=!0)})),t.callback.apply(t,r)})),t.tasks.length+a===0&&t.drain(),t.process()}}var a=0,c=[],l={tasks:[],concurrency:e,payload:i,saturated:r,empty:r,drain:r,started:!1,paused:!1,push:function(t,e){o(l,t,!1,e)},kill:function(){l.drain=r,l.tasks=[]},unshift:function(t,e){o(l,t,!0,e)},process:function(){for(;!l.paused&&a<l.concurrency&&l.tasks.length;){var e=l.payload?l.tasks.splice(0,l.payload):l.tasks.splice(0,l.tasks.length),n=g(e,(function(t){return t.data}));0===l.tasks.length&&l.empty(),a+=1,c.push(e[0]);var r=u(s(l,e));t(n,r)}},length:function(){return l.tasks.length},running:function(){return a},workersList:function(){return c},idle:function(){return l.tasks.length+a===0},pause:function(){l.paused=!0},resume:function(){if(!1!==l.paused){l.paused=!1;for(var t=Math.min(l.concurrency,l.tasks.length),e=1;e<=t;e++)n.setImmediate(l.process)}}};return l}function R(t){return x((function(e,n){e.apply(null,n.concat([x((function(e,n){"object"==typeof console&&(e?console.error&&console.error(e):console[t]&&d(n,(function(e){console[t](e)})))}))]))}))}function $(t){return function(e,n,r){t(m(e),n,r)}}function B(t){return x((function(e,n){var r=x((function(n){var r=this,i=n.pop();return t(e,(function(t,e,i){t.apply(r,n.concat([i]))}),i)}));return n.length?r.apply(this,n):r}))}function z(t){return x((function(e){var r=e.pop();e.push((function(){var t=arguments;i?n.setImmediate((function(){r.apply(null,t)})):r.apply(null,t)}));var i=!0;t.apply(this,e),i=!1}))}"object"==typeof process&&"function"==typeof process.nextTick?n.nextTick=process.nextTick:n.nextTick=E,n.setImmediate=k?E:n.nextTick,n.forEach=n.each=function(t,e,r){return n.eachOf(t,S(e),r)},n.forEachSeries=n.eachSeries=function(t,e,r){return n.eachOfSeries(t,S(e),r)},n.forEachLimit=n.eachLimit=function(t,e,n,r){return C(e)(t,S(n),r)},n.forEachOf=n.eachOf=function(t,e,n){n=l(n||r);for(var i,o=_(t=t||[]),s=0;null!=(i=o());)s+=1,e(t[i],i,u(a));function a(t){s--,t?n(t):null===i&&s<=0&&n(null)}0===s&&n(null)},n.forEachOfSeries=n.eachOfSeries=function(t,e,i){i=l(i||r);var o=_(t=t||[]),s=o();!function r(){var a=!0;if(null===s)return i(null);e(t[s],s,u((function(t){if(t)i(t);else{if(null===(s=o()))return i(null);a?n.setImmediate(r):r()}}))),a=!1}()},n.forEachOfLimit=n.eachOfLimit=function(t,e,n,r){C(e)(t,n,r)},n.map=T(O),n.mapSeries=P(O),n.mapLimit=A(O),n.inject=n.foldl=n.reduce=function(t,e,r,i){n.eachOfSeries(t,(function(t,n,i){r(e,t,(function(t,n){e=n,i(t)}))}),(function(t){i(t,e)}))},n.foldr=n.reduceRight=function(t,e,r,o){var s=g(t,i).reverse();n.reduce(s,e,r,o)},n.transform=function(t,e,r,i){3===arguments.length&&(i=r,r=e,e=p(t)?[]:{}),n.eachOf(t,(function(t,n,i){r(e,t,n,i)}),(function(t){i(t,e)}))},n.select=n.filter=T(I),n.selectLimit=n.filterLimit=A(I),n.selectSeries=n.filterSeries=P(I),n.reject=T(j),n.rejectLimit=A(j),n.rejectSeries=P(j),n.any=n.some=N(n.eachOf,o,i),n.someLimit=N(n.eachOfLimit,o,i),n.all=n.every=N(n.eachOf,a,a),n.everyLimit=N(n.eachOfLimit,a,a),n.detect=N(n.eachOf,i,L),n.detectSeries=N(n.eachOfSeries,i,L),n.detectLimit=N(n.eachOfLimit,i,L),n.sortBy=function(t,e,r){function i(t,e){var n=t.criteria,r=e.criteria;return n<r?-1:n>r?1:0}n.map(t,(function(t,n){e(t,(function(e,r){e?n(e):n(null,{value:t,criteria:r})}))}),(function(t,e){if(t)return r(t);r(null,g(e.sort(i),(function(t){return t.value})))}))},n.auto=function(t,e,i){"function"==typeof arguments[1]&&(i=e,e=null),i=l(i||r);var o=b(t),s=o.length;if(!s)return i(null);e||(e=s);var a={},c=0,u=!1,f=[];function h(t){f.unshift(t)}function g(t){var e=w(f,t);e>=0&&f.splice(e,1)}function m(){s--,d(f.slice(0),(function(t){t()}))}h((function(){s||i(null,a)})),d(o,(function(r){if(!u){for(var o,s=p(t[r])?t[r]:[t[r]],l=x((function(t,e){if(c--,e.length<=1&&(e=e[0]),t){var o={};y(a,(function(t,e){o[e]=t})),o[r]=e,u=!0,i(t,o)}else a[r]=e,n.setImmediate(m)})),f=s.slice(0,s.length-1),d=f.length;d--;){if(!(o=t[f[d]]))throw new Error("Has nonexistent dependency in "+f.join(", "));if(p(o)&&w(o,r)>=0)throw new Error("Has cyclic dependencies")}b()?(c++,s[s.length-1](l,a)):h((function t(){b()&&(c++,g(t),s[s.length-1](l,a))}))}function b(){return c<e&&v(f,(function(t,e){return t&&a.hasOwnProperty(e)}),!0)&&!a.hasOwnProperty(r)}}))},n.retry=function(t,e,r){var i=5,o=0,s=[],a={times:i,interval:o};function c(t,e){if("number"==typeof e)t.times=parseInt(e,10)||i;else{if("object"!=typeof e)throw new Error("Unsupported argument type for 'times': "+typeof e);t.times=parseInt(e.times,10)||i,t.interval=parseInt(e.interval,10)||o}}var u=arguments.length;if(u<1||u>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");function l(t,e){function r(t,n){return function(r){t((function(t,e){r(!t||n,{err:t,result:e})}),e)}}function i(t){return function(e){setTimeout((function(){e(null)}),t)}}for(;a.times;){var o=!(a.times-=1);s.push(r(a.task,o)),!o&&a.interval>0&&s.push(i(a.interval))}n.series(s,(function(e,n){n=n[n.length-1],(t||a.callback)(n.err,n.result)}))}return u<=2&&"function"==typeof t&&(r=e,e=t),"function"!=typeof t&&c(a,t),a.callback=r,a.task=e,a.callback?l():l},n.waterfall=function(t,e){if(e=l(e||r),!p(t)){var i=new Error("First argument to waterfall must be an array of functions");return e(i)}if(!t.length)return e();!function t(n){return x((function(r,i){if(r)e.apply(null,[r].concat(i));else{var o=n.next();o?i.push(t(o)):i.push(e),z(n).apply(null,i)}}))}(n.iterator(t))()},n.parallel=function(t,e){F(n.eachOf,t,e)},n.parallelLimit=function(t,e,n){F(C(e),t,n)},n.series=function(t,e){F(n.eachOfSeries,t,e)},n.iterator=function(t){return function e(n){function r(){return t.length&&t[n].apply(null,arguments),r.next()}return r.next=function(){return n<t.length-1?e(n+1):null},r}(0)},n.apply=x((function(t,e){return x((function(n){return t.apply(null,e.concat(n))}))})),n.concat=T(D),n.concatSeries=P(D),n.whilst=function(t,e,n){if(n=n||r,t()){var i=x((function(r,o){r?n(r):t.apply(this,o)?e(i):n.apply(null,[null].concat(o))}));e(i)}else n(null)},n.doWhilst=function(t,e,r){var i=0;return n.whilst((function(){return++i<=1||e.apply(this,arguments)}),t,r)},n.until=function(t,e,r){return n.whilst((function(){return!t.apply(this,arguments)}),e,r)},n.doUntil=function(t,e,r){return n.doWhilst(t,(function(){return!e.apply(this,arguments)}),r)},n.during=function(t,e,n){n=n||r;var i=x((function(e,r){e?n(e):(r.push(o),t.apply(this,r))})),o=function(t,r){t?n(t):r?e(i):n(null)};t(o)},n.doDuring=function(t,e,r){var i=0;n.during((function(t){i++<1?t(null,!0):e.apply(this,arguments)}),t,r)},n.queue=function(t,e){return M((function(e,n){t(e[0],n)}),e,1)},n.priorityQueue=function(t,e){function i(t,e){return t.priority-e.priority}var o=n.queue(t,e);return o.push=function(t,e,s){!function(t,e,o,s){if(null!=s&&"function"!=typeof s)throw new Error("task callback must be a function");if(t.started=!0,p(e)||(e=[e]),0===e.length)return n.setImmediate((function(){t.drain()}));d(e,(function(e){var a={data:e,priority:o,callback:"function"==typeof s?s:r};t.tasks.splice(function(t,e,n){for(var r=-1,i=t.length-1;r<i;){var o=r+(i-r+1>>>1);n(e,t[o])>=0?r=o:i=o-1}return r}(t.tasks,a,i)+1,0,a),t.tasks.length===t.concurrency&&t.saturated(),n.setImmediate(t.process)}))}(o,t,e,s)},delete o.unshift,o},n.cargo=function(t,e){return M(t,1,e)},n.log=R("log"),n.dir=R("dir"),n.memoize=function(t,e){var r={},o={},s=Object.prototype.hasOwnProperty;e=e||i;var a=x((function(i){var a=i.pop(),c=e.apply(null,i);s.call(r,c)?n.setImmediate((function(){a.apply(null,r[c])})):s.call(o,c)?o[c].push(a):(o[c]=[a],t.apply(null,i.concat([x((function(t){r[c]=t;var e=o[c];delete o[c];for(var n=0,i=e.length;n<i;n++)e[n].apply(null,t)}))])))}));return a.memo=r,a.unmemoized=t,a},n.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},n.times=$(n.map),n.timesSeries=$(n.mapSeries),n.timesLimit=function(t,e,r,i){return n.mapLimit(m(t),e,r,i)},n.seq=function(){var t=arguments;return x((function(e){var i=this,o=e[e.length-1];"function"==typeof o?e.pop():o=r,n.reduce(t,e,(function(t,e,n){e.apply(i,t.concat([x((function(t,e){n(t,e)}))]))}),(function(t,e){o.apply(i,[t].concat(e))}))}))},n.compose=function(){return n.seq.apply(null,Array.prototype.reverse.call(arguments))},n.applyEach=B(n.eachOf),n.applyEachSeries=B(n.eachOfSeries),n.forever=function(t,e){var n=u(e||r),i=z(t);!function t(e){if(e)return n(e);i(t)}()},n.ensureAsync=z,n.constant=x((function(t){var e=[null].concat(t);return function(t){return t.apply(this,e)}})),n.wrapSync=n.asyncify=function(t){return x((function(e){var n,r,i,o=e.pop();try{n=t.apply(this,e)}catch(t){return o(t)}("function"===(i=typeof(r=n))||"object"===i&&r)&&"function"==typeof n.then?n.then((function(t){o(null,t)})).catch((function(t){o(t.message?t:new Error(t))})):o(null,n)}))},wo?wo=n:"function"==typeof define&&define.amd?define([],(function(){return n})):c.async=n}()}var xo,So,ko,Eo=!1;function Co(t,e,n,r){"function"==typeof e?(n=e,e={}):e&&"object"==typeof e||(e={mode:e});var i=e.mode,o=e.fs||So;void 0===i&&(i=ko),r||(r=null);var s=n||function(){};t=$ca570bd4e30b6ff770d94273044f74bf$importAsync$e763faff44bdbe8f705eb3f9b36284a6$resolve(t),o.mkdir(t,i,(function(n){if(!n)return s(null,r=r||t);switch(n.code){case"ENOENT":if($ca570bd4e30b6ff770d94273044f74bf$importAsync$e763faff44bdbe8f705eb3f9b36284a6$dirname(t)===t)return s(n);Co($ca570bd4e30b6ff770d94273044f74bf$importAsync$e763faff44bdbe8f705eb3f9b36284a6$dirname(t),e,(function(n,r){n?s(n,r):Co(t,e,s,r)}));break;default:o.stat(t,(function(t,e){t||!e.isDirectory()?s(n,r):s(null,r)}))}}))}function To(){return Eo||(Eo=!0,xo={},So=M,ko=parseInt("0777",8),xo=Co.mkdirp=Co.mkdirP=Co,Co.sync=function t(e,n,r){n&&"object"==typeof n||(n={mode:n});var i=n.mode,o=n.fs||So;void 0===i&&(i=ko),r||(r=null),e=I(e);try{o.mkdirSync(e,i),r=r||e}catch(i){switch(i.code){case"ENOENT":r=t(A(e),n,r),t(e,n,r);break;default:var s;try{s=o.statSync(e)}catch(t){throw i}if(!s.isDirectory())throw i}}return r}),xo}var Ao,Po,Oo,Io,jo,No,Lo,Fo=!1;function Do(t){return"function"==typeof t?t:function(){var t;if(Oo){var e=new Error;t=function(t){t&&(e.message=t.message,n(t=e))}}else t=n;return t;function n(t){if(t){if(process.throwDeprecation)throw t;if(!process.noDeprecation){var e="fs: missing callback "+(t.stack||t.message);process.traceDeprecation?console.trace(e):console.error(e)}}}}()}function Mo(){return Fo||(Fo=!0,Ao={},Po="win32"===process.platform,Oo=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG),P,Io=Po?/(.*?)(?:[\/\\]+|$)/g:/(.*?)(?:[\/]+|$)/g,jo=Po?/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/:/^[\/]*/,No=function(t,e){if(t=I(t),e&&Object.prototype.hasOwnProperty.call(e,t))return e[t];var n,r,i,o,s=t,a={},c={};function u(){var e=jo.exec(t);n=e[0].length,r=e[0],i=e[0],o="",Po&&!c[i]&&(W(i),c[i]=!0)}for(u();n<t.length;){Io.lastIndex=n;var l=Io.exec(t);if(o=r,r+=l[0],i=o+l[1],n=Io.lastIndex,!(c[i]||e&&e[i]===i)){var f;if(e&&Object.prototype.hasOwnProperty.call(e,i))f=e[i];else{var p=W(i);if(!p.isSymbolicLink()){c[i]=!0,e&&(e[i]=i);continue}var h=null;if(!Po){var d=p.dev.toString(32)+":"+p.ino.toString(32);a.hasOwnProperty(d)&&(h=a[d])}null===h&&(V(i),h=G(i)),f=I(o,h),e&&(e[i]=f),Po||(a[d]=h)}t=I(f,t.slice(n)),u()}}return e&&(e[s]=t),t},Ao.realpathSync=No,Lo=function(t,e,n){if("function"!=typeof n&&(n=Do(e),e=null),t=I(t),e&&Object.prototype.hasOwnProperty.call(e,t))return process.nextTick(n.bind(null,null,e[t]));var r,i,o,s,a=t,c={},u={};function l(){var e=jo.exec(t);r=e[0].length,i=e[0],o=e[0],s="",Po&&!u[o]?K(o,(function(t){if(t)return n(t);u[o]=!0,f()})):process.nextTick(f)}function f(){if(r>=t.length)return e&&(e[a]=t),n(null,t);Io.lastIndex=r;var c=Io.exec(t);return s=i,i+=c[0],o=s+c[1],r=Io.lastIndex,u[o]||e&&e[o]===o?process.nextTick(f):e&&Object.prototype.hasOwnProperty.call(e,o)?d(e[o]):K(o,p)}function p(t,r){if(t)return n(t);if(!r.isSymbolicLink())return u[o]=!0,e&&(e[o]=o),process.nextTick(f);if(!Po){var i=r.dev.toString(32)+":"+r.ino.toString(32);if(c.hasOwnProperty(i))return h(null,c[i],o)}r(o,(function(t){if(t)return n(t);Q(o,(function(t,e){Po||(c[i]=e),h(t,e)}))}))}function h(t,r,i){if(t)return n(t);var o=I(s,r);e&&(e[i]=o),d(o)}function d(e){t=I(e,t.slice(r)),l()}l()},Ao.realpath=Lo),Ao}var Ro,$o,Bo,zo,qo,Ho=!1;function Uo(t){return t&&"realpath"===t.syscall&&("ELOOP"===t.code||"ENOMEM"===t.code||"ENAMETOOLONG"===t.code)}function Vo(t,e,n){if(qo)return $o(t,e,n);"function"==typeof e&&(n=e,e=null),$o(t,e,(function(r,i){Uo(r)?Mo().realpath(t,e,n):n(r,i)}))}function Wo(t,e){if(qo)return Bo(t,e);try{return Bo(t,e)}catch(n){if(Uo(n))return Mo().realpathSync(t,e);throw n}}function Go(){$8addc3a19f17fc0b4ea887628d0a8a5d$importAsync$2c678b7deed83b95542d4cec945e1f09$realpath=Vo,$8addc3a19f17fc0b4ea887628d0a8a5d$importAsync$2c678b7deed83b95542d4cec945e1f09$realpathSync=Wo}function Ko(){$8addc3a19f17fc0b4ea887628d0a8a5d$importAsync$2c678b7deed83b95542d4cec945e1f09$realpath=$o,$8addc3a19f17fc0b4ea887628d0a8a5d$importAsync$2c678b7deed83b95542d4cec945e1f09$realpathSync=Bo}function Qo(){return Ho||(Ho=!0,Ro={},Ro=Vo,Vo.realpath=Vo,Vo.sync=Wo,Vo.realpathSync=Wo,Vo.monkeypatch=Go,Vo.unmonkeypatch=Ko,$o=q,Bo=U,zo=process.version,qo=/^v[0-5]\./.test(zo),Mo()),Ro}var Zo,Jo,Yo=!1;function Xo(){return Yo||(Yo=!0,Zo={},Zo=function(t,e){for(var n=[],r=0;r<t.length;r++){var i=e(t[r],r);Jo(i)?n.push.apply(n,i):n.push(i)}return n},Jo=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}),Zo}var ts,es=!1;function ns(t,e,n){t instanceof RegExp&&(t=rs(t,n)),e instanceof RegExp&&(e=rs(e,n));var r=is(t,e,n);return r&&{start:r[0],end:r[1],pre:n.slice(0,r[0]),body:n.slice(r[0]+t.length,r[1]),post:n.slice(r[1]+e.length)}}function rs(t,e){var n=e.match(t);return n?n[0]:null}function is(t,e,n){var r,i,o,s,a,c=n.indexOf(t),u=n.indexOf(e,c+1),l=c;if(c>=0&&u>0){for(r=[],o=n.length;l>=0&&!a;)l==c?(r.push(l),c=n.indexOf(t,l+1)):1==r.length?a=[r.pop(),u]:((i=r.pop())<o&&(o=i,s=u),u=n.indexOf(e,l+1)),l=c<u&&c>=0?c:u;r.length&&(a=[o,s])}return a}function os(){return es||(es=!0,ts={},ts=ns,ns.range=is),ts}var ss,as,cs,us,ls,fs,ps,hs,ds=!1;function gs(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function ms(t){return t.split(us).join("\\").split(ls).join("{").split(fs).join("}").split(ps).join(",").split(hs).join(".")}function vs(t){if(!t)return[""];var e=[],n=cs("{","}",t);if(!n)return t.split(",");var r=n.pre,i=n.body,o=n.post,s=r.split(",");s[s.length-1]+="{"+i+"}";var a=vs(o);return o.length&&(s[s.length-1]+=a.shift(),s.push.apply(s,a)),e.push.apply(e,s),e}function ys(t){return t?("{}"===t.substr(0,2)&&(t="\\{\\}"+t.substr(2)),Ss(function(t){return t.split("\\\\").join(us).split("\\{").join(ls).split("\\}").join(fs).split("\\,").join(ps).split("\\.").join(hs)}(t),!0).map(ms)):[]}function ws(t){return"{"+t+"}"}function bs(t){return/^-?0\d/.test(t)}function _s(t,e){return t<=e}function xs(t,e){return t>=e}function Ss(t,e){var n=[],r=cs("{","}",t);if(!r||/\$$/.test(r.pre))return[t];var i,o=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),s=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),a=o||s,c=r.body.indexOf(",")>=0;if(!a&&!c)return r.post.match(/,.*\}/)?Ss(t=r.pre+"{"+r.body+fs+r.post):[t];if(a)i=r.body.split(/\.\./);else if(1===(i=vs(r.body)).length&&1===(i=Ss(i[0],!1).map(ws)).length)return(f=r.post.length?Ss(r.post,!1):[""]).map((function(t){return r.pre+i[0]+t}));var u,l=r.pre,f=r.post.length?Ss(r.post,!1):[""];if(a){var p=gs(i[0]),h=gs(i[1]),d=Math.max(i[0].length,i[1].length),g=3==i.length?Math.abs(gs(i[2])):1,m=_s;h<p&&(g*=-1,m=xs);var v=i.some(bs);u=[];for(var y=p;m(y,h);y+=g){var w;if(s)"\\"===(w=String.fromCharCode(y))&&(w="");else if(w=String(y),v){var b=d-w.length;if(b>0){var _=new Array(b+1).join("0");w=y<0?"-"+_+w.slice(1):_+w}}u.push(w)}}else u=as(i,(function(t){return Ss(t,!1)}));for(var x=0;x<u.length;x++)for(var S=0;S<f.length;S++){var k=l+u[x]+f[S];(!e||a||k)&&n.push(k)}return n}function ks(){return ds||(ds=!0,ss={},as=Xo(),cs=os(),ss=ys,us="\0SLASH"+Math.random()+"\0",ls="\0OPEN"+Math.random()+"\0",fs="\0CLOSE"+Math.random()+"\0",ps="\0COMMA"+Math.random()+"\0",hs="\0PERIOD"+Math.random()+"\0"),ss}var Es,Cs,Ts,As,Ps,Os,Is,js,Ns,Ls,Fs,Ds,Ms=!1;function Rs(t,e){return e=e||{},function(n,r,i){return Bs(n,t,e)}}function $s(t,e){t=t||{},e=e||{};var n={};return Object.keys(e).forEach((function(t){n[t]=e[t]})),Object.keys(t).forEach((function(e){n[e]=t[e]})),n}function Bs(t,e,n){if("string"!=typeof e)throw new TypeError("glob pattern string required");return n||(n={}),!(!n.nocomment&&"#"===e.charAt(0))&&(""===e.trim()?""===t:new zs(e,n).match(t))}function zs(t,e){if(!(this instanceof zs))return new zs(t,e);if("string"!=typeof t)throw new TypeError("glob pattern string required");e||(e={}),t=t.trim(),"/"!==Cs.sep&&(t=t.split(Cs.sep).join("/")),this.options=e,this.set=[],this.pattern=t,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}function qs(){if(!this._made){var t=this.pattern,e=this.options;if(e.nocomment||"#"!==t.charAt(0))if(t){this.parseNegate();var n=this.globSet=this.braceExpand();e.debug&&(this.debug=console.error),this.debug(this.pattern,n),n=this.globParts=n.map((function(t){return t.split(Fs)})),this.debug(this.pattern,n),n=n.map((function(t,e,n){return t.map(this.parse,this)}),this),this.debug(this.pattern,n),n=n.filter((function(t){return-1===t.indexOf(!1)})),this.debug(this.pattern,n),this.set=n}else this.empty=!0;else this.comment=!0}}function Hs(){var t=this.pattern,e=!1,n=0;if(!this.options.nonegate){for(var r=0,i=t.length;r<i&&"!"===t.charAt(r);r++)e=!e,n++;n&&(this.pattern=t.substr(n)),this.negate=e}}function Us(t,e){if(e||(e=this instanceof zs?this.options:{}),void 0===(t=void 0===t?this.pattern:t))throw new TypeError("undefined pattern");return e.nobrace||!t.match(/\{.*\}/)?[t]:As(t)}function Vs(t,e){if(t.length>65536)throw new TypeError("pattern is too long");var n=this.options;if(!n.noglobstar&&"**"===t)return Ts;if(""===t)return"";var r,i="",o=!!n.nocase,s=!1,a=[],c=[],u=!1,l=-1,f=-1,p="."===t.charAt(0)?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",h=this;function d(){if(r){switch(r){case"*":i+=Is,o=!0;break;case"?":i+=Os,o=!0;break;default:i+="\\"+r}h.debug("clearStateChar %j %j",r,i),r=!1}}for(var g,m=0,v=t.length;m<v&&(g=t.charAt(m));m++)if(this.debug("%s\t%s %s %j",t,m,i,g),s&&Ls[g])i+="\\"+g,s=!1;else switch(g){case"/":return!1;case"\\":d(),s=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",t,m,i,g),u){this.debug("  in class"),"!"===g&&m===f+1&&(g="^"),i+=g;continue}h.debug("call clearStateChar %j",r),d(),r=g,n.noext&&d();continue;case"(":if(u){i+="(";continue}if(!r){i+="\\(";continue}a.push({type:r,start:m-1,reStart:i.length,open:Ps[r].open,close:Ps[r].close}),i+="!"===r?"(?:(?!(?:":"(?:",this.debug("plType %j %j",r,i),r=!1;continue;case")":if(u||!a.length){i+="\\)";continue}d(),o=!0;var y=a.pop();i+=y.close,"!"===y.type&&c.push(y),y.reEnd=i.length;continue;case"|":if(u||!a.length||s){i+="\\|",s=!1;continue}d(),i+="|";continue;case"[":if(d(),u){i+="\\"+g;continue}u=!0,f=m,l=i.length,i+=g;continue;case"]":if(m===f+1||!u){i+="\\"+g,s=!1;continue}if(u){var w=t.substring(f+1,m);try{RegExp("["+w+"]")}catch(t){var b=this.parse(w,Ds);i=i.substr(0,l)+"\\["+b[0]+"\\]",o=o||b[1],u=!1;continue}}o=!0,u=!1,i+=g;continue;default:d(),s?s=!1:!Ls[g]||"^"===g&&u||(i+="\\"),i+=g}for(u&&(w=t.substr(f+1),b=this.parse(w,Ds),i=i.substr(0,l)+"\\["+b[0],o=o||b[1]),y=a.pop();y;y=a.pop()){var _=i.slice(y.reStart+y.open.length);this.debug("setting tail",i,y),_=_.replace(/((?:\\{2}){0,64})(\\?)\|/g,(function(t,e,n){return n||(n="\\"),e+e+n+"|"})),this.debug("tail=%j\n   %s",_,_,y,i);var x="*"===y.type?Is:"?"===y.type?Os:"\\"+y.type;o=!0,i=i.slice(0,y.reStart)+x+"\\("+_}d(),s&&(i+="\\\\");var S=!1;switch(i.charAt(0)){case".":case"[":case"(":S=!0}for(var k=c.length-1;k>-1;k--){var E=c[k],C=i.slice(0,E.reStart),T=i.slice(E.reStart,E.reEnd-8),A=i.slice(E.reEnd-8,E.reEnd),P=i.slice(E.reEnd);A+=P;var O=C.split("(").length-1,I=P;for(m=0;m<O;m++)I=I.replace(/\)[+*?]?/,"");var j="";""===(P=I)&&e!==Ds&&(j="$"),i=C+T+P+j+A}if(""!==i&&o&&(i="(?=.)"+i),S&&(i=p+i),e===Ds)return[i,o];if(!o)return t.replace(/\\(.)/g,"$1");var N=n.nocase?"i":"";try{var L=new RegExp("^"+i+"$",N)}catch(t){return new RegExp("$.")}return L._glob=t,L._src=i,L}function Ws(){if(this.regexp||!1===this.regexp)return this.regexp;var t=this.set;if(!t.length)return this.regexp=!1,this.regexp;var e=this.options,n=e.noglobstar?Is:e.dot?js:Ns,r=e.nocase?"i":"",i=t.map((function(t){return t.map((function(t){return t===Ts?n:"string"==typeof t?t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):t._src})).join("\\/")})).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,r)}catch(t){this.regexp=!1}return this.regexp}function Gs(t,e){if(this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return""===t;if("/"===t&&e)return!0;var n=this.options;"/"!==Cs.sep&&(t=t.split(Cs.sep).join("/")),t=t.split(Fs),this.debug(this.pattern,"split",t);var r,i,o=this.set;for(this.debug(this.pattern,"set",o),i=t.length-1;i>=0&&!(r=t[i]);i--);for(i=0;i<o.length;i++){var s=o[i],a=t;if(n.matchBase&&1===s.length&&(a=[r]),this.matchOne(a,s,e))return!!n.flipNegate||!this.negate}return!n.flipNegate&&this.negate}function Ks(){Es={},Es=Bs,Bs.Minimatch=zs,Cs={sep:"/"};try{Cs=function(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}("path")}catch(t){}Ts=Bs.GLOBSTAR=zs.GLOBSTAR={},As=ks(),Ps={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},Is=(Os="[^/]")+"*?",js="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",Ns="(?:(?!(?:\\/|^)\\.).)*?",Ls="().*{}+?[]^$\\!".split("").reduce((function(t,e){return t[e]=!0,t}),{}),Fs=/\/+/,Bs.filter=Rs,Bs.defaults=function(t){if(!t||!Object.keys(t).length)return Bs;var e=Bs,n=function(n,r,i){return e.minimatch(n,r,$s(t,i))};return n.Minimatch=function(n,r){return new e.Minimatch(n,$s(t,r))},n},zs.defaults=function(t){return t&&Object.keys(t).length?Bs.defaults(t).Minimatch:zs},zs.prototype.debug=function(){},zs.prototype.make=qs,zs.prototype.parseNegate=Hs,Bs.braceExpand=function(t,e){return Us(t,e)},zs.prototype.braceExpand=Us,zs.prototype.parse=Vs,Ds={},Bs.makeRe=function(t,e){return new zs(t,e||{}).makeRe()},zs.prototype.makeRe=Ws,Bs.match=function(t,e,n){var r=new zs(e,n=n||{});return t=t.filter((function(t){return r.match(t)})),r.options.nonull&&!t.length&&t.push(e),t},zs.prototype.match=Gs,zs.prototype.matchOne=function(t,e,n){var r=this.options;this.debug("matchOne",{this:this,file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var i=0,o=0,s=t.length,a=e.length;i<s&&o<a;i++,o++){this.debug("matchOne loop");var c,u=e[o],l=t[i];if(this.debug(e,u,l),!1===u)return!1;if(u===Ts){this.debug("GLOBSTAR",[e,u,l]);var f=i,p=o+1;if(p===a){for(this.debug("** at the end");i<s;i++)if("."===t[i]||".."===t[i]||!r.dot&&"."===t[i].charAt(0))return!1;return!0}for(;f<s;){var h=t[f];if(this.debug("\nglobstar while",t,f,e,p,h),this.matchOne(t.slice(f),e.slice(p),n))return this.debug("globstar found match!",f,s,h),!0;if("."===h||".."===h||!r.dot&&"."===h.charAt(0)){this.debug("dot detected!",t,f,e,p);break}this.debug("globstar swallow a segment, and continue"),f++}return!(!n||(this.debug("\n>>> no match, partial?",t,f,e,p),f!==s))}if("string"==typeof u?(c=r.nocase?l.toLowerCase()===u.toLowerCase():l===u,this.debug("string match",u,l,c)):(c=l.match(u),this.debug("pattern match",u,l,c)),!c)return!1}if(i===s&&o===a)return!0;if(i===s)return n;if(o===a)return i===s-1&&""===t[i];throw new Error("wtf?")}}function Qs(){return Ms||(Ms=!0,Ks()),Es}var Zs,Js=!1;function Ys(){return Js||(Js=!0,Zs={},Zs="function"==typeof Object.create?function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}),Zs}var Xs,ta,ea,na=!1;function ra(t){return"/"===t.charAt(0)}function ia(t){var e=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/.exec(t),n=e[1]||"",r=Boolean(n&&":"!==n.charAt(1));return Boolean(e[2]||r)}function oa(){return na||(na=!0,Xs={},Xs="win32"===process.platform?ia:ra,ta=ra,Xs.posix=ta,ea=ia,Xs.win32=ea),Xs}var sa,aa,ca,ua,la,fa,pa,ha,da,ga,ma,va=!1;function ya(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function wa(t,e){return t.toLowerCase().localeCompare(e.toLowerCase())}function ba(t,e){return t.localeCompare(e)}function _a(t){var e=null;if("/**"===t.slice(-3)){var n=t.replace(/(\/\*\*)+$/,"");e=new ma(n,{dot:!0})}return{matcher:new ma(t,{dot:!0}),gmatcher:e}}function xa(t,e,n){if(n||(n={}),n.matchBase&&-1===e.indexOf("/")){if(n.noglobstar)throw new Error("base matching requires globstar");e="**/"+e}t.silent=!!n.silent,t.pattern=e,t.strict=!1!==n.strict,t.realpath=!!n.realpath,t.realpathCache=n.realpathCache||Object.create(null),t.follow=!!n.follow,t.dot=!!n.dot,t.mark=!!n.mark,t.nodir=!!n.nodir,t.nodir&&(t.mark=!0),t.sync=!!n.sync,t.nounique=!!n.nounique,t.nonull=!!n.nonull,t.nosort=!!n.nosort,t.nocase=!!n.nocase,t.stat=!!n.stat,t.noprocess=!!n.noprocess,t.absolute=!!n.absolute,t.maxLength=n.maxLength||1/0,t.cache=n.cache||Object.create(null),t.statCache=n.statCache||Object.create(null),t.symlinks=n.symlinks||Object.create(null),function(t,e){t.ignore=e.ignore||[],Array.isArray(t.ignore)||(t.ignore=[t.ignore]),t.ignore.length&&(t.ignore=t.ignore.map(_a))}(t,n),t.changedCwd=!1;var r=process.cwd();ya(n,"cwd")?(t.cwd=$eb25a16008c6dae5e1f343682e5afc4a$importAsync$d29ca1dc93d21b1a2519da40662fdbb1$resolve(n.cwd),t.changedCwd=t.cwd!==r):t.cwd=r,t.root=n.root||$eb25a16008c6dae5e1f343682e5afc4a$importAsync$d29ca1dc93d21b1a2519da40662fdbb1$resolve(t.cwd,"/"),t.root=$eb25a16008c6dae5e1f343682e5afc4a$importAsync$d29ca1dc93d21b1a2519da40662fdbb1$resolve(t.root),"win32"===process.platform&&(t.root=t.root.replace(/\\/g,"/")),t.cwdAbs=ga(t.cwd)?t.cwd:Ea(t,t.cwd),"win32"===process.platform&&(t.cwdAbs=t.cwdAbs.replace(/\\/g,"/")),t.nomount=!!n.nomount,n.nonegate=!0,n.nocomment=!0,t.minimatch=new ma(e,n),t.options=t.minimatch.options}function Sa(t){for(var e=t.nounique,n=e?[]:Object.create(null),r=0,i=t.matches.length;r<i;r++){var o=t.matches[r];if(o&&0!==Object.keys(o).length){var s=Object.keys(o);e?n.push.apply(n,s):s.forEach((function(t){n[t]=!0}))}else if(t.nonull){var a=t.minimatch.globSet[r];e?n.push(a):n[a]=!0}}if(e||(n=Object.keys(n)),t.nosort||(n=n.sort(t.nocase?wa:ba)),t.mark){for(r=0;r<n.length;r++)n[r]=t._mark(n[r]);t.nodir&&(n=n.filter((function(e){var n=!/\/$/.test(e),r=t.cache[e]||t.cache[Ea(t,e)];return n&&r&&(n="DIR"!==r&&!Array.isArray(r)),n})))}t.ignore.length&&(n=n.filter((function(e){return!Ca(t,e)}))),t.found=n}function ka(t,e){var n=Ea(t,e),r=t.cache[n],i=e;if(r){var o="DIR"===r||Array.isArray(r),s="/"===e.slice(-1);if(o&&!s?i+="/":!o&&s&&(i=i.slice(0,-1)),i!==e){var a=Ea(t,i);t.statCache[a]=t.statCache[n],t.cache[a]=t.cache[n]}}return i}function Ea(t,e){var n=e;return n="/"===e.charAt(0)?$eb25a16008c6dae5e1f343682e5afc4a$importAsync$d29ca1dc93d21b1a2519da40662fdbb1$join(t.root,e):ga(e)||""===e?e:t.changedCwd?$eb25a16008c6dae5e1f343682e5afc4a$importAsync$d29ca1dc93d21b1a2519da40662fdbb1$resolve(t.cwd,e):$eb25a16008c6dae5e1f343682e5afc4a$importAsync$d29ca1dc93d21b1a2519da40662fdbb1$resolve(e),"win32"===process.platform&&(n=n.replace(/\\/g,"/")),n}function Ca(t,e){return!!t.ignore.length&&t.ignore.some((function(t){return t.matcher.match(e)||!(!t.gmatcher||!t.gmatcher.match(e))}))}function Ta(t,e){return!!t.ignore.length&&t.ignore.some((function(t){return!(!t.gmatcher||!t.gmatcher.match(e))}))}function Aa(){return va||(va=!0,(sa={}).alphasort=ba,aa=wa,sa.alphasorti=aa,ca=xa,sa.setopts=ca,ua=ya,sa.ownProp=ua,la=Ea,sa.makeAbs=la,fa=Sa,sa.finish=fa,pa=ka,sa.mark=pa,ha=Ca,sa.isIgnored=ha,da=Ta,sa.childrenIgnored=da,Qs(),ga=oa(),ma=Qs().Minimatch),sa}var Pa,Oa,Ia,ja,Na,La,Fa,Da=!1;function Ma(t,e){if("function"==typeof e||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");return new Ra(t,e).found}function Ra(t,e){if(!t)throw new Error("must provide pattern");if("function"==typeof e||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");if(!(this instanceof Ra))return new Ra(t,e);if(ja(this,t,e),this.noprocess)return this;var n=this.minimatch.set.length;this.matches=new Array(n);for(var r=0;r<n;r++)this._process(this.minimatch.set[r],r,!1);this._finish()}function $a(){return Da||(Da=!0,Pa={},Pa=Ma,Ma.GlobSync=Ra,Qo(),Qs(),Qs().Minimatch,xc().Glob,c,Oa=o,Ia=oa(),Aa(),Aa().alphasort,Aa().alphasorti,ja=Aa().setopts,Na=Aa().ownProp,La=Aa().childrenIgnored,Fa=Aa().isIgnored,Ra.prototype._finish=function(){if(Oa(this instanceof Ra),this.realpath){var t=this;this.matches.forEach((function(e,n){var r=t.matches[n]=Object.create(null);for(var i in e)try{i=t._makeAbs(i),r[Qo().realpathSync(i,t.realpathCache)]=!0}catch(e){if("stat"!==e.syscall)throw e;r[t._makeAbs(i)]=!0}}))}Aa().finish(this)},Ra.prototype._process=function(t,e,n){Oa(this instanceof Ra);for(var r,i=0;"string"==typeof t[i];)i++;switch(i){case t.length:return void this._processSimple(t.join("/"),e);case 0:r=null;break;default:r=t.slice(0,i).join("/")}var o,s=t.slice(i);null===r?o=".":Ia(r)||Ia(t.join("/"))?(r&&Ia(r)||(r="/"+r),o=r):o=r;var a=this._makeAbs(o);La(this,o)||(s[0]===Qs().GLOBSTAR?this._processGlobStar(r,o,a,s,e,n):this._processReaddir(r,o,a,s,e,n))},Ra.prototype._processReaddir=function(t,e,n,r,i,o){var s=this._readdir(n,o);if(s){for(var a=r[0],c=!!this.minimatch.negate,u=a._glob,l=this.dot||"."===u.charAt(0),f=[],p=0;p<s.length;p++)("."!==(g=s[p]).charAt(0)||l)&&(c&&!t?!g.match(a):g.match(a))&&f.push(g);var h=f.length;if(0!==h)if(1!==r.length||this.mark||this.stat)for(r.shift(),p=0;p<h;p++){var d;g=f[p],d=t?[t,g]:[g],this._process(d.concat(r),i,o)}else for(this.matches[i]||(this.matches[i]=Object.create(null)),p=0;p<h;p++){var g=f[p];t&&(g="/"!==t.slice(-1)?t+"/"+g:t+g),"/"!==g.charAt(0)||this.nomount||(g=T(this.root,g)),this._emitMatch(i,g)}}},Ra.prototype._emitMatch=function(t,e){if(!Fa(this,e)){var n=this._makeAbs(e);if(this.mark&&(e=this._mark(e)),this.absolute&&(e=n),!this.matches[t][e]){if(this.nodir){var r=this.cache[n];if("DIR"===r||Array.isArray(r))return}this.matches[t][e]=!0,this.stat&&this._stat(e)}}},Ra.prototype._readdirInGlobStar=function(t){if(this.follow)return this._readdir(t,!1);var e,n;try{n=W(t)}catch(t){if("ENOENT"===t.code)return null}var r=n&&n.isSymbolicLink();return this.symlinks[t]=r,r||!n||n.isDirectory()?e=this._readdir(t,!1):this.cache[t]="FILE",e},Ra.prototype._readdir=function(t,e){if(e&&!Na(this.symlinks,t))return this._readdirInGlobStar(t);if(Na(this.cache,t)){var n=this.cache[t];if(!n||"FILE"===n)return null;if(Array.isArray(n))return n}try{return this._readdirEntries(t,Z(t))}catch(e){return this._readdirError(t,e),null}},Ra.prototype._readdirEntries=function(t,e){if(!this.mark&&!this.stat)for(var n=0;n<e.length;n++){var r=e[n];r="/"===t?t+r:t+"/"+r,this.cache[r]=!0}return this.cache[t]=e,e},Ra.prototype._readdirError=function(t,e){switch(e.code){case"ENOTSUP":case"ENOTDIR":var n=this._makeAbs(t);if(this.cache[n]="FILE",n===this.cwdAbs){var r=new Error(e.code+" invalid cwd "+this.cwd);throw r.path=this.cwd,r.code=e.code,r}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(t)]=!1;break;default:if(this.cache[this._makeAbs(t)]=!1,this.strict)throw e;this.silent||console.error("glob error",e)}},Ra.prototype._processGlobStar=function(t,e,n,r,i,o){var s=this._readdir(n,o);if(s){var a=r.slice(1),c=t?[t]:[],u=c.concat(a);this._process(u,i,!1);var l=s.length;if(!this.symlinks[n]||!o)for(var f=0;f<l;f++)if("."!==s[f].charAt(0)||this.dot){var p=c.concat(s[f],a);this._process(p,i,!0);var h=c.concat(s[f],r);this._process(h,i,!0)}}},Ra.prototype._processSimple=function(t,e){var n=this._stat(t);if(this.matches[e]||(this.matches[e]=Object.create(null)),n){if(t&&Ia(t)&&!this.nomount){var r=/[\/\\]$/.test(t);"/"===t.charAt(0)?t=T(this.root,t):(t=I(this.root,t),r&&(t+="/"))}"win32"===process.platform&&(t=t.replace(/\\/g,"/")),this._emitMatch(e,t)}},Ra.prototype._stat=function(t){var e=this._makeAbs(t),n="/"===t.slice(-1);if(t.length>this.maxLength)return!1;if(!this.stat&&Na(this.cache,e)){var r=this.cache[e];if(Array.isArray(r)&&(r="DIR"),!n||"DIR"===r)return r;if(n&&"FILE"===r)return!1}var i=this.statCache[e];if(!i){var o;try{o=W(e)}catch(t){if(t&&("ENOENT"===t.code||"ENOTDIR"===t.code))return this.statCache[e]=!1,!1}if(o&&o.isSymbolicLink())try{i=V(e)}catch(t){i=o}else i=o}return this.statCache[e]=i,r=!0,i&&(r=i.isDirectory()?"DIR":"FILE"),this.cache[e]=this.cache[e]||r,(!n||"FILE"!==r)&&r},Ra.prototype._mark=function(t){return Aa().mark(this,t)},Ra.prototype._makeAbs=function(t){return Aa().makeAbs(this,t)}),Pa}var Ba,za=!1;function qa(t,e){if(t&&e)return qa(t)(e);if("function"!=typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach((function(e){n[e]=t[e]})),n;function n(){for(var e=new Array(arguments.length),n=0;n<e.length;n++)e[n]=arguments[n];var r=t.apply(this,e),i=e[e.length-1];return"function"==typeof r&&r!==i&&Object.keys(i).forEach((function(t){r[t]=i[t]})),r}}function Ha(){return za||(za=!0,Ba={},Ba=qa),Ba}var Ua,Va,Wa,Ga=!1;function Ka(t){var e=function(){return e.called?e.value:(e.called=!0,e.value=t.apply(this,arguments))};return e.called=!1,e}function Qa(t){var e=function(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=t.apply(this,arguments)},n=t.name||"Function wrapped with `once`";return e.onceError=n+" shouldn't be called more than once",e.called=!1,e}function Za(){return Ga||(Ga=!0,Ua={},Va=Ha(),Ua=Va(Ka),Wa=Va(Qa),Ua.strict=Wa,Ka.proto=Ka((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return Ka(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return Qa(this)},configurable:!0})}))),Ua}var Ja,Ya,Xa,tc,ec=!1;function nc(t,e){return Xa[t]?(Xa[t].push(e),null):(Xa[t]=[e],function(t){return tc((function e(){var n=Xa[t],r=n.length,i=rc(arguments);try{for(var o=0;o<r;o++)n[o].apply(null,i)}finally{n.length>r?(n.splice(0,r),process.nextTick((function(){e.apply(null,i)}))):delete Xa[t]}}))}(t))}function rc(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r]=t[r];return n}function ic(){return ec||(ec=!0,Ja={},Ya=Ha(),Xa=Object.create(null),tc=Za(),Ja=Ya(nc)),Ja}var oc,sc,ac,cc,uc,lc,fc,pc,hc,dc,gc,mc,vc,yc=!1;function wc(t,e,n){if("function"==typeof e&&(n=e,e={}),e||(e={}),e.sync){if(n)throw new TypeError("callback provided to sync glob");return lc(t,e)}return new bc(t,e,n)}function bc(t,e,n){if("function"==typeof e&&(n=e,e=null),e&&e.sync){if(n)throw new TypeError("callback provided to sync glob");return new vc(t,e)}if(!(this instanceof bc))return new bc(t,e,n);fc(this,t,e),this._didRealPath=!1;var r=this.minimatch.set.length;this.matches=new Array(r),"function"==typeof n&&(n=mc(n),this.on("error",n),this.on("end",(function(t){n(null,t)})));var i=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(0===r)return s();for(var o=0;o<r;o++)this._process(this.minimatch.set[o],o,!1,s);function s(){--i._processing,i._processing<=0&&i._finish()}}function _c(){oc={},oc=wc,Qo(),Qs(),Qs().Minimatch,sc=Ys(),ac={},cc=o,uc=oa(),lc=$a(),Aa(),Aa().alphasort,Aa().alphasorti,fc=Aa().setopts,pc=Aa().ownProp,hc=ic(),c,dc=Aa().childrenIgnored,gc=Aa().isIgnored,mc=Za(),wc.sync=lc,vc=wc.GlobSync=lc.GlobSync,wc.glob=wc,wc.hasMagic=function(t,e){var n=function(t,e){if(null===e||"object"!=typeof e)return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}({},e);n.noprocess=!0;var r=new bc(t,n).minimatch.set;if(!t)return!1;if(r.length>1)return!0;for(var i=0;i<r[0].length;i++)if("string"!=typeof r[0][i])return!0;return!1},wc.Glob=bc,sc(bc,ac),bc.prototype._finish=function(){if(cc(this instanceof bc),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();Aa().finish(this),this.emit("end",this.found)}},bc.prototype._realpath=function(){if(!this._didRealpath){this._didRealpath=!0;var t=this.matches.length;if(0===t)return this._finish();for(var e=this,n=0;n<this.matches.length;n++)this._realpathSet(n,r)}function r(){0==--t&&e._finish()}},bc.prototype._realpathSet=function(t,e){var n=this.matches[t];if(!n)return e();var r=Object.keys(n),i=this,o=r.length;if(0===o)return e();var s=this.matches[t]=Object.create(null);r.forEach((function(n,r){n=i._makeAbs(n),Qo().realpath(n,i.realpathCache,(function(r,a){r?"stat"===r.syscall?s[n]=!0:i.emit("error",r):s[a]=!0,0==--o&&(i.matches[t]=s,e())}))}))},bc.prototype._mark=function(t){return Aa().mark(this,t)},bc.prototype._makeAbs=function(t){return Aa().makeAbs(this,t)},bc.prototype.abort=function(){this.aborted=!0,this.emit("abort")},bc.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))},bc.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var t=this._emitQueue.slice(0);this._emitQueue.length=0;for(var e=0;e<t.length;e++){var n=t[e];this._emitMatch(n[0],n[1])}}if(this._processQueue.length){var r=this._processQueue.slice(0);this._processQueue.length=0;for(e=0;e<r.length;e++){var i=r[e];this._processing--,this._process(i[0],i[1],i[2],i[3])}}}},bc.prototype._process=function(t,e,n,r){if(cc(this instanceof bc),cc("function"==typeof r),!this.aborted)if(this._processing++,this.paused)this._processQueue.push([t,e,n,r]);else{for(var i,o=0;"string"==typeof t[o];)o++;switch(o){case t.length:return void this._processSimple(t.join("/"),e,r);case 0:i=null;break;default:i=t.slice(0,o).join("/")}var s,a=t.slice(o);null===i?s=".":uc(i)||uc(t.join("/"))?(i&&uc(i)||(i="/"+i),s=i):s=i;var c=this._makeAbs(s);if(dc(this,s))return r();a[0]===Qs().GLOBSTAR?this._processGlobStar(i,s,c,a,e,n,r):this._processReaddir(i,s,c,a,e,n,r)}},bc.prototype._processReaddir=function(t,e,n,r,i,o,s){var a=this;this._readdir(n,o,(function(c,u){return a._processReaddir2(t,e,n,r,i,o,u,s)}))},bc.prototype._processReaddir2=function(t,e,n,r,i,o,s,a){if(!s)return a();for(var c=r[0],u=!!this.minimatch.negate,l=c._glob,f=this.dot||"."===l.charAt(0),p=[],h=0;h<s.length;h++){if("."!==(g=s[h]).charAt(0)||f)(u&&!t?!g.match(c):g.match(c))&&p.push(g)}var d=p.length;if(0===d)return a();if(1===r.length&&!this.mark&&!this.stat){this.matches[i]||(this.matches[i]=Object.create(null));for(h=0;h<d;h++){var g=p[h];t&&(g="/"!==t?t+"/"+g:t+g),"/"!==g.charAt(0)||this.nomount||(g=T(this.root,g)),this._emitMatch(i,g)}return a()}r.shift();for(h=0;h<d;h++){g=p[h];t&&(g="/"!==t?t+"/"+g:t+g),this._process([g].concat(r),i,o,a)}a()},bc.prototype._emitMatch=function(t,e){if(!this.aborted&&!gc(this,e))if(this.paused)this._emitQueue.push([t,e]);else{var n=uc(e)?e:this._makeAbs(e);if(this.mark&&(e=this._mark(e)),this.absolute&&(e=n),!this.matches[t][e]){if(this.nodir){var r=this.cache[n];if("DIR"===r||Array.isArray(r))return}this.matches[t][e]=!0;var i=this.statCache[n];i&&this.emit("stat",e,i),this.emit("match",e)}}},bc.prototype._readdirInGlobStar=function(t,e){if(!this.aborted){if(this.follow)return this._readdir(t,!1,e);var n=this,r=hc("lstat\0"+t,(function(r,i){if(r&&"ENOENT"===r.code)return e();var o=i&&i.isSymbolicLink();n.symlinks[t]=o,o||!i||i.isDirectory()?n._readdir(t,!1,e):(n.cache[t]="FILE",e())}));r&&K(t,r)}},bc.prototype._readdir=function(t,e,n){if(!this.aborted&&(n=hc("readdir\0"+t+"\0"+e,n))){if(e&&!pc(this.symlinks,t))return this._readdirInGlobStar(t,n);if(pc(this.cache,t)){var r=this.cache[t];if(!r||"FILE"===r)return n();if(Array.isArray(r))return n(null,r)}J(t,function(t,e,n){return function(r,i){r?t._readdirError(e,r,n):t._readdirEntries(e,i,n)}}(this,t,n))}},bc.prototype._readdirEntries=function(t,e,n){if(!this.aborted){if(!this.mark&&!this.stat)for(var r=0;r<e.length;r++){var i=e[r];i="/"===t?t+i:t+"/"+i,this.cache[i]=!0}return this.cache[t]=e,n(null,e)}},bc.prototype._readdirError=function(t,e,n){if(!this.aborted){switch(e.code){case"ENOTSUP":case"ENOTDIR":var r=this._makeAbs(t);if(this.cache[r]="FILE",r===this.cwdAbs){var i=new Error(e.code+" invalid cwd "+this.cwd);i.path=this.cwd,i.code=e.code,this.emit("error",i),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(t)]=!1;break;default:this.cache[this._makeAbs(t)]=!1,this.strict&&(this.emit("error",e),this.abort()),this.silent||console.error("glob error",e)}return n()}},bc.prototype._processGlobStar=function(t,e,n,r,i,o,s){var a=this;this._readdir(n,o,(function(c,u){a._processGlobStar2(t,e,n,r,i,o,u,s)}))},bc.prototype._processGlobStar2=function(t,e,n,r,i,o,s,a){if(!s)return a();var c=r.slice(1),u=t?[t]:[],l=u.concat(c);this._process(l,i,!1,a);var f=this.symlinks[n],p=s.length;if(f&&o)return a();for(var h=0;h<p;h++){if("."!==s[h].charAt(0)||this.dot){var d=u.concat(s[h],c);this._process(d,i,!0,a);var g=u.concat(s[h],r);this._process(g,i,!0,a)}}a()},bc.prototype._processSimple=function(t,e,n){var r=this;this._stat(t,(function(i,o){r._processSimple2(t,e,i,o,n)}))},bc.prototype._processSimple2=function(t,e,n,r,i){if(this.matches[e]||(this.matches[e]=Object.create(null)),!r)return i();if(t&&uc(t)&&!this.nomount){var o=/[\/\\]$/.test(t);"/"===t.charAt(0)?t=T(this.root,t):(t=I(this.root,t),o&&(t+="/"))}"win32"===process.platform&&(t=t.replace(/\\/g,"/")),this._emitMatch(e,t),i()},bc.prototype._stat=function(t,e){var n=this._makeAbs(t),r="/"===t.slice(-1);if(t.length>this.maxLength)return e();if(!this.stat&&pc(this.cache,n)){var i=this.cache[n];if(Array.isArray(i)&&(i="DIR"),!r||"DIR"===i)return e(null,i);if(r&&"FILE"===i)return e()}var o=this.statCache[n];if(void 0!==o){if(!1===o)return e(null,o);var s=o.isDirectory()?"DIR":"FILE";return r&&"FILE"===s?e():e(null,s,o)}var a=this,c=hc("stat\0"+n,(function(r,i){if(i&&i.isSymbolicLink())return o(n,(function(r,o){r?a._stat2(t,n,null,i,e):a._stat2(t,n,r,o,e)}));a._stat2(t,n,r,i,e)}));c&&K(n,c)},bc.prototype._stat2=function(t,e,n,r,i){if(n&&("ENOENT"===n.code||"ENOTDIR"===n.code))return this.statCache[e]=!1,i();var o="/"===t.slice(-1);if(this.statCache[e]=r,"/"===e.slice(-1)&&r&&!r.isDirectory())return i(null,!1,r);var s=!0;return r&&(s=r.isDirectory()?"DIR":"FILE"),this.cache[e]=this.cache[e]||s,o&&"FILE"===s?i():i(null,s,r)}}function xc(){return yc||(yc=!0,_c()),oc}var Sc,kc,Ec,Cc,Tc,Ac,Pc,Oc,Ic=!1;function jc(t){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach((function(e){t[e]=t[e]||Ec[e],t[e+="Sync"]=t[e]||Ec[e]})),t.maxBusyTries=t.maxBusyTries||3,t.emfileWait=t.emfileWait||1e3,!1===t.glob&&(t.disableGlob=!0),t.disableGlob=t.disableGlob||!1,t.glob=t.glob||Ac}function Nc(t,e,n){"function"==typeof e&&(n=e,e={}),kc(t,"rimraf: missing path"),kc.equal(typeof t,"string","rimraf: path should be a string"),kc.equal(typeof n,"function","rimraf: callback function required"),kc(e,"rimraf: invalid options argument provided"),kc.equal(typeof e,"object","rimraf: options should be object"),jc(e);var r=0,i=null,o=0;if(e.disableGlob||!Cc.hasMagic(t))return s(null,[t]);function s(t,s){return t?n(t):0===(o=s.length)?n():void s.forEach((function(t){Lc(t,e,(function s(a){if(a){if(("EBUSY"===a.code||"ENOTEMPTY"===a.code||"EPERM"===a.code)&&r<e.maxBusyTries)return r++,setTimeout((function(){Lc(t,e,s)}),100*r);if("EMFILE"===a.code&&Pc<e.emfileWait)return setTimeout((function(){Lc(t,e,s)}),Pc++);"ENOENT"===a.code&&(a=null)}Pc=0,function(t){i=i||t,0==--o&&n(i)}(a)}))}))}e.lstat(t,(function(n,r){if(!n)return s(null,[t]);Cc(t,e.glob,s)}))}function Lc(t,e,n){kc(t),kc(e),kc("function"==typeof n),e.lstat(t,(function(r,i){return r&&"ENOENT"===r.code?n(null):(r&&"EPERM"===r.code&&Oc&&Fc(t,e,r,n),i&&i.isDirectory()?Mc(t,e,r,n):void e.unlink(t,(function(r){if(r){if("ENOENT"===r.code)return n(null);if("EPERM"===r.code)return Oc?Fc(t,e,r,n):Mc(t,e,r,n);if("EISDIR"===r.code)return Mc(t,e,r,n)}return n(r)})))}))}function Fc(t,e,n,r){kc(t),kc(e),kc("function"==typeof r),n&&kc(n instanceof Error),e.chmod(t,Tc,(function(i){i?r("ENOENT"===i.code?null:n):e.stat(t,(function(i,o){i?r("ENOENT"===i.code?null:n):o.isDirectory()?Mc(t,e,n,r):e.unlink(t,r)}))}))}function Dc(t,e,n){kc(t),kc(e),n&&kc(n instanceof Error);try{e.chmodSync(t,Tc)}catch(t){if("ENOENT"===t.code)return;throw n}try{var r=e.statSync(t)}catch(t){if("ENOENT"===t.code)return;throw n}r.isDirectory()?$c(t,e,n):e.unlinkSync(t)}function Mc(t,e,n,r){kc(t),kc(e),n&&kc(n instanceof Error),kc("function"==typeof r),e.rmdir(t,(function(i){!i||"ENOTEMPTY"!==i.code&&"EEXIST"!==i.code&&"EPERM"!==i.code?i&&"ENOTDIR"===i.code?r(n):r(i):function(t,e,n){kc(t),kc(e),kc("function"==typeof n),e.readdir(t,(function(r,i){if(r)return n(r);var o,s=i.length;if(0===s)return e.rmdir(t,n);i.forEach((function(r){Nc($ba8d383b7628bbc4c953fa5229c1ecfc$importAsync$250be0cf73975a764a61314d1e89b48a$join(t,r),e,(function(r){if(!o)return r?n(o=r):void(0==--s&&e.rmdir(t,n))}))}))}))}(t,e,r)}))}function Rc(t,e){var n;if(jc(e=e||{}),kc(t,"rimraf: missing path"),kc.equal(typeof t,"string","rimraf: path should be a string"),kc(e,"rimraf: missing options"),kc.equal(typeof e,"object","rimraf: options should be object"),e.disableGlob||!Cc.hasMagic(t))n=[t];else try{e.lstatSync(t),n=[t]}catch(r){n=Cc.sync(t,e.glob)}if(n.length)for(var r=0;r<n.length;r++){t=n[r];try{var i=e.lstatSync(t)}catch(n){if("ENOENT"===n.code)return;"EPERM"===n.code&&Oc&&Dc(t,e,n)}try{i&&i.isDirectory()?$c(t,e,null):e.unlinkSync(t)}catch(n){if("ENOENT"===n.code)return;if("EPERM"===n.code)return Oc?Dc(t,e,n):$c(t,e,n);if("EISDIR"!==n.code)throw n;$c(t,e,n)}}}function $c(t,e,n){kc(t),kc(e),n&&kc(n instanceof Error);try{e.rmdirSync(t)}catch(r){if("ENOENT"===r.code)return;if("ENOTDIR"===r.code)throw n;"ENOTEMPTY"!==r.code&&"EEXIST"!==r.code&&"EPERM"!==r.code||function(t,e){kc(t),kc(e),e.readdirSync(t).forEach((function(n){Rc($ba8d383b7628bbc4c953fa5229c1ecfc$importAsync$250be0cf73975a764a61314d1e89b48a$join(t,n),e)}));var n=Oc?100:1,r=0;for(;;){var i=!0;try{var o=e.rmdirSync(t,e);return i=!1,o}finally{if(++r<n&&i)continue}}}(t,e)}}function Bc(){return Ic||(Ic=!0,Sc={},Sc=Nc,Nc.sync=Rc,kc=o,Ec=M,Cc=xc(),Tc=parseInt("666",8),Ac={nosort:!0,silent:!0},Pc=0,Oc="win32"===process.platform),Sc}(function(){var t,e,n,r,o,s,a,c,u,l,f,p,h,d,g,m,v,y,w,b=[].slice;c=M,o=i,m=E,w=yo(),bo||(bo=!0,_o()),s=wo,g=To(),v=Bc(),u={__esModule:!1,getHomeDirectory:function(){return"win32"!==process.platform||process.env.HOME?process.env.HOME:process.env.USERPROFILE},absolute:function(t){if(null==t)return null;t=u.resolveHome(t);try{return c.realpathSync(t)}catch(e){return e,t}},normalize:function(t){return null==t?null:u.resolveHome(m.normalize(t.toString()))},resolveHome:function(t){return"~"===t?u.getHomeDirectory():0===t.indexOf("~"+m.sep)?""+u.getHomeDirectory()+t.substring(1):t},tildify:function(t){var e,n;return"win32"===process.platform?t:(n=u.normalize(t),null==(e=u.getHomeDirectory())?t:n===e?"~":n.startsWith(m.join(e,m.sep))?m.join("~",m.sep,n.substring(e.length+1)):t)},getAppDataDirectory:function(){switch(process.platform){case"darwin":return u.absolute(m.join("~","Library","Application Support"));case"linux":return"/var/lib";case"win32":return process.env.APPDATA;default:return null}},isAbsolute:function(t){return null==t&&(t=""),"win32"!==process.platform?"/"===t[0]:":"===t[1]||"\\"===t[0]&&"\\"===t[1]},existsSync:function(t){return h(t)&&!1!==y(t)},isDirectorySync:function(t){var e;return!!h(t)&&(!!(e=y(t))&&e.isDirectory())},isDirectory:function(t,e){return h(t)?c.stat(t,(function(t,n){return e(null==t&&n.isDirectory())})):e(!1)},isFileSync:function(t){var e;return!!h(t)&&(!!(e=y(t))&&e.isFile())},isSymbolicLinkSync:function(t){var e;return!!h(t)&&(!!(e=d(t))&&e.isSymbolicLink())},isSymbolicLink:function(t,e){return h(t)?c.lstat(t,(function(t,n){return"function"==typeof e?e(null!=n&&n.isSymbolicLink()):void 0})):process.nextTick((function(){return"function"==typeof e?e(!1):void 0}))},isExecutableSync:function(t){var e;return!!h(t)&&(!!(e=y(t))&&0!=(1&e.mode))},getSizeSync:function(t){var e;return h(t)&&null!=(e=y(t).size)?e:-1},listSync:function(t,e){var n;return u.isDirectorySync(t)?(n=c.readdirSync(t),e&&(n=u.filterExtensions(n,e)),n=(n=n.sort((function(t,e){return t.toLowerCase().localeCompare(e.toLowerCase())}))).map((function(e){return m.join(t,e)}))):[]},list:function(){var t,e,n,r;return r=arguments[0],(n=2<=arguments.length?b.call(arguments,1):[]).length>1&&(e=n.shift()),t=n.shift(),c.readdir(r,(function(n,i){return null!=n?t(n):(e&&(i=u.filterExtensions(i,e)),i=(i=i.sort((function(t,e){return t.toLowerCase().localeCompare(e.toLowerCase())}))).map((function(t){return m.join(r,t)})),t(null,i))}))},filterExtensions:function(t,e){return e=e.map((function(t){return""===t?t:"."+t.replace(/^\./,"")})),t.filter((function(t){return w.include(e,m.extname(t))}))},listTreeSync:function(t){var e,n;return n=[],e=function(t){return n.push(t),!0},u.traverseTreeSync(t,e,e),n},move:function(t,e,n){return f(t,e,(function(r,i){var o,s;if(!r)return i?(s=m.dirname(e),c.exists(s,(function(r){if(!r)return u.makeTree(s,(function(r){if(!r)return c.rename(t,e,n);n(r)}));c.rename(t,e,n)}))):((o=new Error("'"+e+"' already exists.")).code="EEXIST",void n(o));n(r)}))},moveSync:function(t,e){var n,r;if(!p(t,e))throw(n=new Error("'"+e+"' already exists.")).code="EEXIST",n;return r=m.dirname(e),c.existsSync(r)||u.makeTreeSync(r),c.renameSync(t,e)},removeSync:function(t){return v.sync(t)},remove:function(t,e){return v(t,e)},writeFileSync:function(t,e,n){return g.sync(m.dirname(t)),c.writeFileSync(t,e,n)},writeFile:function(t,e,n,r){return r=w.last(arguments),g(m.dirname(t),(function(i){return null!=i?"function"==typeof r?r(i):void 0:c.writeFile(t,e,n,r)}))},copy:function(t,e,n){return g(m.dirname(e),(function(r){var i,o;if(null==r)return(o=c.createReadStream(t)).on("error",(function(t){return"function"==typeof n&&n(t),n=null})),(i=c.createWriteStream(e)).on("error",(function(t){return"function"==typeof n&&n(t),n=null})),i.on("close",(function(){return"function"==typeof n&&n(),n=null})),o.pipe(i);"function"==typeof n&&n(r)}))},copySync:function(t,e){var n,r,i,o,s,a,l;for(o=c.readdirSync(t),g.sync(e),l=[],s=0,a=o.length;s<a;s++)r=o[s],i=m.join(t,r),n=m.join(e,r),u.isDirectorySync(i)?l.push(u.copySync(i,n)):l.push(u.copyFileSync(i,n));return l},copyFileSync:function(t,e,n){var r,i,o,s,a,u;null==n&&(n=16384),g.sync(m.dirname(e)),s=null,a=null;try{for(s=c.openSync(t,"r"),a=c.openSync(e,"w"),i=1,o=0,u=[];i>0;)r=new Buffer(n),i=c.readSync(s,r,0,r.length,o),c.writeSync(a,r,0,i,o),u.push(o+=i);return u}finally{null!=s&&c.closeSync(s),null!=a&&c.closeSync(a)}},makeTreeSync:function(t){if(!u.isDirectorySync(t))return g.sync(t)},makeTree:function(t,e){return u.isDirectory(t,(function(n){return n?"function"==typeof e?e():void 0:g(t,(function(t){return"function"==typeof e?e(t):void 0}))}))},traverseTreeSync:function(t,e,n){var r;if(null==n&&(n=e),u.isDirectorySync(t))return(r=function(t,e,n){var i,o,s,a,u,l,f;for(u=0,l=(f=c.readdirSync(t)).length;u<l;u++)o=f[u],i=m.join(t,o),(a=c.lstatSync(i)).isSymbolicLink()&&(s=y(i))&&(a=s),a.isDirectory()?n(i)&&r(i,e,n):a.isFile()&&e(i)})(t,e,n)},traverseTree:function(t,e,n,r){return c.readdir(t,(function(i,o){var a,u,l,f,p;if(i)return"function"==typeof r?r():void 0;for((u=s.queue((function(t,r){return c.stat(t,(function(i,o){return i?r(i):o.isFile()?(e(t),r()):o.isDirectory()&&n(t)?c.readdir(t,(function(e,n){var i,o,s;if(e)return r(e);for(o=0,s=n.length;o<s;o++)i=n[o],u.unshift(m.join(t,i));return r()})):r()}))}))).concurrency=1,u.drain=r,p=[],l=0,f=o.length;l<f;l++)a=o[l],p.push(u.push(m.join(t,a)));return p}))},md5ForPath:function(t){var e;return e=c.readFileSync(t),{}("md5").update(e).digest("hex")},resolve:function(){var t,e,n,r,i,o,s,a,c,l;if(t=1<=arguments.length?b.call(arguments,0):[],w.isArray(w.last(t))&&(n=t.pop()),o=null!=(l=t.pop())?l.toString():void 0,i=t,o){if(u.isAbsolute(o)){if(n&&(s=u.resolveExtension(o,n)))return s;if(u.existsSync(o))return o}for(a=0,c=i.length;a<c;a++)if(r=i[a],e=m.join(r,o),n){if(s=u.resolveExtension(e,n))return s}else if(u.existsSync(e))return u.absolute(e)}},resolveOnLoadPath:function(){var t,e,n;return t=1<=arguments.length?b.call(arguments,0):[],n=null,n=null!=module.paths?module.paths:process.resourcesPath?[m.join(process.resourcesPath,"app","node_modules")]:[],e=o.globalPaths.concat(n),u.resolve.apply(u,b.call(e).concat(b.call(t)))},resolveExtension:function(t,e){var n,r,i,o;for(i=0,o=e.length;i<o;i++)if(""===(n=e[i])){if(u.existsSync(t))return u.absolute(t)}else if(r=t+"."+n.replace(/^\./,""),u.existsSync(r))return u.absolute(r)},isCompressedExtension:function(t){return null!=t&&e.hasOwnProperty(t.toLowerCase())},isImageExtension:function(t){return null!=t&&n.hasOwnProperty(t.toLowerCase())},isPdfExtension:function(t){return".pdf"===(null!=t?t.toLowerCase():void 0)},isBinaryExtension:function(e){return null!=e&&t.hasOwnProperty(e.toLowerCase())},isReadmePath:function(t){var e;return e=m.extname(t),"readme"===m.basename(t,e).toLowerCase()&&(""===e||u.isMarkdownExtension(e))},isMarkdownExtension:function(t){return null!=t&&r.hasOwnProperty(t.toLowerCase())},isCaseInsensitive:function(){var t,e;return null==u.caseInsensitiveFs&&(t=y(process.execPath.toLowerCase()),e=y(process.execPath.toUpperCase()),u.caseInsensitiveFs=!(!t||!e)&&(t.dev===e.dev&&t.ino===e.ino)),u.caseInsensitiveFs},isCaseSensitive:function(){return!u.isCaseInsensitive()},statSyncNoException:function(){var t;return t=1<=arguments.length?b.call(arguments,0):[],y.apply(null,t)},lstatSyncNoException:function(){var t;return t=1<=arguments.length?b.call(arguments,0):[],d.apply(null,t)}},l=null,a=function(){return null===l&&(l=process.versions.electron&&parseInt(process.versions.electron.split(".")[0])<=2),l},y=function(){var t;if(t=1<=arguments.length?b.call(arguments,0):[],c.statSyncNoException&&a())return c.statSyncNoException.apply(c,t);try{return c.statSync.apply(c,t)}catch(t){return t,!1}},d=function(){var t;if(t=1<=arguments.length?b.call(arguments,0):[],c.lstatSyncNoException&&a())return c.lstatSyncNoException.apply(c,t);try{return c.lstatSync.apply(c,t)}catch(t){return t,!1}},t={".ds_store":!0,".a":!0,".exe":!0,".o":!0,".pyc":!0,".pyo":!0,".so":!0,".woff":!0},e={".bz2":!0,".egg":!0,".epub":!0,".gem":!0,".gz":!0,".jar":!0,".lz":!0,".lzma":!0,".lzo":!0,".rar":!0,".tar":!0,".tgz":!0,".war":!0,".whl":!0,".xpi":!0,".xz":!0,".z":!0,".zip":!0},n={".gif":!0,".ico":!0,".jpeg":!0,".jpg":!0,".png":!0,".tif":!0,".tiff":!0,".webp":!0},r={".markdown":!0,".md":!0,".mdown":!0,".mkd":!0,".mkdown":!0,".rmd":!0,".ron":!0},h=function(t){return null!=t&&"string"==typeof t&&t.length>0},f=function(t,e,n){return c.stat(t,(function(r,i){if(!r)return c.stat(e,(function(r,o){if(!r||"ENOENT"!==r.code)return n(void 0,t.toLowerCase()===e.toLowerCase()&&i.dev===o.dev&&i.ino===o.ino);n(void 0,!0)}));n(r)}))},p=function(t,e){var n,r;return r=y(t),n=y(e),!r||!n||t.toLowerCase()===e.toLowerCase()&&r.dev===n.dev&&r.ino===n.ino},po=new Proxy({},{get:function(t,e){var n;return null!=(n=u[e])?n:c[e]},set:function(t,e,n){return u[e]=n}})}).call(po);class zc{constructor(t){this.props=t,this.model=atom.workspace.buildTextEditor({mini:!0,softWrapped:!0,lineNumberGutterVisible:!1}),this.element=atom.views.getView(this.model),this.model.setText(t.initialText),t.selectAll?this.model.selectAll():this.model.getLastCursor().moveToEndOfScreenLine(),this.setReadOnly(),this.setGrammar(),this.model.scrollToBufferPosition([0,0])}async update(t){this.element=atom.views.getView(this.model),this.props={...this.props,...t},this.setReadOnly(),this.setGrammar()}focus(){this.element.focus()}getModel(){return this.model}setReadOnly(){this.model.setReadOnly(!!this.props.readOnly)}setGrammar(){void 0!==this.props.grammar?atom.textEditors.setGrammarOverride(this.model,this.props.grammar):atom.textEditors.clearGrammarOverride(this.model)}}class qc{constructor(t){this.props=t,Ft.initialize(this)}async update(t){this.props={...this.props,...t},await Ft.update(this)}render(){return Ft.dom("div",{className:"atomts-rename-view",ref:"main"},Ft.dom("div",{className:"block"},Ft.dom("div",null,Ft.dom("span",{ref:"title"},this.props.title),Ft.dom("span",{className:"subtle-info-message"},Ft.dom("span",null,"Close this panel with "),Ft.dom("span",{className:"highlight"},"esc"),Ft.dom("span",null," key. And commit with the "),Ft.dom("span",{className:"highlight"},"enter"),Ft.dom("span",null," key."))),Ft.dom("div",{className:"find-container block"},Ft.dom("div",{className:"editor-container"},Ft.dom(zc,{ref:"editor",initialText:this.props.initialText,selectAll:this.props.selectAll}))),this.renderValidationMessage()))}async destroy(){await Ft.destroy(this)}focus(){return this.refs.editor.focus()}getText(){return this.refs.editor.getModel().getText()}renderValidationMessage(){return void 0!==this.props.validationMessage?Ft.dom("div",{className:"highlight-error"},this.props.validationMessage):null}}async function Hc(t){const e=new qc({title:t.title,initialText:t.text,selectAll:t.autoSelect}),n=atom.workspace.addModalPanel({item:e,priority:1e3}),r=document.activeElement;e.focus();const i=new g;try{return await new Promise((n=>{i.add(atom.commands.add(e.refs.main,{"core:cancel":()=>{n(void 0)},"core:confirm":()=>{const r=e.getText(),i=t.onValidate(r);i?Ee(e.update({validationMessage:i})):n(r)}}))}))}finally{n.destroy(),i.dispose(),r&&r.focus()}}function Uc(t){const e=new g;for(const n of Hi)if("atom-text-editor"===n.selector){const r=n.desc(t);e.add(atom.commands.add(n.selector,n.command,{...r,didDispatch:async function(t){try{const e=t.currentTarget.getModel();En(e)?await r.didDispatch(e,(()=>t.abortKeyBinding())):(t.abortKeyBinding(),Cn(e)&&atom.notifications.addWarning("Atom-TypeScript cancelled last command: Current editor has no file path",{description:`Atom-TypeScript needs to determine the file path of the current editor to execute \`${n.command}\`, which it failed to do. You probably just need to save the current file somewhere.`,dismissable:!0}))}catch(t){Vc(t)}}}))}else{const r=n.desc(t);e.add(atom.commands.add(n.selector,n.command,{...r,didDispatch:async function(){try{await r.didDispatch()}catch(t){Vc(t)}}}))}return e}function Vc(t){atom.notifications.addFatalError("Something went wrong, see details below.",{detail:t.message,dismissable:!0,stack:t.stack})}Ui("atom-text-editor","typescript:rename-file",(t=>({description:"Rename current file",didDispatch:async function(e){const n=e.getPath();if(!n)return;const r=await Hc({autoSelect:!0,title:"Rename File",text:n,onValidate:t=>t.trim()?"":"If you want to abort : Press esc to exit"});if(!r)return;const i=await t.getClient(n),o=await i.execute("getEditsForFileRename",{oldFilePath:n,newFilePath:r});await t.applyEdits(o.body),await new Promise(((t,i)=>{po.move(n,r,(n=>{n?i(n):(e.getBuffer().setPath(r),t())}))}))}}))),Ui("atom-text-editor","typescript:rename-refactor",(t=>({description:"Rename symbol under text cursor everywhere it is used",didDispatch:async function(e){const n=Pn(e);if(!n)return;const r=await t.getClient(n.file),i=await r.execute("rename",n),{info:o,locs:s}=i.body;if(!o.canRename)return void atom.notifications.addInfo("AtomTS: Rename not available at cursor location");const a=await Hc({autoSelect:!0,title:"Rename Variable",text:o.displayName,onValidate:t=>t.replace(/\s/g,"")!==t.trim()?"The new variable must not contain a space":t.trim()?"":"If you want to abort : Press esc to exit"});void 0!==a&&await t.applyEdits(s.map((t=>({fileName:t.file,textChanges:t.locs.map((t=>({...t,newText:a})))}))))}}))),Ui("atom-workspace","typescript:restart-all-servers",(t=>({description:"Kill all tsserver instances. They will be auto-restarted",didDispatch:async function(){t.killAllServers()}}))),Ui("atom-workspace","typescript:return-from-declaration",(t=>({description:"If used `go-to-declaration`, return to previous text cursor position",didDispatch:async function(){await t.histGoBack()}}))),Ui("atom-workspace","typescript:show-editor-position-history",(t=>({description:"If used `go-to-declaration`, return to previous text cursor position",didDispatch:async function(){await t.histShowHistory()}}))),Ui("atom-text-editor","typescript:toggle-semantic-view",(t=>({description:"Toggle semantic view outline",didDispatch:function(){t.toggleSemanticViewController()}}))),Ui("atom-text-editor","typescript:show-tooltip",(t=>({description:"Show type tooltip at current text cursor position",didDispatch:async function(e){return t.showTooltipAt(e)}}))),Ui("atom-text-editor","typescript:show-signature-help",(t=>({description:"Show signature help tooltip at current text cursor position",didDispatch:async function(e){return t.showSigHelpAt(e)}}))),Ui("atom-text-editor","typescript:hide-signature-help",(t=>({description:"Hide the currently visible signature help",didDispatch:async function(e,n){t.hideSigHelpAt(e)||n()}}))),Ui("atom-text-editor","typescript:signature-help-next",(t=>({description:"Show next signature help if available",didDispatch:async function(e,n){t.rotateSigHelp(e,1)||n()}}))),Ui("atom-text-editor","typescript:signature-help-prev",(t=>({description:"Show previous signature help if available",didDispatch:async function(e,n){t.rotateSigHelp(e,-1)||n()}}))),Ui("atom-text-editor","typescript:toggle-file-symbols",(t=>({description:"Toggle view for finding file symbols",didDispatch:async function(e){t.toggleFileSymbolsView(e)}}))),Ui("atom-text-editor","typescript:toggle-project-symbols",(t=>({description:"Toggle view for finding file symbols",didDispatch:async function(e){t.toggleProjectSymbolsView(e)}})));class Wc{constructor(t,e){this.children=e,this.props={...t,delay:{show:0,hide:0}},Ft.initialize(this),this.tooltipDisposable=atom.tooltips.add(this.element,this.props)}async update(t,e){this.props={...this.props,...t},this.children=e,await Ft.update(this),this.tooltipDisposable.dispose(),this.tooltipDisposable=atom.tooltips.add(this.element,this.props)}render(){return Ft.dom("div",{className:"inline-block"},this.children?this.children:null)}async destroy(){await Ft.destroy(this),this.tooltipDisposable.dispose()}}class Gc{constructor(t){this.hiddenBuildStatus=!1,this.disposables=new g,this.buildStatusClicked=()=>{this.props.buildStatus.success||atom.notifications.addError("Build failed",{detail:this.props.buildStatus.message,dismissable:!0})},this.props={...t},this.setHideBuildStatus(atom.config.get("atom-typescript").buildStatusTimeout),this.resetBuildStatusTimeout(),Ft.initialize(this),this.disposables.add(atom.config.onDidChange("atom-typescript.buildStatusTimeout",(({newValue:t})=>{this.setHideBuildStatus(t),Ee(this.update({}))})))}async update(t){const e=void 0!==t.buildStatus&&t.buildStatus.success!==this.props.buildStatus.success;this.props={...this.props,...t},e&&this.resetBuildStatusTimeout(),await Ft.update(this)}render(){if(this.hiddenBuildStatus)return Ft.dom("span",null);let t,e;return this.props.buildStatus.success?(t="highlight-success",e="Emit Success"):(t="highlight-error",e="Emit Failed"),Ft.dom(Wc,{title:this.props.buildStatus.success?"Build was successful":"Build failed; click to show error message"},Ft.dom("span",{className:t,on:{click:this.buildStatusClicked}},e))}async destroy(){await Ft.destroy(this)}resetBuildStatusTimeout(){this.hiddenBuildStatus=!1,this.props.buildStatus.success&&this.hideBuildStatus()}setHideBuildStatus(t){this.hideBuildStatus=t>0?Te.debounce((()=>{this.hiddenBuildStatus=!0,Ee(Ft.update(this))}),1e3*t):0===t?()=>{this.hiddenBuildStatus=!0}:()=>{}}}class Kc{constructor(t){this.props={...t},Ft.initialize(this)}async update(t){this.props={...this.props,...t},await Ft.update(this)}render(){return Ft.dom(Wc,{title:()=>this.props.tsConfigPath.startsWith("/dev/null")?"No tsconfig.json":`Click to open ${atom.project.relativize(this.props.tsConfigPath)}`},Ft.dom("a",{className:"inline-block",href:"",on:{click:t=>{t.preventDefault(),this.openConfigPath()}}},this.props.tsConfigPath.startsWith("/dev/null")?"No project":A((t=this.props.tsConfigPath,"~"+atom.project.relativize(t)))));var t}async destroy(){await Ft.destroy(this)}openConfigPath(){this.props.tsConfigPath.startsWith("/dev/null")?atom.notifications.addInfo("No tsconfig for current file"):Ee(atom.workspace.open(this.props.tsConfigPath))}}class Qc{constructor(t={}){this.props={visible:!0,pending:[],progress:{max:0,value:0},...t},Ft.initialize(this)}async update(t){this.props={...this.props,...t},await Ft.update(this)}render(){return Ft.dom("ts-status-panel",{className:this.props.visible?"":"hide"},this.renderVersion(),this.renderPending(),this.renderConfigPath(),this.renderStatus(),this.renderProgress())}async destroy(){await Ft.destroy(this)}dispose(){Ee(this.destroy())}async show(){await this.update({visible:!0})}async hide(){await this.update({visible:!1})}renderVersion(){return void 0!==this.props.clientVersion?Ft.dom(Wc,{title:"Active TypeScript version"},this.props.clientVersion):null}renderPending(){return this.props.pending.length>0?Ft.dom(Wc,{title:`Pending Requests: <ul>${this.props.pending.map((({title:t})=>`<li>${t}</li>`)).join("")}</ul>`,html:!0},Ft.dom("span",{ref:"pendingCounter"},this.props.pending.length.toString()),Ft.dom("span",{ref:"pendingSpinner",className:"loading loading-spinner-tiny inline-block",style:{marginLeft:"5px",opacity:"0.5",verticalAlign:"sub"}})):null}renderConfigPath(){return void 0!==this.props.tsConfigPath?Ft.dom(Kc,{tsConfigPath:this.props.tsConfigPath}):null}renderStatus(){return this.props.buildStatus?Ft.dom(Gc,{buildStatus:this.props.buildStatus}):null}renderProgress(){return this.props.progress.value<this.props.progress.max?Ft.dom("progress",{style:{verticalAlign:"baseline"},className:"inline-block",max:this.props.progress.max,value:this.props.progress.value}):null}}class Zc{constructor(t=[]){this.prevCursorPositions=t}async goBack(){return this.goHistory(1)}async goHistory(t){let e;for(;t-- >0;)e=this.prevCursorPositions.pop();if(e)return this.open({file:e.file,start:{line:e.line,offset:e.offset}});atom.notifications.addInfo("AtomTS: Previous position not found.")}async goForward(t,e){const n=Pn(t);if(n){this.prevCursorPositions.push(n);const t=100;this.prevCursorPositions.length>t&&this.prevCursorPositions.splice(0,this.prevCursorPositions.length-t)}return this.open(e)}async showHistory(){const t=await qi({items:this.getHistory().slice().reverse().map(((t,e)=>({...t,idx:e}))),itemTemplate:(t,e)=>Ft.dom("li",{className:"two-lines"},Ft.dom("div",{className:"primary-line"},Ft.dom(Li,{label:t.file,query:e.getFilterQuery()})),Ft.dom("div",{className:"secondary-line"},"Line: ",t.line,", column: ",t.offset)),itemFilterKey:"file"});t&&await this.goHistory(t.idx+1)}getHistory(){return this.prevCursorPositions}dispose(){}serialize(){return this.prevCursorPositions}async open(t){const e=await atom.workspace.open(t.file,{initialLine:t.start.line-1,initialColumn:t.start.offset-1,searchAllPanes:!0});return atom.workspace.isTextEditor(e)&&e.scrollToCursorPosition({center:!0}),e}}class Jc{constructor(t,e){let n,r,i;this.getClient=t,this.editor=e,this.disposables=new g,this.occurrenceMarkers=[],this.disposed=!1;let o=!1;this.disposables.add(atom.config.observe("atom-typescript.occurrenceHighlightDebounceTimeout",(t=>{n=Te.debounce((()=>{Ee(this.update())}),t),i=3.5*t})),e.onDidChangeCursorPosition((()=>{void 0===r?n():o=!0})),e.onDidChangePath((()=>n())),e.onDidChangeGrammar((()=>n())),e.onDidChange((()=>{void 0!==r&&clearTimeout(r),r=window.setTimeout((()=>{o&&(n(),o=!1),r=void 0}),i)})))}dispose(){this.disposed||(this.disposed=!0,this.disposables.dispose(),this.clearMarkers())}clearMarkers(){for(const t of this.occurrenceMarkers)t.destroy();this.occurrenceMarkers=[]}async update(){if(this.disposed)return;if(!En(this.editor))return void this.clearMarkers();const t=this.editor.getPath();if(void 0===t)return;const e=await this.getClient(t);if(this.disposed)return;const n=this.editor.getLastCursor().getBufferPosition();try{const r=await e.execute("documentHighlights",{file:t,line:n.row+1,offset:n.column+1,filesToSearch:[t]});if(this.disposed)return;const i=Array.from(this.getNewOccurrenceMarkers(r.body));for(const t of this.occurrenceMarkers)i.includes(t)||t.destroy();this.occurrenceMarkers=i}catch(t){window.atom_typescript_debug&&console.error(t)}}*getNewOccurrenceMarkers(t){for(const e of t)if(e.file===this.editor.getPath())for(const t of e.highlightSpans){const e=hn(t),n=this.occurrenceMarkers.find((t=>t.getBufferRange().isEqual(e)));if(n)yield n;else{const t=this.editor.markBufferRange(e);this.editor.decorateMarker(t,{type:"highlight",class:"atom-typescript-occurrence"}),yield t}}}}class Yc{constructor(t){this.disposables=new g,this.disposables.add(atom.workspace.observeTextEditors((e=>{const n=new Jc(t,e);this.disposables.add(n,e.onDidDestroy((()=>{this.disposables.remove(n),n.dispose()})))})))}dispose(){this.disposables.dispose()}}function Xc(t,e,n,r){let i,o=n.right,s=!1,a="";t.style.left="",t.style.top="",t.style.right="",t.style.bottom="";const c=e.clientWidth,u=getComputedStyle(t),l=parseInt(u.width,10),f=parseInt(u.height,10);if(o+l>=c&&(o=c-l-10),o<0&&(a="pre-wrap",o=10,s=10),"bottom"===r){const t=e.clientHeight;i=n.bottom,i+f>=t&&(i=n.top-f)}else"top"===r&&(i=n.top-f,i<0&&(i=n.bottom));t.style.left=`${o}px`,t.style.top=`${i}px`,!1!==s&&(t.style.right=`${s}px`),a&&(t.style.whiteSpace=a)}class tu{constructor(t){this.parent=t,this.props={left:0,right:0,top:0,bottom:0},Ft.initialize(this)}async destroy(){return Ft.destroy(this)}async update(t){var e,n,r;void 0!==(null===(e=t.sigHelp)||void 0===e?void 0:e.selectedItemIndex)&&(null===(n=t.sigHelp)||void 0===n?void 0:n.selectedItemIndex)!==(null===(r=this.props.sigHelp)||void 0===r?void 0:r.selectedItemIndex)&&(this.props.visibleItem=void 0),this.props={...this.props,...t},void 0===this.props.sigHelp?this.props.visibleItem=void 0:void 0!==this.props.visibleItem&&(this.props.visibleItem=this.props.visibleItem%this.props.sigHelp.items.length,this.props.visibleItem<0&&(this.props.visibleItem+=this.props.sigHelp.items.length)),await Ft.update(this)}writeAfterUpdate(){Xc(this.element,this.parent,this.props,atom.config.get("atom-typescript").sigHelpPosition)}render(){return Ft.dom("div",{className:"atom-typescript-tooltip tooltip",key:this.sigHelpHash()},Ft.dom("div",{className:"tooltip-inner"},this.tooltipContents()))}sigHelpHash(){if(!this.props.sigHelp)return;const{start:t,end:e}=this.props.sigHelp.applicableSpan;return`${t.line}:${t.offset}-${e.line}:${e.offset}`}tooltipContents(){if(!this.props.sigHelp)return"…";const{sigHelp:t}=this.props,e=void 0!==this.props.visibleItem?this.props.visibleItem:t.selectedItemIndex,n=t.items.length,r=["atom-typescript-tooltip-signature-help"];function i(n){const i=[];return n===t.selectedItemIndex&&i.push("atom-typescript-tooltip-signature-help-selected"),n===e&&i.push("atom-typescript-tooltip-signature-help-visible"),[...r,...i].join(" ")}return n>1&&r.push("atom-typescript-tooltip-signature-help-changable"),t.items.map(((e,n)=>Ft.dom("div",{className:i(n)},Ft.dom("div",null,wn(e.prefixDisplayParts),this.renderSigHelpParams(e.parameters,t.argumentIndex),wn(e.suffixDisplayParts),Ft.dom("div",{className:"atom-typescript-tooltip-signature-help-documentation"},wn(e.documentation))))))}renderSigHelpParams(t,e){return t.map(((t,n)=>Ft.dom("span",{className:"atom-typescript-tooltip-signature-help-parameter"},n>0?", ":null,Ft.dom("span",{className:n===e?"atom-typescript-tooltip-signature-help-selected":void 0},wn(t.displayParts)))))}}class eu{constructor(t,e,n){this.deps=t,this.editor=e,this.cancelled=!1,this.disposables=new g;const r=atom.views.getView(this.editor);this.view=new tu(r),r.appendChild(this.view.element);const i=Te.debounce(this.updateTooltip.bind(this),100,{leading:!0});this.disposables.add(this.editor.onDidChangeCursorPosition((t=>{n=t.newBufferPosition,Ee(i(n))})),r.onDidChangeScrollTop((()=>{s((()=>this.updateTooltipPosition(n)))})),r.onDidChangeScrollLeft((()=>{s((()=>this.updateTooltipPosition(n)))}))),Ee(this.updateTooltip(n))}isDisposed(){return this.cancelled}dispose(){this.cancelled||(this.cancelled=!0,this.disposables.dispose(),Ee(this.view.destroy()))}async rotateSigHelp(t){const{visibleItem:e,sigHelp:n}=this.view.props,r=void 0!==e?e:void 0!==(null==n?void 0:n.selectedItemIndex)?null==n?void 0:n.selectedItemIndex:0;await this.view.update({visibleItem:r+t})}async updateTooltip(t){if(this.cancelled)return;let e;try{e=this.computeTooltipPosition(t)}catch(t){return void console.warn(t)}const n=await this.getMessage(t);this.cancelled||(n?await this.view.update({...e,sigHelp:n}):this.dispose())}updateTooltipPosition(t){if(this.cancelled)return;const e=this.computeTooltipPosition(t);Ee(this.view.update({...e}))}computeTooltipPosition(t){const e=atom.views.getView(this.editor),n=e.pixelPositionForBufferPosition(t),r=e.querySelector(".lines").getBoundingClientRect(),i=this.editor.getLineHeightInPixels(),o=e.getBoundingClientRect(),s=n.top+r.top-o.top+i/2,a=n.left+r.left-o.left,c=.7*i;return{left:a,right:a,top:s-c,bottom:s+c}}async getMessage(t){if(!En(this.editor))return;const e=this.editor.getPath();if(void 0===e)return;const n=await this.deps.getClient(e);try{return(await n.execute("signatureHelp",{file:e,line:t.row+1,offset:t.column+1})).body}catch(t){return}}}class nu{constructor(t){this.deps=t,this.subscriptions=new g,this.editorMap=new WeakMap,this.stoppedChanging=t=>e=>{if(!atom.config.get("atom-typescript.sigHelpDisplayOnChange"))return;if(void 0===t.getPath())return;const n=t.getLastCursor().getBufferPosition(),[r]=e.changes.filter((t=>t.newRange.containsPoint(n)));r&&null!==r.newText.match(/[<(,]/)&&Ee(this.showTooltip(t,n))},this.subscriptions.add(atom.workspace.observeTextEditors((t=>{const e=new g;e.add(t.onDidDestroy((()=>{e.dispose(),this.subscriptions.remove(e);const n=this.editorMap.get(t);n&&n.dispose()})),t.onDidStopChanging(this.stoppedChanging(t))),this.subscriptions.add(e)})))}dispose(){this.subscriptions.dispose();for(const t of atom.workspace.getTextEditors()){const e=this.editorMap.get(t);e&&e.dispose()}}async showTooltipAt(t){const e=t.getLastCursor().getBufferPosition();return this.showTooltip(t,e)}rotateSigHelp(t,e){const n=this.editorMap.get(t);return!(!n||n.isDisposed())&&(Ee(n.rotateSigHelp(e)),!0)}hideTooltipAt(t){const e=this.editorMap.get(t);return!(!e||e.isDisposed())&&(e.dispose(),!0)}async showTooltip(t,e){const n=this.editorMap.get(t);n&&!n.isDisposed()||this.editorMap.set(t,new eu(this.deps,t,e))}}function ru(t,e,n,r){const i=e=>{const i=e.target.closest(n);i&&t.contains(i)&&r(e)};return t.addEventListener(e,i),new w((()=>{t.removeEventListener(e,i)}))}class iu{constructor(){this.tooltip=null,this.props={left:0,right:0,top:0,bottom:0},Ft.initialize(this)}async destroy(){return Ft.destroy(this)}async update(t){this.props={...this.props,...t},this.tooltip=await pi(this.props.info,Ft,(t=>Ft.dom("div",{className:"atom-typescript-tooltip-tooltip-code"},t))),await Ft.update(this)}writeAfterUpdate(){Xc(this.element,document.body,this.props,atom.config.get("atom-typescript").tooltipPosition)}render(){return Ft.dom("div",{className:"atom-typescript-tooltip tooltip"},Ft.dom("div",{className:"tooltip-inner"},this.tooltip))}}class ou{constructor(t,e,n,r){this.getClient=t,this.cancelled=!1,Ee(this.initialize(e,n,r))}dispose(){this.cancelled=!0,this.view&&(Ee(this.view.destroy()),this.view=void 0)}async initialize(t,e,n){const r=atom.views.getView(t);let i,o;try{i=r.pixelPositionForBufferPosition(n),o=r.pixelPositionForBufferPosition(n.traverse([0,1]))}catch(e){return void console.warn(e)}if(i.left>=o.left)return;const s=.7*t.getLineHeightInPixels(),a={left:e.clientX,right:e.clientX,top:e.clientY-s,bottom:e.clientY+s},c=await this.getMessage(t,n);this.cancelled||void 0!==c&&await this.showTooltip(a,c)}async getMessage(t,e){let n;const r=await this.getClient(t);if(!r)return;const i=t.getPath();try{if(void 0===i)return;n=await r.execute("quickinfo",{file:i,line:e.row+1,offset:e.column+1})}catch(t){return}return n.body}async showTooltip(t,e){this.view=new iu,document.body.appendChild(this.view.element),await this.view.update({...t,info:e})}}class su{constructor(t){this.getClientInternal=t,this.subscriptions=new g,this.editorMap=new WeakMap,this.getClient=async t=>{const e=t.getPath();if(void 0!==e&&En(t)&&R.existsSync(e))return this.getClientInternal(e)},this.clearExprTypeTimeout=()=>{void 0!==this.exprTypeTimeout&&(clearTimeout(this.exprTypeTimeout),this.exprTypeTimeout=void 0),this.hideExpressionType()},this.trackMouseMovement=t=>{let e;return n=>{const r=function(t,e){const n=atom.views.getView(t).getComponent().screenPositionForMouseEvent(e);if(!isNaN(n.row)&&!isNaN(n.column))return t.bufferPositionForScreenPosition(n)}(t,n);r&&(e&&e.isEqual(r)&&this.pendingTooltip||(e=r,this.clearExprTypeTimeout(),this.exprTypeTimeout=window.setTimeout((()=>this.showExpressionType(t,n,r)),atom.config.get("atom-typescript").tooltipDelay)))}},this.subscriptions.add(atom.workspace.observeTextEditors((t=>{const e=atom.views.getView(t),n=e.querySelector(".lines");this.editorMap.set(t,{rawView:e,lines:n});const r=new g;r.add(ru(e,"mousemove",".scroll-view",this.trackMouseMovement(t)),ru(e,"mouseout",".scroll-view",this.clearExprTypeTimeout),ru(e,"keydown",".scroll-view",this.clearExprTypeTimeout),e.onDidChangeScrollTop(this.clearExprTypeTimeout),e.onDidChangeScrollLeft(this.clearExprTypeTimeout),t.onDidDestroy((()=>{r.dispose(),this.subscriptions.remove(r),this.clearExprTypeTimeout()}))),this.subscriptions.add(r)})))}dispose(){this.subscriptions.dispose(),this.clearExprTypeTimeout()}showExpressionAt(t){const e=t.getLastCursor().getBufferPosition(),n=atom.views.getView(t);let r;try{r=n.pixelPositionForBufferPosition(e)}catch(t){return void console.warn(t)}this.showExpressionType(t,this.mousePositionForPixelPosition(t,r),e)}mousePositionForPixelPosition(t,e){const n=atom.views.getView(t).querySelector(".lines").getBoundingClientRect();return{clientY:e.top+n.top+t.getLineHeightInPixels()/2,clientX:e.left+n.left}}showExpressionType(t,e,n){this.pendingTooltip&&this.pendingTooltip.dispose(),this.pendingTooltip=new ou(this.getClient,t,e,n)}hideExpressionType(){this.pendingTooltip&&(this.pendingTooltip.dispose(),this.pendingTooltip=void 0)}}class au{constructor(t){this.getClient=t,this.subscriptions=new g;const e=atom.workspace.paneForURI("atom-typescript://semantic-view");e&&(this.view=e.itemForURI("atom-typescript://semantic-view")),this.view&&Ee(this.view.setGetClient(this.getClient)),this.subscriptions.add(new w((()=>{this.view&&(atom.workspace.hide(this.view),Ee(this.view.destroy()))})),atom.config.observe("atom-typescript.showSemanticView",(t=>{t?Ee(this.show()):this.hide()})))}dispose(){this.subscriptions.dispose()}async toggle(){this.view?await atom.workspace.toggle(this.view):await this.show()}async show(){this.view||(this.view=Rn.create({navTree:null}),await this.view.setGetClient(this.getClient)),await atom.workspace.open(this.view,{searchAllPanes:!0})}hide(){return!!this.view&&atom.workspace.hide(this.view)}}class cu{constructor(t){this.position=t.position,this.name=t.name,this.type=t.type,this.parent=t.parent,this.file=t.file}static fromNavTree(t,e){const n=t.spans[0].start;return new cu({name:t.text,type:t.kind,position:{row:n.line-1,column:n.offset-1},parent:null!=e?e:null})}static fromNavto(t,e){const n=t.start;return new cu({name:t.name,type:t.kind,position:{row:n.line-1,column:n.offset-1},parent:null!=e?e:null,file:t.file})}}async function uu(t,e){const n=await async function(t,e){try{const n=await e.getClient(t);return(await n.execute("navtree",{file:t})).body}catch(e){console.error(t,e)}}(t,e);return n&&n.childItems?Array.from(fu(n.childItems)):[]}async function lu(t,e,n){const r=await async function(t,e,n){try{const r=await n.getClient(t);return(await r.execute("navto",{file:t,currentFileOnly:!1,searchValue:e,maxResultCount:1e3})).body}catch(e){console.error(t,e)}}(t,e,n);return r?Array.from(function*(t,e){for(const n of t)yield cu.fromNavto(n,e)}(r)):[]}function*fu(t,e){t.sort(((t,e)=>t.spans[0].start.line-e.spans[0].start.line));for(const n of t){const t=cu.fromNavTree(n,e);yield t,n.childItems&&(yield*fu(n.childItems,t))}}async function pu(t,e,n){if(void 0!==t.file)return n(e,{file:t.file,start:{line:t.position.row+1,offset:t.position.column+1}})}async function hu(t,e){const n=t.getPath();if(void 0!==n){let r;atom.config.get("symbols-view.quickJumpToFileSymbol")&&(r=function(t){const e=atom.views.getView(t).getScrollTop();return{bufferRanges:t.getSelectedBufferRanges(),scrollTop:e}}(t));const i=await qi({items:uu(n,e),itemTemplate:({name:t,position:e},n)=>Ft.dom("li",{className:"two-lines"},Ft.dom("div",{className:"primary-line"},Ft.dom(Li,{label:t,query:n.getFilterQuery()})),Ft.dom("div",{className:"secondary-line"},`Line ${e.row+1}`)),didChangeSelection:function(e){atom.config.get("symbols-view.quickJumpToFileSymbol")&&e&&t.setCursorBufferPosition(e.position)},itemFilterKey:"name"});i?await pu(i,t,e.histGoForward):r&&function(t,{bufferRanges:e,scrollTop:n}){const r=atom.views.getView(t);t.setSelectedBufferRanges(e),r.setScrollTop(n)}(t,r)}}class du{constructor(t){this.deps=t}toggleFileView(t){Ee(hu(t,this.deps))}toggleProjectView(t){Ee(async function(t,e){const n=t.getPath();if(void 0!==n){const r=await qi({items:t=>lu(n,t,e),itemTemplate:function({name:t,position:e,file:n},r){const i=atom.project.relativize(n);return Ft.dom("li",{className:"two-lines"},Ft.dom("div",{className:"primary-line"},Ft.dom(Li,{label:t,query:r.getFilterQuery()})),Ft.dom("div",{className:"secondary-line"},`File ${i} line ${e.row+1}`))},itemFilterKey:"name"});r&&await pu(r,t,e.histGoForward)}}(t,this.deps))}dispose(){}}class gu{constructor(){this.errors=new Map,this.fileGrammars=new Map,this.pushErrors=Te.debounce(this.pushErrors.bind(this),100)}*getErrorsInRange(t,e){for(const n of this.errors.values()){const r=n.get(P(t));r&&(yield*r.filter((t=>hn(t).intersectsWith(e))))}}*getErrorsAt(t,e){for(const n of this.errors.values()){const r=n.get(P(t));r&&(yield*r.filter((t=>hn(t).containsPoint(e))))}}setErrors(t,e,n){let r=this.errors.get(t);r||(r=new Map,this.errors.set(t,r)),r.set(P(e),n),this.pushErrors()}clearFileErrors(t){for(const e of this.errors.values())e.delete(t);this.pushErrors()}clear(){this.linter&&this.linter.clearMessages()}setLinter(t){this.linter=t,this.pushErrors()}dispose(){this.clear(),this.linter&&this.linter.dispose(),this.linter=void 0}pushErrors(){this.linter&&this.linter.setAllMessages(this.getLinterErrors())}getLinterErrors(){if(atom.config.get("atom-typescript.suppressAllDiagnostics"))return[];const t=[];for(const e of this.errors.values())for(const[n,r]of e){const e=atom.workspace.getTextEditors().find((t=>t.getPath()===n)),i=e?e.getGrammar().scopeName:this.selectGrammar(n);if(!mu("suppressAllDiagnostics",i))for(const e of r){if(mu("ignoredDiagnosticCodes",i).includes(`${e.code}`))continue;if(mu("ignoreUnusedSuggestionDiagnostics",i)&&e.reportsUnnecessary)continue;if("suggestion"===e.category&&mu("ignoredSuggestionDiagnostics",i).includes(`${e.code}`))continue;if(mu("ignoreNonSuggestionSuggestionDiagnostics",i)&&"suggestion"===e.category&&!bn(e.code,ln.Suggestion))continue;let{start:r,end:o}=e;r&&o||(r=o={line:1,offset:1}),t.push({severity:this.getSeverity(mu("unusedAsInfo",i),e),excerpt:e.text,location:{file:n,position:dn(r,o)}})}}return t}selectGrammar(t){const e=this.fileGrammars.get(t);if(void 0!==e)return e;const n=atom.grammars.selectGrammar(t,"").scopeName;return this.fileGrammars.set(t,n),n}getSeverity(t,e){if(t&&6133===e.code)return"info";switch(e.category){case"error":return"error";case"warning":return"warning";default:return"info"}}}function mu(t,e){return atom.config.get(`atom-typescript.${t}`,{scope:[e]})}class vu{constructor(t,e){let n;this.buffer=t,this.deps=e,this.events=new b,this.compileOnSave=!1,this.subscriptions=new g,this.on=this.events.on.bind(this.events),this.dispose=()=>{this.subscriptions.dispose(),Ee(this.close())},this.init=async()=>{this.state&&(await this.state.client.execute("open",{file:this.state.filePath,fileContent:this.buffer.getText()}),Ee(this.getErr({allFiles:!1,delay:0})))},this.close=async()=>{if(await this.openPromise,this.state){const t=this.state.client,e=this.state.filePath;this.deps.clearFileErrors(e),this.state.subscriptions.dispose(),this.state=void 0,await t.execute("close",{file:e})}},this.onDidChangePath=t=>{Ee(this.close().then((()=>{this.openPromise=this.open(t)})))},this.onDidSave=async()=>{await Promise.all([this.getErr({allFiles:!0,delay:100}),this.doCompileOnSave()])},this.onDidChangeText=async({changes:t})=>{if(0===t.length||!this.state)return;const{client:e,filePath:n}=this.state;await Promise.all(t.reduceRight(((t,{oldRange:r,newText:i})=>(t.push(e.execute("change",{file:n,line:r.start.row+1,offset:r.start.column+1,endLine:r.end.row+1,endOffset:r.end.column+1,insertString:i})),t)),[]))},this.subscriptions.add(atom.config.observe("atom-typescript.getErrDebounceTimeout",(t=>{n=Te.debounce((()=>{Ee(this.getErr({allFiles:!1,delay:0}))}),t)})),t.onDidChangePath(this.onDidChangePath),t.onDidDestroy(this.dispose),t.onDidSave((()=>{Ee(this.onDidSave())})),t.onDidStopChanging((({changes:t})=>{t.length>0&&this.deps.reportBuildStatus(void 0)})),t.onDidChangeText((t=>{Ee(this.onDidChangeText(t)),n()}))),this.openPromise=this.open(this.buffer.getPath())}static create(t,e){const n=vu.bufferMap.get(t);if(n)return n;{const n=new vu(t,e);return vu.bufferMap.set(t,n),n}}getPath(){return this.state&&this.state.filePath}getInfo(){if(this.state)return{clientVersion:this.state.client.version,tsConfigPath:this.state.configFile&&this.state.configFile.getPath()}}async getErr(t){if(!this.state)return;const e=t.allFiles?Array.from(function*(){for(const t of atom.workspace.getTextEditors())En(t)&&(yield t.getPath())}()):[this.state.filePath];await this.state.client.execute("geterr",{files:e,delay:t.delay})}async compile(){if(!this.state)return;const{client:t,filePath:e}=this.state,n=await t.execute("compileOnSaveAffectedFileList",{file:e}),r=Te.flatten(n.body.map((t=>t.fileNames)));if(0===r.length)return;const i=r.map((e=>t.execute("compileOnSaveEmitFile",{file:e})));if(!(await Promise.all(i)).every((t=>!!t.body)))throw new Error("Some files failed to emit")}async doCompileOnSave(){if(this.compileOnSave){this.deps.reportBuildStatus(void 0);try{await this.compile(),this.deps.reportBuildStatus({success:!0})}catch(t){const e=t;console.error("Save failed with error",e),this.deps.reportBuildStatus({success:!1,message:e.message})}}}async open(t){if(void 0===t||!Sn(t))return this.close();{const e=await this.deps.getClient(t);this.state={client:e,filePath:t,configFile:void 0,subscriptions:new g},this.state.subscriptions.add(e.on("restarted",(()=>Ee(this.init())))),await this.init();const n=await e.execute("projectInfo",{needFileNameList:!1,file:t});void 0!==n.body.configFileName&&(this.state.configFile=new S(n.body.configFileName),await this.readConfigFile(),this.state.subscriptions.add(this.state.configFile.onDidChange((()=>Ee(this.readConfigFile()))))),this.events.emit("opened")}}async readConfigFile(){if(!this.state||!this.state.configFile)return;const t=gn(this.state.configFile.getPath());this.compileOnSave=t.compileOnSave;const e=atom.config.get("atom-typescript");await this.state.client.execute("configure",{file:this.state.filePath,formatOptions:t.formatCodeOptions,preferences:{includeCompletionsWithInsertText:!0,includeCompletionsForModuleExports:e.includeCompletionsForModuleExports,quotePreference:e.quotePreference,importModuleSpecifierEnding:e.importModuleSpecifierEnding,importModuleSpecifierPreference:"auto"===e.importModuleSpecifierPreference?void 0:e.importModuleSpecifierPreference,...t.preferences}})}}vu.bufferMap=new WeakMap;class yu{constructor(t,e){this.editor=t,this.opts=e,this.subscriptions=new g,this.isTypescript=!1,this.destroy=()=>{atom.views.getView(this.editor).classList.remove("typescript-editor"),this.subscriptions.dispose()},this.didActivate=()=>{this.isTypescript&&this.reportInfo()},this.onOpened=()=>{atom.workspace.getActiveTextEditor()===this.editor&&this.reportInfo()},this.checkIfTypescript=()=>{this.isTypescript=En(this.editor),this.isTypescript?atom.views.getView(this.editor).classList.add("typescript-editor"):atom.views.getView(this.editor).classList.remove("typescript-editor")},this.buffer=vu.create(t.getBuffer(),e),this.subscriptions.add(this.buffer.on("opened",this.onOpened)),this.checkIfTypescript(),this.subscriptions.add(t.onDidChangePath(this.checkIfTypescript),t.onDidChangeGrammar(this.checkIfTypescript),t.onDidDestroy(this.destroy),t.onDidSave((()=>{atom.config.get("atom-typescript.checkAllFilesOnSave")&&atom.commands.dispatch(atom.views.getView(t),"typescript:check-all-files")})))}static createFactory(t){return e=>{let n=yu.editorMap.get(e);return n||(n=new yu(e,t),yu.editorMap.set(e,n)),n}}static lookupPane(t){return yu.editorMap.get(t)}reportInfo(){const t=this.buffer.getInfo();t&&this.opts.reportClientInfo(t)}}yu.editorMap=new WeakMap;class wu{constructor(t){this.usingBuiltinTooltipManager=!0,this.usingBuiltinSigHelpManager=!0,this.pending=new Set,this.clearErrors=()=>{this.errorPusher.clear()},this.clearFileErrors=t=>{this.errorPusher.clearFileErrors(t)},this.getClient=async t=>this.clientResolver.get(t),this.killAllServers=()=>{Ee(this.clientResolver.restartAllServers())},this.withBuffer=async(t,e)=>{const n=P(t),r=atom.workspace.getTextEditors().find((t=>t.getPath()===n));if(r)return e(r.getBuffer());const i=await y.load(n);try{return await e(i)}finally{i.isModified()&&await i.save(),i.destroy()}},this.reportBusyWhile=async(t,e)=>{if(this.busySignalService)return this.busySignalService.reportBusyWhile(t,e);{const n={title:t};try{return this.pending.add(n),this.drawPending(Array.from(this.pending)),await e()}finally{this.pending.delete(n),this.drawPending(Array.from(this.pending))}}},this.reportProgress=t=>{Ee(this.statusPanel.update({progress:t}))},this.reportBuildStatus=t=>{Ee(this.statusPanel.update({buildStatus:t}))},this.reportClientInfo=t=>{Ee(this.statusPanel.update(t))},this.applyEdits=async t=>{Promise.all(t.map((t=>this.withBuffer(t.fileName,(async e=>{e.transact((()=>{const n=t.textChanges.map((t=>({range:hn(t),newText:t.newText}))).reverse().sort(((t,e)=>e.range.compare(t.range)));for(const t of n)e.setTextInRange(t.range,t.newText)}))})))))},this.showTooltipAt=async t=>{this.usingBuiltinTooltipManager?this.tooltipManager.showExpressionAt(t):await atom.commands.dispatch(atom.views.getView(t),"datatip:toggle")},this.showSigHelpAt=async t=>{this.usingBuiltinSigHelpManager?await this.sigHelpManager.showTooltipAt(t):await atom.commands.dispatch(atom.views.getView(t),"signature-help:show")},this.hideSigHelpAt=t=>!!this.usingBuiltinSigHelpManager&&this.sigHelpManager.hideTooltipAt(t),this.rotateSigHelp=(t,e)=>!!this.usingBuiltinSigHelpManager&&this.sigHelpManager.rotateSigHelp(t,e),this.histGoForward=(t,e)=>this.editorPosHist.goForward(t,e),this.drawPending=Te.throttle((t=>Ee(this.statusPanel.update({pending:t}))),100,{leading:!1}),this.subscriptions=new g,this.clientResolver=new li(this.reportBusyWhile),this.subscriptions.add(this.clientResolver),this.statusPanel=new Qc,this.subscriptions.add(this.statusPanel),this.errorPusher=new gu,this.subscriptions.add(this.errorPusher),this.codefixProvider=new co(this.clientResolver,this.errorPusher,this.applyEdits),this.subscriptions.add(this.codefixProvider),this.semanticViewController=new au(this.getClient),this.subscriptions.add(this.semanticViewController),this.editorPosHist=new Zc(t&&t.editorPosHistState),this.subscriptions.add(this.editorPosHist),this.symbolsViewController=new du({histGoForward:this.histGoForward,getClient:this.getClient}),this.subscriptions.add(this.symbolsViewController),this.tooltipManager=new su(this.getClient),this.subscriptions.add(this.tooltipManager),this.sigHelpManager=new nu({getClient:this.getClient}),this.subscriptions.add(this.sigHelpManager),this.occurrenceManager=new Yc(this.getClient),this.subscriptions.add(this.occurrenceManager),this.typescriptPaneFactory=yu.createFactory({clearFileErrors:this.clearFileErrors,getClient:this.getClient,reportBuildStatus:this.reportBuildStatus,reportClientInfo:this.reportClientInfo}),this.subscribeEditors(),this.subscriptions.add(Uc({getClient:this.getClient,applyEdits:this.applyEdits,clearErrors:this.clearErrors,killAllServers:this.killAllServers,reportProgress:this.reportProgress,reportBuildStatus:this.reportBuildStatus,toggleSemanticViewController:()=>{Ee(this.semanticViewController.toggle())},toggleFileSymbolsView:t=>{this.symbolsViewController.toggleFileView(t)},toggleProjectSymbolsView:t=>{this.symbolsViewController.toggleProjectView(t)},histGoForward:this.histGoForward,histGoBack:()=>this.editorPosHist.goBack(),histShowHistory:()=>this.editorPosHist.showHistory(),showTooltipAt:this.showTooltipAt,showSigHelpAt:this.showSigHelpAt,hideSigHelpAt:this.hideSigHelpAt,rotateSigHelp:this.rotateSigHelp}))}destroy(){this.subscriptions.dispose();for(const t of atom.workspace.getTextEditors()){const e=yu.lookupPane(t);e&&e.destroy()}}serialize(){return{version:"0.1",editorPosHistState:this.editorPosHist.serialize()}}consumeLinter(t){const e=t({name:"TypeScript"});this.errorPusher.setLinter(e),this.subscriptions.add(this.clientResolver.on("diagnostics",(({type:t,filePath:e,diagnostics:n})=>{this.errorPusher.setErrors(t,e,n)})))}consumeStatusBar(t){let e=100;for(const n of t.getRightTiles())"GRAMMAR-SELECTOR-STATUS"===atom.views.getView(n.getItem()).tagName&&(e=n.getPriority()-1);const n=t.addRightTile({item:this.statusPanel,priority:e}),r=new w((()=>{n.destroy()}));return this.subscriptions.add(r),r}consumeDatatipService(t){if(atom.config.get("atom-typescript").preferBuiltinTooltips)return;const e=t.addProvider(new gi(this.getClient));return this.subscriptions.add(e),this.tooltipManager.dispose(),this.usingBuiltinTooltipManager=!1,e}consumeSigHelpService(t){if(atom.config.get("atom-typescript").preferBuiltinSigHelp)return;const e=new Zi(this.getClient),n=t(e);return this.subscriptions.add(n,e),this.sigHelpManager.dispose(),this.usingBuiltinSigHelpManager=!1,n}consumeBusySignal(t){if(atom.config.get("atom-typescript").preferBuiltinBusySignal)return;this.busySignalService=t;const e={dispose:()=>{this.busySignalService&&this.busySignalService.dispose(),this.busySignalService=void 0}};return this.subscriptions.add(e),e}provideAutocomplete(){return[new Yi(this.getClient,this.applyEdits)]}provideIntentions(){return t=this.codefixProvider,{grammarScopes:["*"],getIntentions:async function({bufferPosition:e,textEditor:n}){return(await t.runCodeFix(n,e)).map((e=>({priority:100,title:"description"in e?e.description:e.actionDescription,selected:()=>{Ee(t.applyFix(e))}})))}};var t}provideIntentionsHighlight(){return t=this.codefixProvider,{grammarScopes:["*"],getIntentions:async function({visibleRange:e,textEditor:n}){return(await t.getFixableRanges(n,e)).map((t=>({range:t,created:t=>{}})))}};var t}provideCodeActions(){return t=this.codefixProvider,{grammarScopes:kn(),priority:0,getCodeActions:async function(e,n){return(await t.runCodeFix(e,n.start)).map((e=>({getTitle:async()=>"description"in e?e.description:e.actionDescription,dispose:()=>{},apply:async()=>{await t.applyFix(e)}})))}};var t}provideHyperclick(){return t=this.getClient,e=this.histGoForward,{priority:0,providerName:"typescript-hyperclick-provider",wordRegExp:/([A-Za-z0-9_])+|['"`](\\.|[^'"`\\\\])*['"`]/g,getSuggestionForWord:async function(n,r,i){if(!En(n))return;const o=n.getPath();return void 0!==o?{range:i,callback:async()=>{var r;const s={file:o,line:i.start.row+1,offset:i.start.column+1},a=await t(s.file),c=await a.execute("definition",s),u=c.body?c.body[0]:void 0;if(1===(null===(r=c.body)||void 0===r?void 0:r.length)&&(null==u?void 0:u.start.line)===s.line&&(null==u?void 0:u.start.offset)===s.offset){const t=await a.execute("references",s);await Vi(t,n,e)}else await Wi(c,n,e)}}:void 0}};var t,e}provideReferences(){return t=this.getClient,{isEditorSupported:async function(t){return En(t)},findReferences:async function(e,n){const r=Pn(e,n);if(!r)return;const i=await t(r.file),o=await i.execute("references",r);return o.body?{type:"data",baseUri:r.file,referencedSymbolName:o.body.symbolDisplayString,references:o.body.refs.map(yi)}:void 0}};var t}provideOutlines(){return t=this.getClient,{name:"Atom-TypeScript",grammarScopes:kn(),priority:100,updateOnEdit:!0,getOutline:async function(e){const n=e.getPath();if(void 0===n)return;const r=await t(n),i=(await r.execute("navtree",{file:n})).body;return i?{outlineTrees:[Gi(i)]}:void 0}};var t}provideDefinitions(){var t;if(!atom.config.get("atom-typescript").disableAtomIdeDefinitions)return t=this.getClient,{name:"atom-typescript",priority:0,grammarScopes:kn(),wordRegExp:/([A-Za-z0-9_])+|['"`](\\.|[^'"`\\\\])*['"`]/g,getDefinition:async function(e,n){if(!En(e))return;const r=Pn(e,n);if(!r)return;const i=await t(r.file),o=await i.execute("definition",r);return o.body&&0!==o.body.length?{queryRange:void 0,definitions:o.body.map(vi)}:void 0}}}provideCodeHighlight(){if(!atom.config.get("atom-typescript").preferBuiltinOccurrenceHighlight)return this.occurrenceManager.dispose(),fi(this.getClient)}subscribeEditors(){this.subscriptions.add(atom.workspace.observeTextEditors((t=>{this.typescriptPaneFactory(t)})),atom.workspace.onDidChangeActiveTextEditor((t=>{if(t&&En(t)){Ee(this.statusPanel.show());const e=yu.lookupPane(t);e&&e.didActivate()}else Ee(this.statusPanel.hide())})))}}let bu;exports.activate=function(t){ke.setScheduler(atom.views),bu=new wu(t),s((()=>Ee(async function(){["atom-ide-ui","linter","nuclide"].some((t=>atom.packages.isPackageLoaded(t)))||await tt.install("atom-typescript",!0)}())))},exports.deactivate=function(){bu&&bu.destroy(),bu=void 0},exports.serialize=function(){return bu?bu.serialize():void 0},exports.deserializeSemanticView=function(t){return Rn.create(t.data)},exports.consumeLinter=function(t){if(bu)return bu.consumeLinter(t)},exports.consumeStatusBar=function(t){if(bu)return bu.consumeStatusBar(t)},exports.consumeDatatipService=function(t){if(bu)return bu.consumeDatatipService(t)},exports.consumeSignatureHelp=function(t){if(bu)return bu.consumeSigHelpService(t)},exports.consumeBusySignal=function(t){if(bu)return bu.consumeBusySignal(t)},exports.provideAutocomplete=function(){if(bu)return bu.provideAutocomplete()},exports.provideIntentions=function(){if(bu)return bu.provideIntentions()},exports.provideIntentionsHighlight=function(){if(bu)return bu.provideIntentionsHighlight()},exports.provideCodeActions=function(){if(bu)return bu.provideCodeActions()},exports.provideHyperclick=function(){if(bu)return bu.provideHyperclick()},exports.provideReferences=function(){if(bu)return bu.provideReferences()},exports.provideOutlines=function(){if(bu)return bu.provideOutlines()},exports.provideDefinitions=function(){if(bu)return bu.provideDefinitions()},exports.provideCodeHighlight=function(){if(bu)return bu.provideCodeHighlight()};
//# sourceMappingURL=main.js.map
